<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABC í†µí•© ì»¨ì„¤íŒ…: ì¹œêµ¬ ë•ê¸° ì—­í• ê·¹</title>
    <meta name="description" content="ABC ì‚¬ê³  ëª¨ë¸ê³¼ 4ë‹¨ê³„ ì»¨ì„¤íŒ…ì„ í†µí•©í•œ êµìœ¡ìš© ì—­í• ê·¹ ë„êµ¬">
    
    <!-- Tailwind CSS CDN (GitHub Pages ì•ˆì •ì  ë²„ì „) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- html2canvas CDN (ë°±ì—… í¬í•¨) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" 
            onerror="this.onerror=null; this.src='https://unpkg.com/html2canvas@1.4.1/dist/html2canvas.min.js'"></script>
    
    <!-- í•œê¸€ í°íŠ¸ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        
        /* ì»¤ìŠ¤í…€ ì• ë‹ˆë©”ì´ì…˜ */
        .slide-in { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .btn-hover:hover { transform: translateY(-2px); transition: all 0.2s; }
        .mode-btn.active { background: linear-gradient(135deg, #10b981, #059669); }
        .abc-card { transition: all 0.2s; cursor: pointer; }
        .abc-card:hover { transform: scale(1.05); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .abc-card.filled { background: linear-gradient(135deg, #dbeafe, #93c5fd); }
        
        /* ê³ ë¯¼ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .case-card {
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        .case-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            border-color: #3b82f6;
        }
        .case-card.selected {
            border-color: #8b5cf6 !important;
            background: linear-gradient(135deg, #f3e8ff, #e9d5ff) !important;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
        }
        .case-card.selected::before {
            content: 'âœ…';
            position: absolute;
            top: 8px;
            right: 8px;
            background: #8b5cf6;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            z-index: 10;
        }
        
        /* ABC ì¹´ë“œ ìŠ¤íƒ€ì¼ ê°œì„  */
        .abc-card {
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: visible;
        }
        .abc-card:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            z-index: 10;
        }
        .abc-card.filled {
            background: linear-gradient(135deg, #dbeafe, #93c5fd);
        }
        .abc-card.active {
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(0,0,0,0.12);
            border-width: 3px;
        }
        
        /* ABC ê°€ì´ë“œ íˆ´íŒ */
        .abc-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border: 2px solid;
            border-radius: 12px;
            padding: 12px;
            min-width: 250px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
            z-index: 20;
            margin-bottom: 8px;
        }
        .abc-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 8px solid transparent;
            border-top-color: inherit;
        }
        .abc-card:hover .abc-tooltip {
            opacity: 1;
            transform: translateX(-50%) translateY(-8px);
        }
        
        /* 3ë‹¨ê³„ ê°€ì´ë“œ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .reframe-card {
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: visible;
            border: 2px solid transparent;
        }
        .reframe-card:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            z-index: 10;
            border-color: #8b5cf6;
        }
        .reframe-card.active {
            transform: scale(1.03);
            box-shadow: 0 6px 16px rgba(0,0,0,0.12);
            border-width: 3px;
        }
        
        /* 3ë‹¨ê³„ íˆ´íŒ */
        .reframe-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border: 2px solid;
            border-radius: 12px;
            padding: 12px;
            min-width: 280px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
            z-index: 20;
            margin-bottom: 8px;
        }
        .reframe-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 8px solid transparent;
            border-top-color: inherit;
        }
        .reframe-card:hover .reframe-tooltip {
            opacity: 1;
            transform: translateX(-50%) translateY(-8px);
        }
        
        /* 3ë‹¨ê³„ë³„ ìƒ‰ìƒ */
        .reframe-old .reframe-tooltip { border-color: #64748b; }
        .reframe-old .reframe-tooltip::after { border-top-color: #64748b; }
        .reframe-new .reframe-tooltip { border-color: #8b5cf6; }
        .reframe-new .reframe-tooltip::after { border-top-color: #8b5cf6; }
        .reframe-action .reframe-tooltip { border-color: #06b6d4; }
        .reframe-action .reframe-tooltip::after { border-top-color: #06b6d4; }
        
        /* ë‹¨ê³„ ë„¤ë¹„ê²Œì´ì…˜ */
        .step-nav-btn { 
            transition: all 0.2s; 
            cursor: pointer; 
            border: 2px solid transparent;
        }
        .step-nav-btn:hover:not(.step-nav-active) { 
            background: #e5e7eb !important; 
            transform: translateY(-1px); 
        }
        .step-nav-btn.step-nav-active { 
            border-color: #059669;
            box-shadow: 0 0 0 2px rgba(5, 150, 105, 0.2);
        }
        .step-nav-btn.step-nav-visited { 
            background: #d1fae5 !important; 
            color: #065f46 !important; 
        }
        .step-nav-btn.step-nav-completed {
            background: #10b981 !important;
            color: white !important;
        }
        
        /* ì—­í•  êµ¬ë¶„ ìƒ‰ìƒ */
        .role-consultant { border-left: 4px solid #10b981; background: #f0fdf4; }
        .role-client { border-left: 4px solid #3b82f6; background: #eff6ff; }
        
        /* ê°ì • ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .emotion-btn.selected {
            border-color: #10b981;
            background-color: #d1fae5;
            color: #065f46;
            font-weight: 600;
        }
        
        /* ë°˜ì‘í˜• ê·¸ë¦¬ë“œ */
        @media (max-width: 768px) {
            .grid-responsive { grid-template-columns: 1fr; }
        }
        
        /* í…ìŠ¤íŠ¸ ë§ì¤„ì„ */
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }
        
        /* ì¸ì‡„ ìŠ¤íƒ€ì¼ */
        @media print {
            body * { visibility: hidden; }
            #printable-consultation, #printable-consultation * { 
                visibility: visible; 
            }
            #printable-consultation {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                background: white !important;
            }
            .no-print { display: none !important; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-50 to-blue-50 min-h-screen p-4">
    <div class="max-w-7xl mx-auto">
        
        <!-- ë©”ì¸ í—¤ë” -->
        <header class="text-center bg-white rounded-2xl shadow-lg p-6 mb-6 border-t-4 border-green-500">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">ğŸ­ ABC í†µí•© ì»¨ì„¤íŒ…</h1>
            <p class="text-gray-600 mb-4">ABC ì‚¬ê³  ë¶„ì„ê³¼ 4ë‹¨ê³„ ì»¨ì„¤íŒ…ìœ¼ë¡œ ì¹œêµ¬ë¥¼ ë„ì™€ì£¼ëŠ” ì—­í• ê·¹ ì—°ìŠµ</p>
            <div class="flex justify-center items-center gap-4 text-sm mb-4">
                <div class="role-consultant px-3 py-1 rounded-full">ğŸ‘¨â€ğŸ« ì»¨ì„¤í„´íŠ¸</div>
                <div class="role-client px-3 py-1 rounded-full">ğŸ™‹â€â™€ï¸ ë‚´ë‹´ì</div>
            </div>
            
            <!-- ìë™ ì €ì¥ ìƒíƒœ í‘œì‹œ -->
            <div class="flex justify-center items-center gap-4 text-xs text-gray-500">
                <div class="flex items-center gap-1">
                    <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                    <span>ìë™ ì €ì¥ ì¤‘</span>
                </div>
                <button id="manual-save-btn" class="bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-lg transition-colors text-gray-600 hover:text-gray-800">
                    ğŸ’¾ ìˆ˜ë™ ì €ì¥
                </button>
                <button id="clear-data-btn" class="bg-red-100 hover:bg-red-200 px-3 py-1 rounded-lg transition-colors text-red-600 hover:text-red-800">
                    ğŸ—‘ï¸ ë°ì´í„° ì´ˆê¸°í™”
                </button>
            </div>
        </header>

        <!-- ì‹œì‘ í™”ë©´ -->
        <div id="start-screen" class="slide-in">
            <div class="bg-white rounded-2xl shadow-lg p-8 mb-6">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ¯ ì—­í• ê·¹ ì¤€ë¹„í•˜ê¸°</h2>
                    <p class="text-gray-600">ë‘ ëª…ì´ ì§ì„ ì´ë¤„ ì»¨ì„¤í„´íŠ¸ì™€ ë‚´ë‹´ì ì—­í• ì„ ë²ˆê°ˆì•„ í•´ë³´ë©° 4ë‹¨ê³„ ì»¨ì„¤íŒ…ì„ ì—°ìŠµí•´ë³´ì„¸ìš”.</p>
                </div>

                <!-- ì°¸ê°€ì ì •ë³´ -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="role-consultant p-4 rounded-lg">
                        <h3 class="font-bold text-green-700 mb-3">ğŸ‘¨â€ğŸ« ì»¨ì„¤í„´íŠ¸ (ë„ì›€ ì£¼ëŠ” ì‚¬ëŒ)</h3>
                        <div class="space-y-3">
                            <input type="text" id="consultant-name" placeholder="ì´ë¦„" class="w-full p-2 border rounded-lg">
                            <input type="text" id="consultant-class" placeholder="í•™ë…„/ë°˜" class="w-full p-2 border rounded-lg">
                        </div>
                    </div>
                    <div class="role-client p-4 rounded-lg">
                        <h3 class="font-bold text-blue-700 mb-3">ğŸ™‹â€â™€ï¸ ë‚´ë‹´ì (ë„ì›€ ë°›ëŠ” ì‚¬ëŒ)</h3>
                        <div class="space-y-3">
                            <input type="text" id="client-name" placeholder="ì´ë¦„" class="w-full p-2 border rounded-lg">
                            <input type="text" id="client-class" placeholder="í•™ë…„/ë°˜" class="w-full p-2 border rounded-lg">
                        </div>
                    </div>
                </div>

                <!-- ì‚¬ë¡€ ì„ íƒ -->
                <div class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ’­ ì–´ë–¤ ê³ ë¯¼ì„ ë‹¤ë¤„ë³¼ê¹Œìš”?</h3>
                    
                    <!-- ëª¨ë“œ ì„ íƒ -->
                    <div class="flex gap-4 mb-4">
                        <button id="random-mode" class="mode-btn active px-6 py-3 text-white rounded-lg flex-1 btn-hover">
                            ğŸ² ì¤€ë¹„ëœ ì‚¬ë¡€ (50ê°€ì§€)
                        </button>
                        <button id="custom-mode" class="mode-btn px-6 py-3 bg-gray-300 text-gray-700 rounded-lg flex-1 btn-hover">
                            âœï¸ ì§ì ‘ ì…ë ¥í•˜ê¸°
                        </button>
                    </div>

                    <!-- ëœë¤ ì‚¬ë¡€ ì˜ì—­ -->
                    <div id="random-case-area" class="case-mode-area">
                        <div class="text-center mb-4">
                            <p class="text-lg font-semibold text-gray-700 mb-2">ğŸ¯ ìƒí™©ì„ ì„ íƒí•´ì£¼ì„¸ìš”</p>
                            <div class="flex justify-between items-center">
                                <p class="text-sm text-gray-500">ì´ <span id="total-cases-count">50</span>ê°€ì§€ ìƒí™©ì´ ì¤€ë¹„ë˜ì–´ ìˆì–´ìš”!</p>
                                <button id="shuffle-cases-btn" class="bg-orange-500 text-white px-4 py-2 rounded-lg text-sm btn-hover">
                                    ğŸ”„ ë‹¤ë¥¸ ì˜ˆì‹œ
                                </button>
                            </div>
                        </div>
                        
                        <!-- ê³ ë¯¼ ì¹´ë“œë“¤ -->
                        <div id="case-cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4">
                            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ì¹´ë“œë“¤ -->
                        </div>
                        
                        <!-- ì„ íƒëœ ì‚¬ë¡€ í‘œì‹œ -->
                        <div id="selected-case-display" class="bg-blue-50 border-2 border-blue-300 p-4 rounded-lg hidden">
                            <h4 class="font-bold text-blue-800 mb-2">âœ… ì„ íƒëœ ê³ ë¯¼</h4>
                            <div id="selected-case-content" class="text-blue-700">
                                <!-- ì„ íƒëœ ì‚¬ë¡€ ë‚´ìš© -->
                            </div>
                        </div>
                    </div>

                    <!-- ì§ì ‘ ì…ë ¥ ì˜ì—­ -->
                    <div id="custom-case-area" class="case-mode-area hidden">
                        <div class="bg-yellow-50 p-3 rounded-lg mb-4 text-sm">
                            <p class="font-bold text-yellow-800">ğŸ“ ì…ë ¥ ê°€ì´ë“œ</p>
                            <ul class="text-yellow-700 ml-4 list-disc">
                                <li>ì‹¤ëª… ëŒ€ì‹  "ì¹œêµ¬", "ì„ ìƒë‹˜" ë“±ìœ¼ë¡œ í‘œí˜„í•´ì£¼ì„¸ìš”</li>
                                <li>ì‹¤ì œ ê²½í—˜ì´ë‚˜ ê°€ìƒ ìƒí™© ëª¨ë‘ ê´œì°®ì•„ìš”</li>
                                <li>ë‹¤ë¥¸ ì¹œêµ¬ë“¤ë„ í•™ìŠµí•  ìˆ˜ ìˆëŠ” ì‚¬ë¡€ë©´ ë” ì¢‹ì•„ìš”</li>
                            </ul>
                        </div>
                        <div class="space-y-3">
                            <input id="custom-title" type="text" placeholder="ê³ ë¯¼ ì œëª© (ì˜ˆ: ì¹œêµ¬ì™€ì˜ ê°ˆë“±)" class="w-full p-3 border rounded-lg">
                            <textarea id="custom-content" rows="4" placeholder="ìƒí™©ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•´ì£¼ì„¸ìš”..." class="w-full p-3 border rounded-lg"></textarea>
                        </div>
                    </div>
                </div>

                <button id="start-roleplay-btn" class="w-full bg-gradient-to-r from-green-500 to-blue-500 text-white font-bold py-4 text-lg rounded-lg btn-hover">
                    ğŸ­ ì—­í• ê·¹ ì‹œì‘í•˜ê¸°
                </button>
            </div>
        </div>

        <!-- ì—­í• ê·¹ í™”ë©´ -->
        <div id="roleplay-screen" class="hidden slide-in">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                
                <!-- ì™¼ìª½: í˜„ì¬ ë‹¨ê³„ & ì•ˆë‚´ -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-2xl shadow-lg p-6 sticky top-4">
                        <!-- ë‹¨ê³„ ë„¤ë¹„ê²Œì´ì…˜ -->
                        <div class="text-center mb-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-3">ì»¨ì„¤íŒ… ë‹¨ê³„</h3>
                            <div class="grid grid-cols-2 gap-2 mb-4">
                                <button id="step-nav-1" class="step-nav-btn step-nav-active px-3 py-2 text-sm rounded-lg bg-green-500 text-white font-medium" data-step="1">
                                    ğŸ’š 1ë‹¨ê³„<br><span class="text-xs">ê³µê°í•˜ê¸°</span>
                                </button>
                                <button id="step-nav-2" class="step-nav-btn px-3 py-2 text-sm rounded-lg bg-gray-300 text-gray-600 font-medium" data-step="2">
                                    ğŸ” 2ë‹¨ê³„<br><span class="text-xs">ABC ë¶„ì„</span>
                                </button>
                                <button id="step-nav-3" class="step-nav-btn px-3 py-2 text-sm rounded-lg bg-gray-300 text-gray-600 font-medium" data-step="3">
                                    âœ¨ 3ë‹¨ê³„<br><span class="text-xs">ìƒˆë¡œìš´ ìƒê°</span>
                                </button>
                                <button id="step-nav-4" class="step-nav-btn px-3 py-2 text-sm rounded-lg bg-gray-300 text-gray-600 font-medium" data-step="4">
                                    ğŸ 4ë‹¨ê³„<br><span class="text-xs">ê²©ë ¤í•˜ê¸°</span>
                                </button>
                            </div>
                            <p class="text-sm text-gray-600" id="step-desc">ë§ˆìŒì„ ë”°ëœ»í•˜ê²Œ ê³µê°í•´ì£¼ì„¸ìš”</p>
                        </div>

                        <!-- í˜„ì¬ ì—­í•  í‘œì‹œ -->
                        <div class="mb-6">
                            <div id="role-display" class="role-consultant p-3 rounded-lg text-center">
                                <div class="font-bold">ğŸ‘¨â€ğŸ« í˜„ì¬ ì»¨ì„¤í„´íŠ¸</div>
                                <div class="text-sm" id="current-consultant">ê¹€ë¯¼ìˆ˜</div>
                            </div>
                        </div>

                        <!-- ë‹¨ê³„ë³„ ê°€ì´ë“œ -->
                        <div id="step-guide" class="space-y-3 text-sm">
                            <div class="bg-green-50 p-3 rounded-lg">
                                <div class="font-bold text-green-700">ğŸ’š ê³µê° í¬ì¸íŠ¸</div>
                                <ul class="list-disc ml-4 text-green-600">
                                    <li>ê°ì •ì„ ì¸ì •í•´ì£¼ê¸°</li>
                                    <li>"í˜ë“¤ì—ˆê² êµ¬ë‚˜" í‘œí˜„</li>
                                    <li>ë¹„ìŠ·í•œ ê²½í—˜ ê³µìœ </li>
                                </ul>
                            </div>
                        </div>

                        <!-- ë‹¨ê³„ ì´ë™ ë²„íŠ¼ë“¤ -->
                        <div class="space-y-2 mt-4">
                            <button id="prev-step-btn" class="w-full bg-gray-400 text-white font-bold py-2 rounded-lg btn-hover disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                â¬…ï¸ ì´ì „ ë‹¨ê³„ë¡œ
                            </button>
                            <button id="next-step-btn" class="w-full bg-blue-500 text-white font-bold py-2 rounded-lg btn-hover">
                                â¡ï¸ ë‹¤ìŒ ë‹¨ê³„ë¡œ
                            </button>
                        </div>
                        
                        <!-- ì—­í•  êµì²´ ë²„íŠ¼ -->
                        <button id="switch-roles-btn" class="w-full bg-orange-500 text-white font-bold py-2 rounded-lg mt-4 btn-hover">
                            ğŸ”„ ì—­í•  ë°”ê¾¸ê¸°
                        </button>
                    </div>
                </div>

                <!-- ì˜¤ë¥¸ìª½: ì»¨ì„¤íŒ… ì‘ì—… ì˜ì—­ -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        
                        <!-- ê³ ë¯¼ ì‚¬ë¡€ í‘œì‹œ -->
                        <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                            <h4 class="font-bold text-gray-800 mb-2" id="displayed-title">í˜„ì¬ ê³ ë¯¼</h4>
                            <p class="text-gray-700" id="displayed-content">ê³ ë¯¼ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                        </div>

                        <!-- 1ë‹¨ê³„: ê³µê°í•˜ê¸° -->
                        <div id="step1-empathy" class="step-content bg-green-50 p-4 rounded-lg mb-4">
                            <h4 class="text-lg font-bold text-green-700 mb-3">ğŸ’š 1ë‹¨ê³„: ë§ˆìŒ ê³µê°í•˜ê¸°</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ğŸ­ ë‚´ë‹´ìì˜ ê°ì • íŒŒì•…í•˜ê¸°</label>
                                    <div id="recommended-emotions" class="grid grid-cols-3 gap-2 mb-3">
                                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ê°ì • ë²„íŠ¼ë“¤ -->
                                    </div>
                                    <div class="flex gap-2">
                                        <input type="text" id="direct-emotion-input" placeholder="ì§ì ‘ ê°ì • ì…ë ¥" class="flex-1 p-2 border rounded-lg text-sm">
                                        <button id="add-direct-emotion-btn" class="bg-green-500 text-white px-3 py-2 rounded-lg text-sm btn-hover">ì¶”ê°€</button>
                                    </div>
                                    <div class="mt-2">
                                        <div class="text-xs text-gray-600 mb-1">ì„ íƒëœ ê°ì •ë“¤:</div>
                                        <div id="selected-emotions-list" class="flex flex-wrap gap-1">
                                            <span class="text-xs text-gray-500">ê°ì •ì„ ì„ íƒí•˜ê±°ë‚˜ ì…ë ¥í•´ì£¼ì„¸ìš”</span>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ğŸ’š ê³µê° í‘œí˜„í•˜ê¸°</label>
                                    <textarea id="empathy-text" rows="3" class="w-full p-3 border rounded-lg" 
                                              placeholder="ì¹œêµ¬ì˜ ê°ì •ì„ ì¸ì •í•˜ê³  ê³µê°í•˜ëŠ” ë§ì„ í•´ë³´ì„¸ìš”..."></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- 2ë‹¨ê³„: ABC í•¨ê»˜ ë¶„ì„í•˜ê¸° -->
                        <div id="step2-abc" class="step-content hidden bg-blue-50 p-4 rounded-lg mb-4">
                            <h4 class="text-lg font-bold text-blue-700 mb-3">ğŸ” 2ë‹¨ê³„: ABC í•¨ê»˜ ë¶„ì„í•˜ê¸°</h4>
                            
                            <!-- ABC ì„¤ëª… -->
                            <div class="bg-white p-4 rounded-lg mb-4 border-l-4 border-blue-500">
                                <p class="text-sm text-gray-700 mb-2">
                                    <strong>ğŸ’¡ ABC ë¶„ì„ ë°©ë²•:</strong> ìƒí™©ì„ ì„¸ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì°¨ê·¼ì°¨ê·¼ ì •ë¦¬í•´ë³´ì„¸ìš”
                                </p>
                                <p class="text-xs text-gray-600">
                                    ê° ì¹´ë“œì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ìƒì„¸ ê°€ì´ë“œê°€ ë‚˜íƒ€ë‚˜ìš”. í´ë¦­í•˜ë©´ í•´ë‹¹ ì˜ì—­ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤!
                                </p>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                <div class="abc-card abc-a bg-white p-4 rounded-lg text-center border-2 border-red-300 relative" data-abc="A">
                                    <div class="font-bold text-red-600 text-2xl mb-1">A</div>
                                    <div class="text-sm text-red-600 font-medium">ì‚¬ì‹¤/ì‚¬ê±´</div>
                                    <div class="text-xs text-red-500 mt-1">Antecedent</div>
                                    
                                    <!-- íˆ´íŒ -->
                                    <div class="abc-tooltip">
                                        <div class="font-bold text-red-700 mb-2">ğŸ” A: ì‚¬ì‹¤ê³¼ ì‚¬ê±´</div>
                                        <div class="text-xs text-gray-700 space-y-1">
                                            <div><strong>âœ“ í¬í•¨í•  ê²ƒ:</strong></div>
                                            <div>â€¢ ì‹¤ì œë¡œ ì¼ì–´ë‚œ ì¼</div>
                                            <div>â€¢ ê´€ì°° ê°€ëŠ¥í•œ ì‚¬ì‹¤</div>
                                            <div>â€¢ ì–¸ì œ, ì–´ë””ì„œ, ëˆ„ê°€, ë¬´ì—‡ì„</div>
                                            <div class="mt-2"><strong>âœ— ì œì™¸í•  ê²ƒ:</strong></div>
                                            <div>â€¢ ë‚´ ìƒê°ì´ë‚˜ í•´ì„</div>
                                            <div>â€¢ ê°ì •ì´ë‚˜ ê¸°ë¶„</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="abc-card abc-b bg-white p-4 rounded-lg text-center border-2 border-orange-300 relative" data-abc="B">
                                    <div class="font-bold text-orange-600 text-2xl mb-1">B</div>
                                    <div class="text-sm text-orange-600 font-medium">ìƒê°/ì‹ ë…</div>
                                    <div class="text-xs text-orange-500 mt-1">Belief</div>
                                    
                                    <!-- íˆ´íŒ -->
                                    <div class="abc-tooltip">
                                        <div class="font-bold text-orange-700 mb-2">ğŸ§  B: ìƒê°ê³¼ ì‹ ë…</div>
                                        <div class="text-xs text-gray-700 space-y-1">
                                            <div><strong>âœ“ í¬í•¨í•  ê²ƒ:</strong></div>
                                            <div>â€¢ ê·¸ ìƒí™©ì—ì„œ ë“  ìƒê°</div>
                                            <div>â€¢ ë‚˜ì˜ í•´ì„ê³¼ íŒë‹¨</div>
                                            <div>â€¢ "~ë¼ê³  ìƒê°í–ˆë‹¤"</div>
                                            <div class="mt-2"><strong>ğŸ” ì°¾ëŠ” ì§ˆë¬¸:</strong></div>
                                            <div>â€¢ ê·¸ë•Œ ë¨¸ë¦¿ì†ì— ë­ê°€ ë– ì˜¬ëì§€?</div>
                                            <div>â€¢ ì–´ë–»ê²Œ ë°›ì•„ë“¤ì˜€ì§€?</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="abc-card abc-c bg-white p-4 rounded-lg text-center border-2 border-blue-300 relative" data-abc="C">
                                    <div class="font-bold text-blue-600 text-2xl mb-1">C</div>
                                    <div class="text-sm text-blue-600 font-medium">ê²°ê³¼</div>
                                    <div class="text-xs text-blue-500 mt-1">Consequence</div>
                                    
                                    <!-- íˆ´íŒ -->
                                    <div class="abc-tooltip">
                                        <div class="font-bold text-blue-700 mb-2">ğŸ’« C: ê²°ê³¼ì™€ ë°˜ì‘</div>
                                        <div class="text-xs text-gray-700 space-y-1">
                                            <div><strong>âœ“ í¬í•¨í•  ê²ƒ:</strong></div>
                                            <div>â€¢ ê·¸ë•Œ ëŠë‚€ ê°ì •</div>
                                            <div>â€¢ ì‹¤ì œë¡œ í•œ í–‰ë™</div>
                                            <div>â€¢ ëª¸ì˜ ë°˜ì‘ (ì‹¬ì¥ ë¹¨ë¼ì§ ë“±)</div>
                                            <div class="mt-2"><strong>ğŸ” ì°¾ëŠ” ì§ˆë¬¸:</strong></div>
                                            <div>â€¢ ê¸°ë¶„ì´ ì–´ë• ì§€?</div>
                                            <div>â€¢ ì–´ë–»ê²Œ í–‰ë™í–ˆì§€?</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ë™ì  ê°€ì´ë“œ ì˜ì—­ -->
                            <div id="abc-guide-area" class="bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4 mb-4 hidden">
                                <div id="abc-guide-content">
                                    <!-- ì„ íƒëœ ABCì— ë”°ë¥¸ ê°€ì´ë“œê°€ ì—¬ê¸°ì— í‘œì‹œ -->
                                </div>
                            </div>
                            
                            <!-- ì…ë ¥ ì˜ì—­ -->
                            <div class="bg-white rounded-lg p-4 border-2 border-gray-200">
                                <div class="flex items-center justify-between mb-3">
                                    <label class="text-sm font-semibold text-gray-700">ğŸ“ ABC ë¶„ì„ ì‘ì„±í•˜ê¸°</label>
                                    <button id="abc-example-btn" class="bg-purple-500 text-white px-3 py-1 rounded-lg text-xs btn-hover">
                                        ğŸ’¡ ì˜ˆì‹œ ë³´ê¸°
                                    </button>
                                </div>
                                <textarea id="abc-analysis" rows="4" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                                          placeholder="A: ì •í™•íˆ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€ ì¨ë³´ì„¸ìš”...&#10;B: ê·¸ë•Œ ì–´ë–¤ ìƒê°ì´ ë“¤ì—ˆëŠ”ì§€ ì¨ë³´ì„¸ìš”...&#10;C: ì–´ë–¤ ê¸°ë¶„ì´ì—ˆê³  ì–´ë–»ê²Œ í–‰ë™í–ˆëŠ”ì§€ ì¨ë³´ì„¸ìš”..."></textarea>
                                
                                <!-- ABC ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
                                <div class="mt-3 grid grid-cols-1 md:grid-cols-3 gap-3">
                                    <div class="bg-red-50 p-2 rounded text-xs">
                                        <div class="font-semibold text-red-700 mb-1">A ì²´í¬ âœ“</div>
                                        <div class="text-red-600">ê°ê´€ì  ì‚¬ì‹¤ë§Œ ì¼ë‚˜ìš”?</div>
                                    </div>
                                    <div class="bg-orange-50 p-2 rounded text-xs">
                                        <div class="font-semibold text-orange-700 mb-1">B ì²´í¬ âœ“</div>
                                        <div class="text-orange-600">ê·¸ë•Œ ë“  ìƒê°ì„ ì¼ë‚˜ìš”?</div>
                                    </div>
                                    <div class="bg-blue-50 p-2 rounded text-xs">
                                        <div class="font-semibold text-blue-700 mb-1">C ì²´í¬ âœ“</div>
                                        <div class="text-blue-600">ê°ì •ê³¼ í–‰ë™ì„ ì¼ë‚˜ìš”?</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 3ë‹¨ê³„: ìƒˆë¡œìš´ ìƒê° í•¨ê»˜ ë§Œë“¤ê¸° -->
                        <div id="step3-reframe" class="step-content hidden bg-purple-50 p-4 rounded-lg mb-4">
                            <h4 class="text-lg font-bold text-purple-700 mb-3">âœ¨ 3ë‹¨ê³„: ìƒˆë¡œìš´ ìƒê° í•¨ê»˜ ë§Œë“¤ê¸°</h4>
                            
                            <!-- 3ë‹¨ê³„ ì„¤ëª… -->
                            <div class="bg-white p-4 rounded-lg mb-4 border-l-4 border-purple-500">
                                <p class="text-sm text-gray-700 mb-2">
                                    <strong>ğŸ’¡ ìƒê° ë°”ê¾¸ê¸°:</strong> í˜ë“¤ê²Œ ë§Œë“  ìƒê°ì„ ë” í˜„ì‹¤ì ì´ê³  ë„ì›€ì´ ë˜ëŠ” ìƒê°ìœ¼ë¡œ ë°”ê¿”ë³´ì„¸ìš”
                                </p>
                                <p class="text-xs text-gray-600">
                                    ê° ì¹´ë“œì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ê°€ì´ë“œê°€ ë‚˜íƒ€ë‚˜ìš”. í´ë¦­í•˜ë©´ ë” ìì„¸í•œ ë„ì›€ì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”!
                                </p>
                            </div>
                            
                            <!-- 3ë‹¨ê³„ ê°€ì´ë“œ ì¹´ë“œë“¤ -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                <div class="reframe-card reframe-old bg-gray-100 p-4 rounded-lg text-center relative" data-reframe="old">
                                    <div class="text-2xl mb-2">ğŸ¤”</div>
                                    <div class="font-bold text-gray-700 text-sm mb-1">ê¸°ì¡´ ìƒê° ê²€í† </div>
                                    <div class="text-xs text-gray-600">ë¬¸ì œê°€ ëœ ìƒê° ì°¾ê¸°</div>
                                    
                                    <!-- íˆ´íŒ -->
                                    <div class="reframe-tooltip">
                                        <div class="font-bold text-gray-700 mb-2">ğŸ¤” ê¸°ì¡´ ìƒê° ë‹¤ì‹œ ë³´ê¸°</div>
                                        <div class="text-xs text-gray-700 space-y-1">
                                            <div><strong>âœ“ í™•ì¸í•  ê²ƒ:</strong></div>
                                            <div>â€¢ 2ë‹¨ê³„ Bì—ì„œ ì“´ ìƒê°</div>
                                            <div>â€¢ ë„ˆë¬´ ê·¹ë‹¨ì ì¸ ìƒê°ì€?</div>
                                            <div>â€¢ ë„ì›€ì´ ì•ˆ ë˜ëŠ” ìƒê°ì€?</div>
                                            <div class="mt-2"><strong>ğŸ” ì°¾ëŠ” ì‹ í˜¸:</strong></div>
                                            <div>â€¢ "í•­ìƒ", "ì ˆëŒ€", "ì™„ì „íˆ"</div>
                                            <div>â€¢ "ëë‚¬ë‹¤", "ë§í–ˆë‹¤"</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="reframe-card reframe-new bg-purple-100 p-4 rounded-lg text-center relative" data-reframe="new">
                                    <div class="text-2xl mb-2">ğŸ’œ</div>
                                    <div class="font-bold text-purple-700 text-sm mb-1">ìƒˆë¡œìš´ ìƒê°</div>
                                    <div class="text-xs text-purple-600">í˜„ì‹¤ì ì´ê³  ë„ì›€ë˜ëŠ” ìƒê°</div>
                                    
                                    <!-- íˆ´íŒ -->
                                    <div class="reframe-tooltip">
                                        <div class="font-bold text-purple-700 mb-2">ğŸ’œ ìƒˆë¡œìš´ ìƒê° ë§Œë“¤ê¸°</div>
                                        <div class="text-xs text-gray-700 space-y-1">
                                            <div><strong>âœ“ í¬í•¨í•  ê²ƒ:</strong></div>
                                            <div>â€¢ í˜„ì‹¤ì ì´ê³  ê· í˜•ì¡íŒ ìƒê°</div>
                                            <div>â€¢ ë„ì›€ì´ ë˜ê³  í¬ë§ì ì¸ ìƒê°</div>
                                            <div>â€¢ êµ¬ì²´ì ì´ê³  ì‹¤í˜„ ê°€ëŠ¥í•œ ìƒê°</div>
                                            <div class="mt-2"><strong>ğŸ” ë§Œë“œëŠ” ë°©ë²•:</strong></div>
                                            <div>â€¢ "ë¶€ë¶„ì ìœ¼ë¡œëŠ”...", "ë•Œë¡œëŠ”..."</div>
                                            <div>â€¢ "ë‹¤ìŒì—ëŠ”...", "ë°°ìš¸ ìˆ˜ ìˆì–´"</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="reframe-card reframe-action bg-cyan-100 p-4 rounded-lg text-center relative" data-reframe="action">
                                    <div class="text-2xl mb-2">ğŸ¯</div>
                                    <div class="font-bold text-cyan-700 text-sm mb-1">êµ¬ì²´ì  í–‰ë™</div>
                                    <div class="text-xs text-cyan-600">ì‹¤ì œë¡œ í•  ìˆ˜ ìˆëŠ” ì¼</div>
                                    
                                    <!-- íˆ´íŒ -->
                                    <div class="reframe-tooltip">
                                        <div class="font-bold text-cyan-700 mb-2">ğŸ¯ êµ¬ì²´ì  í–‰ë™ ê³„íš</div>
                                        <div class="text-xs text-gray-700 space-y-1">
                                            <div><strong>âœ“ í¬í•¨í•  ê²ƒ:</strong></div>
                                            <div>â€¢ ì‹¤ì œë¡œ ì‹¤í–‰ ê°€ëŠ¥í•œ í–‰ë™</div>
                                            <div>â€¢ ì‘ê³  êµ¬ì²´ì ì¸ ì²« ê±¸ìŒ</div>
                                            <div>â€¢ ë„ì›€ë°›ì„ ìˆ˜ ìˆëŠ” ë°©ë²•</div>
                                            <div class="mt-2"><strong>ğŸ” ë§Œë“œëŠ” ì§ˆë¬¸:</strong></div>
                                            <div>â€¢ ë‚´ì¼ ë­˜ í•´ë³¼ê¹Œ?</div>
                                            <div>â€¢ ëˆ„êµ¬ì—ê²Œ ë„ì›€ì„ ìš”ì²­í• ê¹Œ?</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ìƒê° ë°”ê¾¸ê¸° ì§ˆë¬¸ë“¤ (ê¸°ì¡´) -->
                            <div class="bg-yellow-50 p-3 rounded-lg mb-3">
                                <p class="text-sm font-semibold text-yellow-800 mb-2">ğŸ’¡ ìƒê° ë°”ê¾¸ê¸° ì§ˆë¬¸ë“¤</p>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-yellow-700">
                                    <div>â€¢ ì¹œí•œ ì¹œêµ¬ë¼ë©´ ë­ë¼ê³  í• ê¹Œ?</div>
                                    <div>â€¢ ì´ ìƒê°ì´ 100% ì‚¬ì‹¤ì¼ê¹Œ?</div>
                                    <div>â€¢ ë‹¤ë¥¸ ê°€ëŠ¥ì„±ì€ ì—†ì„ê¹Œ?</div>
                                    <div>â€¢ 1ë…„ í›„ì—ë„ ì¤‘ìš”í• ê¹Œ?</div>
                                </div>
                            </div>
                            
                            <!-- ë™ì  ê°€ì´ë“œ ì˜ì—­ -->
                            <div id="reframe-guide-area" class="bg-pink-50 border-2 border-pink-300 rounded-lg p-4 mb-4 hidden">
                                <div id="reframe-guide-content">
                                    <!-- ì„ íƒëœ ì˜ì—­ì— ë”°ë¥¸ ê°€ì´ë“œê°€ ì—¬ê¸°ì— í‘œì‹œ -->
                                </div>
                            </div>
                            
                            <!-- ì…ë ¥ ì˜ì—­ë“¤ -->
                            <div class="space-y-4">
                                <div class="bg-white rounded-lg p-4 border-2 border-gray-200">
                                    <div class="flex items-center justify-between mb-3">
                                        <label class="text-sm font-semibold text-gray-700">ğŸ’œ B' ìƒˆë¡œìš´ ìƒê°</label>
                                        <button id="new-thinking-example-btn" class="bg-purple-500 text-white px-3 py-1 rounded-lg text-xs btn-hover">
                                            ğŸ’¡ ì˜ˆì‹œ ë³´ê¸°
                                        </button>
                                    </div>
                                    <textarea id="new-thinking" rows="3" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500" 
                                              placeholder="ë” í˜„ì‹¤ì ì´ê³  ë„ì›€ì´ ë˜ëŠ” ìƒê°ìœ¼ë¡œ ë°”ê¿”ë³´ì„¸ìš”..."></textarea>
                                    
                                    <!-- ìƒˆë¡œìš´ ìƒê° ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
                                    <div class="mt-2 grid grid-cols-1 md:grid-cols-3 gap-2">
                                        <div class="bg-purple-50 p-2 rounded text-xs">
                                            <div class="font-semibold text-purple-700 mb-1">í˜„ì‹¤ì  âœ“</div>
                                            <div class="text-purple-600">ì‚¬ì‹¤ì— ê·¼ê±°í–ˆë‚˜ìš”?</div>
                                        </div>
                                        <div class="bg-purple-50 p-2 rounded text-xs">
                                            <div class="font-semibold text-purple-700 mb-1">ê· í˜•ì¡íŒ âœ“</div>
                                            <div class="text-purple-600">ê·¹ë‹¨ì ì´ì§€ ì•Šë‚˜ìš”?</div>
                                        </div>
                                        <div class="bg-purple-50 p-2 rounded text-xs">
                                            <div class="font-semibold text-purple-700 mb-1">ë„ì›€ë˜ëŠ” âœ“</div>
                                            <div class="text-purple-600">í¬ë§ì„ ì£¼ë‚˜ìš”?</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-white rounded-lg p-4 border-2 border-gray-200">
                                    <div class="flex items-center justify-between mb-3">
                                        <label class="text-sm font-semibold text-gray-700">ğŸ¯ êµ¬ì²´ì ì¸ ë„ì›€ ë°©ë²•</label>
                                        <button id="help-suggestions-example-btn" class="bg-cyan-500 text-white px-3 py-1 rounded-lg text-xs btn-hover">
                                            ğŸ’¡ ì˜ˆì‹œ ë³´ê¸°
                                        </button>
                                    </div>
                                    <textarea id="help-suggestions" rows="3" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500" 
                                              placeholder="ì¹œêµ¬ê°€ ì‹¤ì œë¡œ í•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì¸ í–‰ë™ì„ ì œì•ˆí•´ë³´ì„¸ìš”..."></textarea>
                                    
                                    <!-- êµ¬ì²´ì  í–‰ë™ ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
                                    <div class="mt-2 grid grid-cols-1 md:grid-cols-3 gap-2">
                                        <div class="bg-cyan-50 p-2 rounded text-xs">
                                            <div class="font-semibold text-cyan-700 mb-1">ì‹¤í–‰ ê°€ëŠ¥ âœ“</div>
                                            <div class="text-cyan-600">ì‹¤ì œë¡œ í•  ìˆ˜ ìˆë‚˜ìš”?</div>
                                        </div>
                                        <div class="bg-cyan-50 p-2 rounded text-xs">
                                            <div class="font-semibold text-cyan-700 mb-1">êµ¬ì²´ì  âœ“</div>
                                            <div class="text-cyan-600">ëª…í™•í•˜ê³  ì„¸ë¶€ì ì¸ê°€ìš”?</div>
                                        </div>
                                        <div class="bg-cyan-50 p-2 rounded text-xs">
                                            <div class="font-semibold text-cyan-700 mb-1">ì²« ê±¸ìŒ âœ“</div>
                                            <div class="text-cyan-600">ì‘ì€ ê²ƒë¶€í„° ì‹œì‘í•˜ë‚˜ìš”?</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 4ë‹¨ê³„: ê²©ë ¤í•˜ê¸° -->
                        <div id="step4-encourage" class="step-content hidden bg-pink-50 p-4 rounded-lg">
                            <h4 class="text-lg font-bold text-pink-700 mb-3">ğŸ 4ë‹¨ê³„: ë”°ëœ»í•œ ê²©ë ¤í•˜ê¸°</h4>
                            <div class="space-y-3">
                                <div>
                                    <button id="draw-encouragement-btn" class="bg-pink-500 text-white px-4 py-2 rounded-lg btn-hover mb-2">
                                        ğŸ² ê²©ë ¤ ë©”ì‹œì§€ ë½‘ê¸°
                                    </button>
                                    <div id="encouragement-message" class="bg-white p-3 rounded-lg min-h-[50px] flex items-center justify-center text-pink-700 font-medium">
                                        ê²©ë ¤ ë©”ì‹œì§€ë¥¼ ë½‘ì•„ë³´ì„¸ìš”!
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ğŸ’Œ ë‚˜ë§Œì˜ ê²©ë ¤ ë©”ì‹œì§€</label>
                                    <textarea id="personal-encouragement" rows="3" class="w-full p-3 border rounded-lg" 
                                              placeholder="ì¹œêµ¬ì—ê²Œ ì „í•˜ê³  ì‹¶ì€ íŠ¹ë³„í•œ ê²©ë ¤ì˜ ë§ì„ ì¨ë³´ì„¸ìš”..."></textarea>
                                </div>
                                
                                <!-- ì»¨ì„¤íŒ… ì™„ë£Œ ë²„íŠ¼ -->
                                <div class="pt-4 border-t">
                                    <button id="save-consultation-btn" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-3 rounded-lg btn-hover text-lg">
                                        ğŸ’¾ ì»¨ì„¤íŒ… ê²°ê³¼ ì €ì¥í•˜ê¸°
                                    </button>
                                    <p class="text-xs text-gray-500 text-center mt-2">
                                        ëª¨ë“  ë‹¨ê³„ì˜ ë‚´ìš©ì´ ì •ë¦¬ëœ ê²°ê³¼ë¬¼ì„ ì´ë¯¸ì§€ë¡œ ì €ì¥í•˜ê±°ë‚˜ ì¸ì‡„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ -->
        <div id="result-screen" class="hidden slide-in">
            <!-- ìº¡ì²˜ë  ì˜ì—­ -->
            <div id="printable-consultation" class="bg-gradient-to-br from-yellow-50 via-pink-50 to-purple-50 rounded-2xl shadow-lg p-8 mb-6">
                <div class="text-center mb-8 border-b-2 border-pink-200 pb-6">
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">ğŸ‰ ABC ì»¨ì„¤íŒ… ì™„ë£Œ ë³´ê³ ì„œ</h2>
                    <p class="text-gray-600 mb-4">ë”°ëœ»í•œ ë§ˆìŒìœ¼ë¡œ ì¹œêµ¬ë¥¼ ë„ì™€ì¤€ ì»¨ì„¤íŒ… ê²°ê³¼ì…ë‹ˆë‹¤</p>
                    <div class="text-sm text-gray-500" id="consultation-info">
                        <!-- ì»¨ì„¤í„´íŠ¸/ë‚´ë‹´ì ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œ -->
                    </div>
                </div>

                <div id="consultation-summary" class="space-y-6">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ìš”ì•½ ë‚´ìš© -->
                </div>
                
                <div class="text-center text-sm text-gray-500 mt-8 pt-6 border-t-2 border-pink-200">
                    <p>ì»¨ì„¤íŒ… ì™„ë£Œ ì‹œê°„: <span id="completion-time"></span></p>
                    <p class="mt-1">ğŸŒŸ ABC í†µí•© ì»¨ì„¤íŒ… ë„êµ¬ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤</p>
                </div>
            </div>
            
            <!-- ë²„íŠ¼ë“¤ì€ ìº¡ì²˜ ì˜ì—­ ë°–ì— ë°°ì¹˜ -->
            <div class="no-print space-y-4">
                <!-- ë©”ì¸ ì•¡ì…˜ ë²„íŠ¼ë“¤ -->
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button id="download-image-btn" class="bg-blue-500 text-white font-bold px-8 py-3 rounded-lg btn-hover text-lg">
                        ğŸ“· ì´ë¯¸ì§€ë¡œ ì €ì¥í•˜ê¸°
                    </button>
                    <button id="print-consultation-btn" class="bg-green-500 text-white font-bold px-8 py-3 rounded-lg btn-hover text-lg">
                        ğŸ–¨ï¸ ì¸ì‡„í•˜ê¸° (PDF ì €ì¥)
                    </button>
                </div>
                
                <!-- ë„ì›€ë§ -->
                <div class="text-center text-sm text-gray-600 bg-yellow-50 p-4 rounded-lg">
                    <p class="font-semibold mb-2">ğŸ’¡ ì €ì¥ ë°©ë²• ì•ˆë‚´</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <div>
                            <p><strong>ğŸ“· ì´ë¯¸ì§€ ì €ì¥:</strong> ì»¨ì„¤íŒ… ê²°ê³¼ë¥¼ PNG ì´ë¯¸ì§€ë¡œ ë‹¤ìš´ë¡œë“œ</p>
                            <p><strong>ğŸ–¨ï¸ ì¸ì‡„í•˜ê¸°:</strong> ë¸Œë¼ìš°ì € ì¸ì‡„ ì°½ì—ì„œ "PDFë¡œ ì €ì¥" ì„ íƒ</p>
                        </div>
                        <div>
                            <p><strong>ğŸ–¼ï¸ ì „ì²´í™”ë©´:</strong> í° í™”ë©´ìœ¼ë¡œ ë³´ë©° ìŠ¤í¬ë¦°ìƒ· ì´¬ì˜</p>
                            <p><strong>ğŸ“± ëª¨ë°”ì¼:</strong> ì „ì²´í™”ë©´ í›„ ìŠ¤í¬ë¦°ìƒ· ì¶”ì²œ</p>
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">â€» ì´ë¯¸ì§€ ì €ì¥ì´ ì•ˆ ë˜ëŠ” ê²½ìš° ì¸ì‡„ ë˜ëŠ” ì „ì²´í™”ë©´ ê¸°ëŠ¥ì„ ì´ìš©í•´ì£¼ì„¸ìš”</p>
                </div>
                
                <!-- ì¶”ê°€ ì•¡ì…˜ ë²„íŠ¼ë“¤ -->
                <div class="flex flex-col sm:flex-row gap-3 justify-center">
                    <button id="switch-and-restart-btn" class="bg-orange-500 text-white font-bold px-6 py-2 rounded-lg btn-hover">
                        ğŸ”„ ì—­í•  ë°”ê¿”ì„œ ë‹¤ì‹œí•˜ê¸°
                    </button>
                    <button id="new-case-btn" class="bg-purple-500 text-white font-bold px-6 py-2 rounded-lg btn-hover">
                        ğŸ†• ìƒˆë¡œìš´ ì‚¬ë¡€ë¡œ ì‹œì‘
                    </button>
                    <button id="restart-btn" class="bg-gray-500 text-white font-bold px-6 py-2 rounded-lg btn-hover">
                        ğŸ  ì²˜ìŒìœ¼ë¡œ
                    </button>
                    <button id="fullscreen-btn" class="bg-indigo-500 text-white font-bold px-6 py-2 rounded-lg btn-hover">
                        ğŸ–¼ï¸ ì „ì²´í™”ë©´ ë³´ê¸°
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== ë°ì´í„° =====
        const sampleCases = [
            { 
                title: "ì‹œí—˜ ì„±ì ì´ ë‚˜ë¹ ì„œ ì†ìƒí•´", 
                content: "ì—´ì‹¬íˆ ê³µë¶€í–ˆëŠ”ë° ì‹œí—˜ ì„±ì ì´ ìƒê°ë³´ë‹¤ ë§ì´ ì•ˆ ì¢‹ê²Œ ë‚˜ì™”ì–´. ë¶€ëª¨ë‹˜ê»˜ ì–´ë–»ê²Œ ë§ì”€ë“œë ¤ì•¼ í• ì§€ ëª¨ë¥´ê² ê³ , ì¹œêµ¬ë“¤ê³¼ ë¹„êµë˜ëŠ” ê²ƒë„ ì‹«ì–´.",
                emotions: ["ğŸ˜ ì‹¤ë§", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜¤ ì¢Œì ˆê°", "ğŸ˜” ìì±…ê°", "ğŸ˜¨ ë‘ë ¤ì›€"]
            },
            { 
                title: "ì¹œêµ¬ê°€ ë‚´ ë¹„ë°€ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë§í–ˆì–´", 
                content: "ê°€ì¥ ì¹œí•œ ì¹œêµ¬ë¼ê³  ìƒê°í–ˆëŠ”ë°, ë‚´ê°€ ë§í•˜ì§€ ë§ë¼ê³  í–ˆë˜ ë¹„ë°€ì„ ë‹¤ë¥¸ ë°˜ ì• ë“¤ì—ê²Œ ë‹¤ ë§í•´ë²„ë ¸ì–´. ë„ˆë¬´ ë°°ì‹ ê°ì´ ë“¤ê³  ì•ìœ¼ë¡œ ê·¸ ì¹œêµ¬ë¥¼ ì–´ë–»ê²Œ ëŒ€í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´.",
                emotions: ["ğŸ˜  í™”ë‚¨", "ğŸ˜” ë°°ì‹ ê°", "ğŸ˜¢ ìŠ¬í””", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¤ ì–µìš¸í•¨", "ğŸ˜ ì‹¤ë§"]
            },
            { 
                title: "ìƒˆ í•™ê¸‰ì— ì ì‘í•˜ê¸° ì–´ë ¤ì›Œ", 
                content: "ìƒˆ í•™ê¸°ê°€ ì‹œì‘ë˜ê³  ë°˜ì´ ë°”ë€Œì—ˆëŠ”ë°, ì•„ì§ë„ ì¹œêµ¬ë¥¼ ì˜ ëª» ì‚¬ê·€ì—ˆì–´. ë‹¤ë¥¸ ì• ë“¤ì€ ì´ë¯¸ ì¹œí•´ì§„ ê²ƒ ê°™ì€ë° ë‚˜ë§Œ í˜¼ìì¸ ê²ƒ ê°™ì•„ì„œ í•™êµ ê°€ê¸°ê°€ ì‹«ì–´ì ¸.",
                emotions: ["ğŸ˜” ì™¸ë¡œì›€", "ğŸ˜Ÿ ë¶ˆì•ˆí•¨", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜ ì†Œì™¸ê°", "ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜¤ ë‹µë‹µí•¨"]
            },
            { 
                title: "ë¶€ëª¨ë‹˜ì´ ìê¾¸ ë‹¤ë¥¸ ì• ì™€ ë¹„êµí•´", 
                content: "ì—„ë§ˆê°€ ë§¨ë‚  ì‚¬ì´Œ í˜•ì´ë‚˜ ì¹œêµ¬ë“¤ê³¼ ë‚˜ë¥¼ ë¹„êµí•´. 'ëˆ„êµ¬ëŠ” ì´ë ‡ê²Œ ì˜í•˜ëŠ”ë° ë„ˆëŠ” ì™œ ëª»í•˜ë‹ˆ?'ë¼ê³  ë§ì”€í•˜ì‹œë©´ ê¸°ë¶„ì´ ë„ˆë¬´ ì•ˆ ì¢‹ì•„. ì—´ì‹¬íˆ í•˜ê³  ìˆëŠ”ë° ì¸ì •ë°›ì§€ ëª»í•˜ëŠ” ê²ƒ ê°™ì•„.",
                emotions: ["ğŸ˜  í™”ë‚¨", "ğŸ˜” ì„œëŸ¬ì›€", "ğŸ˜¤ ì–µìš¸í•¨", "ğŸ˜ ìê´´ê°", "ğŸ˜Ÿ ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜¢ ìŠ¬í””"]
            },
            { 
                title: "ì„ ìƒë‹˜ê»˜ ì–µìš¸í•˜ê²Œ í˜¼ë‚¬ì–´", 
                content: "ì˜¤ëŠ˜ ìˆ˜ì—… ì‹œê°„ì— ë‚´ê°€ í•˜ì§€ë„ ì•Šì€ ì¼ë¡œ ì„ ìƒë‹˜ê»˜ í˜¼ë‚¬ì–´. ì§„ì§œ ì–µìš¸í•˜ê³  í™”ê°€ ë‚˜ëŠ”ë°, ë³€ëª…í•˜ë©´ ë” í˜¼ë‚  ê²ƒ ê°™ì•„ì„œ ì•„ë¬´ ë§ë„ ëª»í–ˆì–´. ì–´ë–»ê²Œ í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´.",
                emotions: ["ğŸ˜  í™”ë‚¨", "ğŸ˜¤ ì–µìš¸í•¨", "ğŸ˜ ë‹µë‹µí•¨", "ğŸ˜Ÿ ë‹¹í™©ìŠ¤ëŸ¬ì›€", "ğŸ˜” ë¬´ë ¥ê°", "ğŸ˜¨ ë‘ë ¤ì›€"]
            },
            { 
                title: "ë°˜ì—ì„œ ë”°ëŒë¦¼ì„ ë‹¹í•˜ê³  ìˆì–´", 
                content: "ëª‡ëª‡ ì¹œêµ¬ë“¤ì´ ë‚˜ë¥¼ ì¼ë¶€ëŸ¬ ë¬´ì‹œí•˜ê³  ê°™ì´ ë†€ì§€ ì•Šìœ¼ë ¤ê³  í•´. ë­˜ ì˜ëª»í–ˆëŠ”ì§€ë„ ëª¨ë¥´ê² ëŠ”ë° ì ì  í˜¼ìê°€ ë˜ì–´ê°€ëŠ” ê²ƒ ê°™ì•„. í•™êµ ê°€ëŠ” ê²Œ ë¬´ì„œì›Œì¡Œì–´.",
                emotions: ["ğŸ˜¢ ìŠ¬í””", "ğŸ˜” ì™¸ë¡œì›€", "ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜Ÿ ë¶ˆì•ˆí•¨", "ğŸ˜ ìš°ìš¸í•¨", "ğŸ˜¤ ë‹µë‹µí•¨"]
            },
            { 
                title: "ì§„ë¡œë¥¼ ì •í•˜ì§€ ëª»í•˜ê² ì–´", 
                content: "ì¤‘í•™êµì— ì˜¬ë¼ê°€ë©´ì„œ ì§„ë¡œì— ëŒ€í•´ ìƒê°í•´ë³´ë¼ê³  í•˜ëŠ”ë°, ì •ë§ ë­˜ í•˜ê³  ì‹¶ì€ì§€ ëª¨ë¥´ê² ì–´. ì¹œêµ¬ë“¤ì€ ì´ë¯¸ ê¿ˆì´ ì •í•´ì§„ ê²ƒ ê°™ì€ë° ë‚˜ë§Œ ì•„ë¬´ê²ƒë„ ëª¨ë¥´ëŠ” ê²ƒ ê°™ì•„ì„œ ë‹µë‹µí•´.",
                emotions: ["ğŸ˜Ÿ ë¶ˆì•ˆí•¨", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜” ì¡°ê¸‰í•¨", "ğŸ˜ ë§‰ë§‰í•¨", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜¨ ê±±ì •"]
            },
            { 
                title: "ê²Œì„ ë•Œë¬¸ì— ë¶€ëª¨ë‹˜ê³¼ ìê¾¸ ì‹¸ì›Œ", 
                content: "ê²Œì„ì„ ë„ˆë¬´ ì˜¤ë˜ í•œë‹¤ê³  ë¶€ëª¨ë‹˜ì´ í™”ë‚´ì‹œëŠ”ë°, ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ í•˜ëŠ” ê²Œì„ì´ë¼ ì¤‘ê°„ì— ê·¸ë§Œë‘˜ ìˆ˜ê°€ ì—†ì–´. ê·¸ëŸ°ë° ê³„ì† ì‹¸ìš°ë‹ˆê¹Œ ì§‘ì— ìˆëŠ” ê²ƒë„ ë¶ˆí¸í•˜ê³  ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ë§ì´ ìŒ“ì—¬.",
                emotions: ["ğŸ˜  í™”ë‚¨", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜Ÿ ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜” ì£„ì±…ê°", "ğŸ˜ ê³ ë¯¼ë¨", "ğŸ˜¨ ê±±ì •"]
            },
            { 
                title: "ë°œí‘œí•  ë•Œë§ˆë‹¤ ë„ˆë¬´ ë–¨ë ¤", 
                content: "ìˆ˜ì—… ì‹œê°„ì— ë°œí‘œë¥¼ í•´ì•¼ í•  ë•Œë§ˆë‹¤ ì‹¬ì¥ì´ ë„ˆë¬´ ë¹¨ë¦¬ ë›°ê³  ëª©ì†Œë¦¬ê°€ ë–¨ë ¤. ë‹¤ë¥¸ ì• ë“¤ì´ ë‚˜ë¥¼ ì–´ë–»ê²Œ ìƒê°í• ì§€ ê±±ì •ë˜ê³ , ì‹¤ìˆ˜í• ê¹Œ ë´ ë¬´ì„œì›Œì„œ ë°œí‘œê°€ ìˆëŠ” ë‚ ì€ í•™êµì— ê°€ê¸° ì‹«ì–´ì ¸.",
                emotions: ["ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜Ÿ ë¶ˆì•ˆí•¨", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜ ê¸´ì¥ê°", "ğŸ˜” ê±±ì •", "ğŸ˜¤ ìŠ¤íŠ¸ë ˆìŠ¤"]
            },
            { 
                title: "ìš©ëˆì´ ë¶€ì¡±í•´ì„œ ê³ ë¯¼ì´ì•¼", 
                content: "ì¹œêµ¬ë“¤ì€ ë‹¤ ìƒˆë¡œìš´ ê±¸ ì‚¬ëŠ”ë° ë‚˜ëŠ” ìš©ëˆì´ ë¶€ì¡±í•´ì„œ ëª» ì‚¬ê² ì–´. ë¶€ëª¨ë‹˜ê»˜ ë” ë‹¬ë¼ê³  í•˜ê¸°ëŠ” ì–´ë ¤ìš´ ìƒí™©ì´ê³ , ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ í•  ìˆ˜ ì—†ëŠ” ì¼ë“¤ì´ ë§ì•„ì ¸ì„œ ì†Œì™¸ê°ì„ ëŠê»´.",
                emotions: ["ğŸ˜” ì†Œì™¸ê°", "ğŸ˜ ì„œëŸ¬ì›€", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜¢ ì†ìƒí•¨"]
            },
            { 
                title: "í˜•ì œìë§¤ì™€ ìê¾¸ ì‹¸ì›Œ", 
                content: "ë™ìƒ(í˜•)ê³¼ ë§¨ë‚  ì‚¬ì†Œí•œ ì¼ë¡œ ì‹¸ì›Œ. ë¶€ëª¨ë‹˜ì€ í•­ìƒ ë‚´ê°€ ì–‘ë³´í•˜ë¼ê³  í•˜ì‹œëŠ”ë° ê·¸ê²ƒë„ ì–µìš¸í•˜ê³ , ì§‘ì—ì„œ í¸í•˜ê²Œ ì‰´ ìˆ˜ê°€ ì—†ì–´ì„œ ì§œì¦ì´ ë§ì´ ë‚˜.",
                emotions: ["ğŸ˜  í™”ë‚¨", "ğŸ˜¤ ì–µìš¸í•¨", "ğŸ˜ ì§œì¦ë‚¨", "ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜Ÿ í”¼ê³¤í•¨", "ğŸ˜¢ ì†ìƒí•¨"]
            },
            { 
                title: "ëª¸ë¬´ê²Œ ë•Œë¬¸ì— ìŠ¤íŠ¸ë ˆìŠ¤ë°›ì•„", 
                content: "ìš”ì¦˜ ëª¸ë¬´ê²Œê°€ ëŠ˜ì–´ì„œ ê±±ì •ì´ì•¼. ë‹¤ë¥¸ ì¹œêµ¬ë“¤ê³¼ ë¹„êµí•˜ê²Œ ë˜ê³ , ì²´ìœ¡ ì‹œê°„ì´ë‚˜ ìˆ˜ì˜ì¥ ê°ˆ ë•Œ ë¶€ë„ëŸ¬ì›Œ. ë‹¤ì´ì–´íŠ¸ë¥¼ í•´ë³´ë ¤ê³  í•˜ëŠ”ë° ì‰½ì§€ ì•Šì•„ì„œ ë” ìŠ¤íŠ¸ë ˆìŠ¤ë°›ì•„.",
                emotions: ["ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜ ìê´´ê°", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜¢ ì†ìƒí•¨"]
            },
            { 
                title: "íœ´ëŒ€í°ì„ ìƒì–´ë²„ë ¸ì–´", 
                content: "ì–´ì œ íœ´ëŒ€í°ì„ ìƒì–´ë²„ë ¸ëŠ”ë°, ë¶€ëª¨ë‹˜ê»˜ ì•„ì§ ë§ì”€ë“œë¦¬ì§€ ëª»í–ˆì–´. í™”ë‚´ì‹¤ê¹Œ ë´ ë¬´ì„œìš°ë©´ì„œë„ ìƒˆë¡œ ì‚¬ë‹¬ë¼ê³  í•˜ê¸°ëŠ” ë¶€ë‹´ìŠ¤ëŸ¬ì›Œ. ì¹œêµ¬ë“¤ê³¼ ì—°ë½ë„ ëª»í•˜ê² ê³  ì–´ë–»ê²Œ í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´.",
                emotions: ["ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜ ë‹¹í™©ìŠ¤ëŸ¬ì›€", "ğŸ˜” ì£„ì±…ê°", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€"]
            },
            { 
                title: "í´ëŸ½í™œë™ì—ì„œ ì‹¤ìˆ˜í–ˆì–´", 
                content: "ì˜¤ëŠ˜ ë™ì•„ë¦¬ í™œë™ì—ì„œ í° ì‹¤ìˆ˜ë¥¼ í–ˆì–´. ë‹¤ë¥¸ ë©¤ë²„ë“¤ì—ê²Œ í”¼í•´ë¥¼ ì¤¬ëŠ”ë°, ì–´ë–»ê²Œ ì‚¬ê³¼í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´. ë‚´ ì‹¤ìˆ˜ ë•Œë¬¸ì— íŒ€ ì „ì²´ ë¶„ìœ„ê¸°ê°€ ì•ˆ ì¢‹ì•„ì§„ ê²ƒ ê°™ì•„ì„œ ë¯¸ì•ˆí•˜ê³  ë¶€ë‹´ìŠ¤ëŸ¬ì›Œ.",
                emotions: ["ğŸ˜” ì£„ì±…ê°", "ğŸ˜ ë¯¸ì•ˆí•¨", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜¤ ìì±…ê°", "ğŸ˜¨ ë‘ë ¤ì›€"]
            },
            { 
                title: "ì¢‹ì•„í•˜ëŠ” ì¹œêµ¬ê°€ ìˆëŠ”ë° ê³ ë°±í•  ìš©ê¸°ê°€ ì•ˆ ë‚˜", 
                content: "ì¢‹ì•„í•˜ëŠ” ì¹œêµ¬ê°€ ìˆëŠ”ë° ê³ ë°±í•  ìš©ê¸°ê°€ ì—†ì–´. ê±°ì ˆë‹¹í• ê¹Œ ë´ ë¬´ì„œìš°ë©´ì„œë„, ì§€ê¸ˆì²˜ëŸ¼ ì¹œêµ¬ë¡œ ì§€ë‚´ëŠ” ê²ƒë„ ì¢‹ì€ë° ê´œíˆ ì–´ìƒ‰í•´ì§ˆê¹Œ ë´ ê±±ì •ë¼. ì–´ë–»ê²Œ í•´ì•¼ í• ì§€ ì •ë§ ëª¨ë¥´ê² ì–´.",
                emotions: ["ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜Ÿ ì„¤ë ˜", "ğŸ˜ ê³ ë¯¼ë¨", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜” ê±±ì •", "ğŸ˜¤ ë‹µë‹µí•¨"]
            },
            { 
                title: "ì•Œë°”ë¥¼ ì‹œì‘í–ˆëŠ”ë° í˜ë“¤ì–´", 
                content: "ìš©ëˆì„ ë²Œê¸° ìœ„í•´ ì•Œë°”ë¥¼ ì‹œì‘í–ˆëŠ”ë° ìƒê°ë³´ë‹¤ í˜ë“¤ì–´. í•™ì—…ê³¼ ë³‘í–‰í•˜ê¸° ì–´ë µê³ , ê°€ë” ì†ë‹˜ë“¤ì´ ë¶ˆì¹œì ˆí•  ë•Œë„ ìˆì–´ì„œ ìŠ¤íŠ¸ë ˆìŠ¤ë°›ì•„. ê·¸ë§Œë‘˜ê¹Œ ìƒê°í•˜ëŠ”ë° ëˆë„ í•„ìš”í•´ì„œ ê³ ë¯¼ì´ì•¼.",
                emotions: ["ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜ í”¼ê³¤í•¨", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜  ì§œì¦ë‚¨", "ğŸ˜¨ ë¶€ë‹´ê°"]
            },
            { 
                title: "SNSì—ì„œ ì•…í”Œì„ ë°›ì•˜ì–´", 
                content: "ë‚´ê°€ ì˜¬ë¦° ì‚¬ì§„ì— ëˆ„ê°€ ì•…í”Œì„ ë‹¬ì•˜ì–´. ìµëª…ì´ë¼ì„œ ëˆ„êµ°ì§€ ëª¨ë¥´ê² ëŠ”ë° ë‚´ìš©ì´ ë„ˆë¬´ ìƒì²˜ê°€ ë¼. SNSë¥¼ í•˜ê¸° ë¬´ì„œì›Œì§€ê³ , í˜¹ì‹œ ì•„ëŠ” ì‚¬ëŒì´ ì“´ ê±´ ì•„ë‹ê¹Œ ì˜ì‹¬ë„ ë¼.",
                emotions: ["ğŸ˜¢ ìƒì²˜ë°›ìŒ", "ğŸ˜  í™”ë‚¨", "ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜Ÿ ë¶ˆì•ˆí•¨", "ğŸ˜” ìš°ìš¸í•¨", "ğŸ˜ ì†ìƒí•¨"]
            },
            { 
                title: "ë°˜ì¥ ì„ ê±°ì—ì„œ ë–¨ì–´ì¡Œì–´", 
                content: "ë°˜ì¥ ì„ ê±°ì— ë‚˜ê°”ëŠ”ë° ë–¨ì–´ì¡Œì–´. ë‚˜ë¦„ ì—´ì‹¬íˆ ì¤€ë¹„í–ˆëŠ”ë° ë‹¤ë¥¸ ì¹œêµ¬ê°€ ë‹¹ì„ ë¼ì„œ ì†ìƒí•´. ì¹œêµ¬ë“¤ì´ ë‚˜ë¥¼ ì–´ë–»ê²Œ ìƒê°í•˜ëŠ”ì§€ë„ ê¶ê¸ˆí•˜ê³ , ë‹¤ìŒì— ë˜ ë„ì „í•´ì•¼ í• ì§€ ê³ ë¯¼ë¼.",
                emotions: ["ğŸ˜ ì‹¤ë§", "ğŸ˜” ì†ìƒí•¨", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜¤ ì•„ì‰¬ì›€", "ğŸ˜¢ ì„œìš´í•¨"]
            },
            { 
                title: "ì´ì‚¬ ë•Œë¬¸ì— ì¹œêµ¬ë“¤ê³¼ í—¤ì–´ì ¸ì•¼ í•´", 
                content: "ì•„ë¹  ì§ì¥ ë•Œë¬¸ì— ë‹¤ë¥¸ ì§€ì—­ìœ¼ë¡œ ì´ì‚¬ë¥¼ ê°€ê²Œ ëì–´. ì—¬ê¸° ì¹œêµ¬ë“¤ê³¼ í—¤ì–´ì§€ëŠ” ê²Œ ë„ˆë¬´ ì‹«ê³ , ìƒˆë¡œìš´ ê³³ì—ì„œ ì˜ ì ì‘í•  ìˆ˜ ìˆì„ì§€ ê±±ì •ë¼. ì–´ë–»ê²Œ ì´ë³„ ì¸ì‚¬ë¥¼ í•´ì•¼ í• ì§€ë„ ëª¨ë¥´ê² ì–´.",
                emotions: ["ğŸ˜¢ ìŠ¬í””", "ğŸ˜” ì•„ì‰¬ì›€", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜ ìš°ìš¸í•¨", "ğŸ˜¤ ì„œìš´í•¨"]
            },
            { 
                title: "í•™ì› ë•Œë¬¸ì— ì¹œêµ¬ë“¤ê³¼ ë†€ ì‹œê°„ì´ ì—†ì–´", 
                content: "ë¶€ëª¨ë‹˜ì´ í•™ì›ì„ ë„ˆë¬´ ë§ì´ ë³´ë‚´ì…”ì„œ ì¹œêµ¬ë“¤ê³¼ ë†€ ì‹œê°„ì´ ì—†ì–´. ë§¤ì¼ í•™ì›ë§Œ ë‹¤ë‹ˆë‹ˆê¹Œ ì¬ë¯¸ë„ ì—†ê³ , ì¹œêµ¬ë“¤ê³¼ ì ì  ë©€ì–´ì§€ëŠ” ê²ƒ ê°™ì•„ì„œ ì™¸ë¡œì›Œ. ê·¸ë ‡ë‹¤ê³  ë¶€ëª¨ë‹˜ê»˜ ê·¸ë§Œë‘ê² ë‹¤ê³  ë§í•˜ê¸°ë„ ì–´ë ¤ì›Œ.",
                emotions: ["ğŸ˜” ì™¸ë¡œì›€", "ğŸ˜ í”¼ê³¤í•¨", "ğŸ˜Ÿ ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜¢ ì†ìƒí•¨", "ğŸ˜¨ ë¶€ë‹´ê°"]
            },
            { 
                title: "ê¸‰ì‹ì´ ë§›ì—†ì–´ì„œ ë¨¹ê¸° ì‹«ì–´", 
                content: "ìš”ì¦˜ ê¸‰ì‹ì´ ì •ë§ ë§›ì—†ì–´ì„œ ë¨¹ê¸°ê°€ ì‹«ì–´. ì¹œêµ¬ë“¤ë„ ë‹¤ ë§›ì—†ë‹¤ê³  í•˜ëŠ”ë° ì–´ë–»ê²Œ í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´. ê·¸ëƒ¥ êµ¶ìœ¼ë©´ ì˜¤í›„ì— ë°°ê³ í”„ê³ , ë„ì‹œë½ì„ ì‹¸ë‹¬ë¼ê³  í•˜ê¸°ë„ ë¶€ë‹´ìŠ¤ëŸ¬ì›Œ.",
                emotions: ["ğŸ˜¤ ì§œì¦ë‚¨", "ğŸ˜ ì†ìƒí•¨", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜¨ ë¶€ë‹´ìŠ¤ëŸ¬ì›€", "ğŸ˜  ë¶ˆë§Œ"]
            },
            { 
                title: "ì²´ìœ¡ì‹œê°„ì´ ë„ˆë¬´ ë¶€ë„ëŸ¬ì›Œ", 
                content: "ì²´ìœ¡ì‹œê°„ì— ìš´ë™ì„ ëª»í•´ì„œ í•­ìƒ ë¶€ë„ëŸ¬ì›Œ. ì¹œêµ¬ë“¤ì€ ë‹¤ ì˜í•˜ëŠ”ë° ë‚˜ë§Œ ëª»í•˜ëŠ” ê²ƒ ê°™ì•„ì„œ ì²´ìœ¡ì‹œê°„ì´ ë˜ë©´ í•™êµì— ê°€ê¸° ì‹«ì–´ì ¸. ì„ ìƒë‹˜ê»˜ ë§ì”€ë“œë¦¬ê³  ì‹¶ì€ë° ìš©ê¸°ê°€ ì•ˆ ë‚˜.",
                emotions: ["ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜ ìê´´ê°", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜¤ ë‹µë‹µí•¨"]
            },
            { 
                title: "êµì‹¤ì—ì„œ ëƒ„ìƒˆê°€ ë‚ ê¹Œ ë´ ê±±ì •ë¼", 
                content: "ìš”ì¦˜ ì‚¬ì¶˜ê¸°ë¼ì„œ ì²´ì·¨ê°€ ìƒê¸´ ê²ƒ ê°™ì•„. ì¹œêµ¬ë“¤ì´ ë‚˜ ë•Œë¬¸ì— ëƒ„ìƒˆê°€ ë‚œë‹¤ê³  ìƒê°í• ê¹Œ ë´ ê±±ì •ë¼. ë°ì˜¤ë“œë€íŠ¸ë¥¼ ì¨ë³´ë ¤ê³  í•˜ëŠ”ë° ë¶€ëª¨ë‹˜ê»˜ ë§í•˜ê¸°ê°€ ë¶€ë„ëŸ¬ì›Œ.",
                emotions: ["ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜ ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜” ìœ„ì¶•ê°", "ğŸ˜¤ ë¯¼ê°í•¨"]
            },
            { 
                title: "ìˆ˜í•™ì„ ë„ì €íˆ ëª¨ë¥´ê² ì–´", 
                content: "ìˆ˜í•™ ìˆ˜ì—…ì„ ì•„ë¬´ë¦¬ ë“¤ì–´ë„ ì´í•´ê°€ ì•ˆ ë¼. ì„ ìƒë‹˜ê»˜ ì§ˆë¬¸í•˜ê³  ì‹¶ì€ë° ë°”ë³´ê°™ì•„ ë³´ì¼ê¹Œ ë´ ê±±ì •ë¼. ì¹œêµ¬ë“¤í•œí…Œ ë¬¼ì–´ë³´ê¸°ë„ ë¯¼ë§í•˜ê³ , ìˆ˜í•™ ì‹œê°„ë§Œ ë˜ë©´ ìŠ¤íŠ¸ë ˆìŠ¤ë°›ì•„.",
                emotions: ["ğŸ˜ ì¢Œì ˆê°", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜¨ ë‘ë ¤ì›€"]
            },
            { 
                title: "ë°˜ ì•„ì´ë“¤ì´ ì‹œë„ëŸ¬ì›Œì„œ ì§‘ì¤‘ì´ ì•ˆ ë¼", 
                content: "ìš°ë¦¬ ë°˜ ì•„ì´ë“¤ì´ ìˆ˜ì—…ì‹œê°„ì—ë„ ë„ˆë¬´ ì‹œë„ëŸ¬ì›Œì„œ ì§‘ì¤‘ì´ ì•ˆ ë¼. ì„ ìƒë‹˜ë„ ë³„ë¡œ ì£¼ì˜ë¥¼ ì•ˆ ì£¼ì‹œê³ , ê³µë¶€í•˜ë ¤ê³  í•˜ëŠ”ë° ë°©í•´ê°€ ë¼ì„œ ì§œì¦ë‚˜. ì–´ë–»ê²Œ í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´.",
                emotions: ["ğŸ˜  ì§œì¦ë‚¨", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜ ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜” í”¼ê³¤í•¨", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¨ ë¶ˆì•ˆí•¨"]
            },
            { 
                title: "í‚¤ê°€ ì‘ì•„ì„œ ë†€ë¦¼ë°›ì•„", 
                content: "ì¹œêµ¬ë“¤ì´ ë‚´ í‚¤ê°€ ì‘ë‹¤ê³  ìê¾¸ ë†€ë ¤. ë†ë‹´ì´ë¼ê³  í•˜ëŠ”ë° ë“¤ì„ ë•Œë§ˆë‹¤ ê¸°ë¶„ì´ ì•ˆ ì¢‹ì•„. í‚¤ëŠ” ì–´ì©” ìˆ˜ ì—†ëŠ” ê±´ë° ì™œ ë†€ë¦¬ëŠ” ê±´ì§€ ëª¨ë¥´ê² ì–´. í‚¤ í¬ëŠ” ë°©ë²•ì´ ìˆì„ê¹Œ?",
                emotions: ["ğŸ˜¢ ìƒì²˜ë°›ìŒ", "ğŸ˜  í™”ë‚¨", "ğŸ˜ ìê´´ê°", "ğŸ˜” ì„œëŸ¬ì›€", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¤ ì–µìš¸í•¨"]
            },
            { 
                title: "ìƒë¦¬ ë•Œë¬¸ì— ì²´ìœ¡ì„ ë¹ ì§€ê³  ì‹¶ì–´", 
                content: "ìƒë¦¬í•  ë•Œ ì²´ìœ¡ìˆ˜ì—… ì°¸ì—¬í•˜ê¸°ê°€ ë„ˆë¬´ í˜ë“¤ì–´. ì„ ìƒë‹˜ê»˜ ë§ì”€ë“œë¦¬ê¸°ë„ ë¶€ë„ëŸ½ê³ , ì¹œêµ¬ë“¤ ì•ì—ì„œ ì´ì•¼ê¸°í•˜ê¸°ë„ ë¯¼ë§í•´. ì–´ë–»ê²Œ ìì—°ìŠ¤ëŸ½ê²Œ ë¹ ì§ˆ ìˆ˜ ìˆì„ê¹Œ?",
                emotions: ["ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜ ë¶ˆí¸í•¨", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜¤ ë‹µë‹µí•¨"]
            },
            { 
                title: "ë¶€ëª¨ë‹˜ì´ ì´í˜¼í•˜ì‹¤ ê²ƒ ê°™ì•„", 
                content: "ìš”ì¦˜ ë¶€ëª¨ë‹˜ì´ ìì£¼ ì‹¸ìš°ì…”ì„œ í˜¹ì‹œ ì´í˜¼í•˜ì‹œëŠ” ê±´ ì•„ë‹Œì§€ ê±±ì •ë¼. ì§‘ì— ìˆì„ ë•Œë§ˆë‹¤ ë¶„ìœ„ê¸°ê°€ ì•ˆ ì¢‹ê³ , ë‚˜ ë•Œë¬¸ì— ì‹¸ìš°ì‹œëŠ” ê±´ ì•„ë‹Œì§€ ê±±ì •ë¼. ì–´ë–»ê²Œ í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´.",
                emotions: ["ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¢ ìŠ¬í””", "ğŸ˜” ë¶ˆì•ˆí•¨", "ğŸ˜ ì£„ì±…ê°", "ğŸ˜¤ ìŠ¤íŠ¸ë ˆìŠ¤"]
            },
            { 
                title: "ë°˜ë ¤ë™ë¬¼ì´ ì•„íŒŒì„œ ê±±ì •ë¼", 
                content: "ìš°ë¦¬ ê°•ì•„ì§€ê°€ ìš”ì¦˜ ì•„í”ˆ ê²ƒ ê°™ì•„ì„œ ê±±ì •ì´ì•¼. ë³‘ì›ì— ê°€ì•¼ í•˜ëŠ”ë° ëˆì´ ë§ì´ ë“¤ê¹Œ ë´ ë¶€ëª¨ë‹˜ê»˜ ë§ì”€ë“œë¦¬ê¸°ê°€ ë¶€ë‹´ìŠ¤ëŸ¬ì›Œ. í˜¹ì‹œ ì‹¬ê°í•œ ë³‘ì€ ì•„ë‹ê¹Œ ê±±ì •ë¼.",
                emotions: ["ğŸ˜Ÿ ê±±ì •", "ğŸ˜¢ ìŠ¬í””", "ğŸ˜ ë¶ˆì•ˆí•¨", "ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜¤ ë‹µë‹µí•¨"]
            },
            { 
                title: "ì„ ìƒë‹˜ì´ í¸ì• í•˜ëŠ” ê²ƒ ê°™ì•„", 
                content: "ì„ ìƒë‹˜ì´ íŠ¹ì • í•™ìƒë“¤ë§Œ ì¢‹ì•„í•˜ì‹œëŠ” ê²ƒ ê°™ì•„. ë˜‘ê°™ì€ ì‹¤ìˆ˜ë¥¼ í•´ë„ ì–´ë–¤ ì• ëŠ” í˜¼ë‚´ê³  ì–´ë–¤ ì• ëŠ” ì•ˆ í˜¼ë‚´ì…”ì„œ ì–µìš¸í•´. ê³µí‰í•˜ì§€ ì•Šì€ ê²ƒ ê°™ì€ë° ì–´ë–»ê²Œ ë§ì”€ë“œë ¤ì•¼ í• ê¹Œ?",
                emotions: ["ğŸ˜¤ ì–µìš¸í•¨", "ğŸ˜  í™”ë‚¨", "ğŸ˜ ì†ìƒí•¨", "ğŸ˜” ì„œëŸ¬ì›€", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¨ ë‘ë ¤ì›€"]
            },
            { 
                title: "ì¹˜ê³¼ ì¹˜ë£Œê°€ ë¬´ì„œì›Œ", 
                content: "ì¹˜ì•„ê°€ ì•„í”ˆë° ì¹˜ê³¼ ê°€ëŠ” ê²Œ ë„ˆë¬´ ë¬´ì„œì›Œ. ë§ˆì·¨ ì£¼ì‚¬ë„ ë¬´ì„­ê³  ë“œë¦´ ì†Œë¦¬ë„ ë¬´ì„œì›Œì„œ ê³„ì† ë¯¸ë£¨ê³  ìˆì–´. ê·¸ëŸ°ë° ë” ì•„íŒŒì§€ëŠ” ê²ƒ ê°™ì•„ì„œ ì–´ë–»ê²Œ í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´.",
                emotions: ["ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜ ë¶ˆì•ˆí•¨", "ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜¢ ì•„í””"]
            },
            { 
                title: "ì–´ë¥¸ìŠ¤ëŸ½ì§€ ëª»í•œ ê²ƒ ê°™ì•„", 
                content: "ì¹œêµ¬ë“¤ì€ ë‹¤ ì–´ë¥¸ìŠ¤ëŸ¬ìš´ë° ë‚˜ë§Œ ì–´ë¦°ì•  ê°™ì€ ëŠë‚Œì´ì•¼. ë§í•˜ëŠ” ê²ƒë„ í–‰ë™í•˜ëŠ” ê²ƒë„ ìœ ì¹˜í•œ ê²ƒ ê°™ì•„ì„œ ë¶€ë„ëŸ¬ì›Œ. ì–´ë–»ê²Œ í•˜ë©´ ì¢€ ë” ì–´ë¥¸ìŠ¤ëŸ¬ì›Œì§ˆ ìˆ˜ ìˆì„ê¹Œ?",
                emotions: ["ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜ ìê´´ê°", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜” ìœ„ì¶•ê°", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜¨ ë‘ë ¤ì›€"]
            },
            { 
                title: "ì•¼ë™ì„ ë´¤ëŠ”ë° ì£„ì±…ê°ì´ ë“¤ì–´", 
                content: "ì¹œêµ¬ê°€ ë³´ì—¬ì¤€ ì•¼ë™ì„ ë´¤ëŠ”ë° ê³„ì† ì£„ì±…ê°ì´ ë“¤ì–´. ë¶€ëª¨ë‹˜ì´ ì•Œë©´ ì‹¤ë§í•˜ì‹¤ ê²ƒ ê°™ê³ , ì´ëŸ° ê±¸ ë³´ëŠ” ê²Œ ë‚˜ìœ ê±´ ì•„ë‹Œì§€ ê±±ì •ë¼. ì–´ë–»ê²Œ í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´.",
                emotions: ["ğŸ˜” ì£„ì±…ê°", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜ í˜¼ë€ìŠ¤ëŸ¬ì›€", "ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜¤ ë‹µë‹µí•¨"]
            },
            { 
                title: "ë‚¨ìì¹œêµ¬/ì—¬ìì¹œêµ¬ë¥¼ ì‚¬ê·€ê³  ì‹¶ì–´", 
                content: "ì¹œêµ¬ë“¤ì€ ë‹¤ ì—°ì• ë¥¼ í•˜ëŠ”ë° ë‚˜ë§Œ í˜¼ìì¸ ê²ƒ ê°™ì•„ì„œ ì™¸ë¡œì›Œ. ì¢‹ì•„í•˜ëŠ” ì‚¬ëŒì€ ìˆëŠ”ë° ì–´ë–»ê²Œ ë‹¤ê°€ê°€ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´. ê³ ë°±í•˜ë©´ ê±°ì ˆë‹¹í• ê¹Œ ë´ ë¬´ì„­ê¸°ë„ í•˜ê³ .",
                emotions: ["ğŸ˜” ì™¸ë¡œì›€", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜ ì„¤ë ˜", "ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜¤ ë‹µë‹µí•¨"]
            },
            { 
                title: "ë¶€ëª¨ë‹˜ê»˜ ì„±ì í‘œë¥¼ ëª» ë³´ì—¬ë“œë¦¬ê² ì–´", 
                content: "ì´ë²ˆ ì„±ì í‘œê°€ ë„ˆë¬´ ì•ˆ ì¢‹ê²Œ ë‚˜ì™€ì„œ ë¶€ëª¨ë‹˜ê»˜ ë³´ì—¬ë“œë¦¬ê¸°ê°€ ë¬´ì„œì›Œ. ì—´ì‹¬íˆ í–ˆë‹¤ê³  ë§ì”€ë“œë ¤ë„ ë¯¿ì§€ ì•Šìœ¼ì‹¤ ê²ƒ ê°™ê³ , ì‹¤ë§í•˜ì‹¤ ìƒê°í•˜ë‹ˆê¹Œ ì§‘ì— ê°€ê¸°ê°€ ì‹«ì–´.",
                emotions: ["ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜ ì£„ì±…ê°", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜¢ ì†ìƒí•¨"]
            },
            { 
                title: "ë°¤ì— ë¬´ì„œìš´ ìƒê°ì´ ê³„ì† ë“¤ì–´", 
                content: "ë°¤ì— ì ë“¤ê¸° ì „ì— ë¬´ì„œìš´ ìƒê°ë“¤ì´ ê³„ì† ë– ì˜¬ë¼. ê·€ì‹ ì´ë‚˜ ë„ë‘‘ ê°™ì€ ìƒê°ì´ ë“¤ì–´ì„œ ì ì´ ì•ˆ ì™€. ë¶€ëª¨ë‹˜ê»˜ ë§ì”€ë“œë¦¬ê¸°ë„ ë¶€ë„ëŸ½ê³ , ì–´ë–»ê²Œ í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´.",
                emotions: ["ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜Ÿ ë¶ˆì•ˆí•¨", "ğŸ˜ ê±±ì •", "ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜¤ ë‹µë‹µí•¨"]
            },
            { 
                title: "ë°˜ì—ì„œ ì™•ë”°ë¥¼ ì‹œí‚¤ëŠ” ê±¸ ë´¤ì–´", 
                content: "ìš°ë¦¬ ë°˜ì—ì„œ í•œ ì¹œêµ¬ë¥¼ ì™•ë”°ì‹œí‚¤ëŠ” ê±¸ ë´¤ëŠ”ë° ì–´ë–»ê²Œ í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´. ë„ì™€ì£¼ê³  ì‹¶ì€ë° ë‚˜ë„ ê°™ì´ ì™•ë”°ë ê¹Œ ë´ ë¬´ì„­ê³ , ê·¸ëƒ¥ ë³´ê³ ë§Œ ìˆìë‹ˆ ì–‘ì‹¬ì— ê±¸ë ¤.",
                emotions: ["ğŸ˜Ÿ ê±±ì •", "ğŸ˜ ì£„ì±…ê°", "ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜” ê°ˆë“±", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜¢ ì•ˆíƒ€ê¹Œì›€"]
            },
            { 
                title: "ìš©ëª¨ì— ìì‹ ì´ ì—†ì–´", 
                content: "ê±°ìš¸ì„ ë³¼ ë•Œë§ˆë‹¤ ë‚´ ì–¼êµ´ì´ ë§ˆìŒì— ì•ˆ ë“¤ì–´. ì¹œêµ¬ë“¤ì€ ë‹¤ ì˜ˆì˜ê³  ì˜ìƒê¸´ ê²ƒ ê°™ì€ë° ë‚˜ë§Œ ëª»ìƒê¸´ ê²ƒ ê°™ì•„ì„œ ìì‹ ê°ì´ ì—†ì–´ì ¸. ì„±í˜•ìˆ˜ìˆ  ê°™ì€ ìƒê°ë„ ë“¤ì–´.",
                emotions: ["ğŸ˜ ìê´´ê°", "ğŸ˜” ìœ„ì¶•ê°", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜¢ ì†ìƒí•¨"]
            },
            { 
                title: "ì„ ë°°ë“¤ì´ ë¬´ì„œì›Œ", 
                content: "í•™êµ ì„ ë°°ë“¤ì´ ë¬´ì„œì›Œì„œ ë³µë„ë¥¼ ì§€ë‚  ë•Œë§ˆë‹¤ ê¸´ì¥ë¼. ê´œíˆ ëˆˆ ë§ˆì£¼ì¹˜ë©´ ë­ë¼ê³  í• ê¹Œ ë´ ê±±ì •ë˜ê³ , í˜¹ì‹œ ì‹œë¹„ë¥¼ ê±¸ê¹Œ ë´ ë¬´ì„œì›Œ. ì–´ë–»ê²Œ í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´.",
                emotions: ["ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜ ê¸´ì¥ê°", "ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜¤ ìœ„ì¶•ê°", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€"]
            },
            { 
                title: "ì»´í“¨í„° ê²Œì„ì—ì„œ ê³„ì† ì ¸ì„œ ì†ìƒí•´", 
                content: "ì¹œêµ¬ë“¤ê³¼ ê²Œì„ì„ í•  ë•Œë§ˆë‹¤ ë‚´ê°€ ì œì¼ ëª»í•´ì„œ ì†ìƒí•´. ì—°ìŠµì„ í•´ë„ ì‹¤ë ¥ì´ ëŠ˜ì§€ ì•ŠëŠ” ê²ƒ ê°™ê³ , ì¹œêµ¬ë“¤í•œí…Œ ë¯¼íê°€ ë˜ëŠ” ê²ƒ ê°™ì•„ì„œ ê°™ì´ ê²Œì„í•˜ê¸°ê°€ ë¶€ë‹´ìŠ¤ëŸ¬ì›Œ.",
                emotions: ["ğŸ˜ ì¢Œì ˆê°", "ğŸ˜” ìê´´ê°", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜¢ ì†ìƒí•¨", "ğŸ˜¨ ë¶€ë‹´ê°"]
            },
            { 
                title: "í™”ì¥ì„ í•´ë³´ê³  ì‹¶ì€ë° ë¶€ëª¨ë‹˜ì´ ë°˜ëŒ€í•´", 
                content: "ì¹œêµ¬ë“¤ì€ ë‹¤ í™”ì¥ì„ í•˜ëŠ”ë° ë‚˜ë§Œ ëª»í•˜ê²Œ í•´ì„œ ì†ìƒí•´. ë¶€ëª¨ë‹˜ì´ ì–´ë¦¬ë‹¤ê³  ì•ˆ ëœë‹¤ê³  í•˜ì‹œëŠ”ë°, ì¹œêµ¬ë“¤ê³¼ ë‹¤ë¥¸ ê²ƒ ê°™ì•„ì„œ ì†Œì™¸ê°ì´ ë“¤ì–´. ì–´ë–»ê²Œ ì„¤ë“í•´ì•¼ í• ê¹Œ?",
                emotions: ["ğŸ˜ ì†ìƒí•¨", "ğŸ˜” ì†Œì™¸ê°", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜¨ ë¶€ë‹´ê°", "ğŸ˜¢ ì„œìš´í•¨"]
            },
            { 
                title: "í•™êµì—ì„œ ëˆì„ ìƒì–´ë²„ë ¸ì–´", 
                content: "ì˜¤ëŠ˜ ì ì‹¬ê°’ìœ¼ë¡œ ê°€ì ¸ì˜¨ ëˆì„ ìƒì–´ë²„ë ¸ì–´. ì–´ë””ì„œ ë–¨ì–´ëœ¨ë ¸ëŠ”ì§€ ëª¨ë¥´ê² ê³ , í˜¹ì‹œ ëˆ„ê°€ ê°€ì ¸ê°„ ê±´ ì•„ë‹Œì§€ ì˜ì‹¬ìŠ¤ëŸ¬ì›Œ. ë¶€ëª¨ë‹˜ê»˜ ë§ì”€ë“œë¦¬ê¸°ë„ ë¶€ë„ëŸ½ê³  ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ?",
                emotions: ["ğŸ˜Ÿ ê±±ì •", "ğŸ˜ ë‹¹í™©ìŠ¤ëŸ¬ì›€", "ğŸ˜” ì†ìƒí•¨", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜¨ ë‘ë ¤ì›€"]
            },
            { 
                title: "ë°˜ ì¹œêµ¬ê°€ ë‚´ ë¬¼ê±´ì„ ìê¾¸ ë¹Œë ¤ê°€", 
                content: "í•œ ì¹œêµ¬ê°€ ë‚´ ë¬¼ê±´ì„ ìê¾¸ ë¹Œë ¤ê°€ëŠ”ë° ëŒë ¤ë‹¬ë¼ê³  ë§í•˜ê¸°ê°€ ì–´ë ¤ì›Œ. ê±°ì ˆí•˜ë©´ ì¸ìƒ‰í•˜ë‹¤ê³  ìƒê°í• ê¹Œ ë´ ê±±ì •ë˜ê³ , ê·¸ë ‡ë‹¤ê³  ê³„ì† ë¹Œë ¤ì£¼ê¸°ë„ ë¶€ë‹´ìŠ¤ëŸ¬ì›Œ.",
                emotions: ["ğŸ˜Ÿ ê±±ì •", "ğŸ˜ ë¶€ë‹´ìŠ¤ëŸ¬ì›€", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜³ ë‚œì²˜í•¨"]
            },
            { 
                title: "ìˆ™ì œë¥¼ ê¹œë¹¡í•´ì„œ ê±°ì§“ë§í–ˆì–´", 
                content: "ìˆ™ì œë¥¼ ê¹œë¹¡í•˜ê³  ì•ˆ í•´ì™€ì„œ ê±°ì§“ë§ë¡œ ì•„í”„ë‹¤ê³  í–ˆì–´. ì„ ìƒë‹˜ê»˜ ê±°ì§“ë§í•œ ê²Œ ê³„ì† ë§ˆìŒì— ê±¸ë¦¬ê³ , ë“¤í‚¬ê¹Œ ë´ ê±±ì •ë¼. ì–´ë–»ê²Œ í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´.",
                emotions: ["ğŸ˜” ì£„ì±…ê°", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜ í›„íšŒ", "ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€"]
            },
            { 
                title: "ì¹œêµ¬ë“¤ì´ ë‚´ ë’¤ì—ì„œ ë‚˜ì˜ê²Œ ë§í•˜ëŠ” ê²ƒ ê°™ì•„", 
                content: "ì¹œêµ¬ë“¤ì´ ë‚´ê°€ ì—†ì„ ë•Œ ë‚˜ì— ëŒ€í•´ ì•ˆ ì¢‹ê²Œ ì´ì•¼ê¸°í•˜ëŠ” ê²ƒ ê°™ì•„. í™•ì‹¤í•˜ì§€ëŠ” ì•Šì§€ë§Œ ê·¸ëŸ° ëŠë‚Œì´ ë“¤ì–´ì„œ ì¹œêµ¬ë“¤ê³¼ ìˆì„ ë•Œ ë¶ˆí¸í•´. ì–´ë–»ê²Œ í™•ì¸í•´ì•¼ í• ê¹Œ?",
                emotions: ["ğŸ˜Ÿ ê±±ì •", "ğŸ˜ ë¶ˆì•ˆí•¨", "ğŸ˜” ì˜ì‹¬", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜¢ ì†ìƒí•¨", "ğŸ˜¨ ë‘ë ¤ì›€"]
            },
            { 
                title: "ì„±êµìœ¡ ì‹œê°„ì´ ë„ˆë¬´ ë¶€ë„ëŸ¬ì›Œ", 
                content: "í•™êµì—ì„œ ì„±êµìœ¡ì„ í•˜ëŠ”ë° ë„ˆë¬´ ë¶€ë„ëŸ¬ì›Œì„œ ë“£ê¸°ê°€ í˜ë“¤ì–´. ì¤‘ìš”í•œ ë‚´ìš©ì¸ ê±´ ì•Œê² ëŠ”ë° ì¹œêµ¬ë“¤ ì•ì—ì„œ ê·¸ëŸ° ì´ì•¼ê¸°ë¥¼ í•˜ë‹ˆê¹Œ ì–¼êµ´ì´ ë¹¨ê°œì ¸. ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ?",
                emotions: ["ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜ ë¯¼ë§í•¨", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜” ë¶ˆí¸í•¨", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜¨ ê¸´ì¥ê°"]
            },
            { 
                title: "ë¶€ëª¨ë‹˜ì´ ë‚´ ì¼ê¸°ë¥¼ ì½ìœ¼ì‹  ê²ƒ ê°™ì•„", 
                content: "ë¶€ëª¨ë‹˜ì´ ë‚´ ì¼ê¸°ë¥¼ ëª°ë˜ ì½ìœ¼ì‹  ê²ƒ ê°™ì•„. í™•ì‹¤í•˜ì§€ëŠ” ì•Šì§€ë§Œ ê·¸ëŸ° ëŠë‚Œì´ ë“¤ì–´ì„œ ë” ì´ìƒ ì¼ê¸°ë¥¼ ì“°ê¸°ê°€ ë¶ˆí¸í•´. í”„ë¼ì´ë²„ì‹œë¥¼ ì¹¨í•´ë°›ëŠ” ëŠë‚Œì´ë¼ ì†ìƒí•´.",
                emotions: ["ğŸ˜  í™”ë‚¨", "ğŸ˜ ì†ìƒí•¨", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¤ ì–µìš¸í•¨", "ğŸ˜” ë¶ˆí¸í•¨", "ğŸ˜¨ ë¶ˆì•ˆí•¨"]
            },
            { 
                title: "í•™êµ ê¸‰ì‹ ë‹¹ë²ˆì´ ë„ˆë¬´ í˜ë“¤ì–´", 
                content: "ê¸‰ì‹ ë‹¹ë²ˆ í•˜ëŠ” ê²Œ ë„ˆë¬´ í˜ë“¤ì–´. ë¬´ê±°ìš´ ê²ƒë„ ë“¤ì–´ì•¼ í•˜ê³  ë’·ì •ë¦¬ë„ í•´ì•¼ í•˜ëŠ”ë°, ë‹¤ë¥¸ ì• ë“¤ì€ ì œëŒ€ë¡œ ì•ˆ ë„ì™€ì¤˜ì„œ í˜¼ì í•˜ëŠ” ê²ƒ ê°™ì•„. ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ?",
                emotions: ["ğŸ˜ í”¼ê³¤í•¨", "ğŸ˜¤ ì§œì¦ë‚¨", "ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜  ì–µìš¸í•¨", "ğŸ˜¨ ë¶€ë‹´ê°"]
            },
            { 
                title: "ë°˜ ì¹œêµ¬ê°€ ë‚´ ì•½ì ì„ ì•Œê³  ë†€ë ¤", 
                content: "í•œ ì¹œêµ¬ê°€ ë‚´ ì•½ì ì„ ì•Œê³  ê³„ì† ë†€ë ¤. ë‹¤ë¥¸ ì¹œêµ¬ë“¤ ì•ì—ì„œ ê·¸ëŸ° ì´ì•¼ê¸°ë¥¼ í•˜ë©´ ë„ˆë¬´ ë¶€ë„ëŸ½ê³  í™”ê°€ ë‚˜. ê·¸ë§Œí•˜ë¼ê³  ë§í•´ë„ ì¥ë‚œì´ë¼ê³  í•˜ë©´ì„œ ê³„ì†í•´.",
                emotions: ["ğŸ˜  í™”ë‚¨", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜ ì†ìƒí•¨", "ğŸ˜¤ ì–µìš¸í•¨", "ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜¨ ë‘ë ¤ì›€"]
            }
        ];

        const encouragementMessages = [
            "ë„ˆì˜ ë§ˆìŒì„ ì´í•´í•´ì£¼ëŠ” ì‚¬ëŒì´ ì—¬ê¸° ìˆì–´ âœ¨",
            "í˜ë“  ì‹œê°„ë„ ì§€ë‚˜ê°ˆ ê±°ì•¼, ì¡°ê¸ˆë§Œ ë” í˜ë‚´ì ğŸ’ª",
            "ë„ˆëŠ” ìƒê°ë³´ë‹¤ í›¨ì”¬ ê°•í•œ ì‚¬ëŒì´ì•¼ ğŸŒŸ",
            "ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ì•„, ê·¸ê²ƒì´ ë°”ë¡œ ë„ˆë‹ˆê¹Œ ğŸ¤—",
            "ì˜¤ëŠ˜ í•˜ë£¨ë„ ìµœì„ ì„ ë‹¤í•œ ë„ˆì—ê²Œ ë°•ìˆ˜ë¥¼ ë³´ë‚´ ğŸ‘",
            "ì–´ë ¤ìš´ ì¼ì´ ìˆì–´ë„ ë„ˆë¼ë©´ ì˜ í—¤ì³ë‚˜ê°ˆ ìˆ˜ ìˆì–´ ğŸš€",
            "ë„¤ê°€ íŠ¹ë³„í•œ ì´ìœ ëŠ” ë„ˆë§Œì˜ ê³ ìœ í•¨ì´ ìˆê¸° ë•Œë¬¸ì´ì•¼ ğŸˆ",
            "ì‹¤ìˆ˜í•´ë„ ê´œì°®ì•„, ê·¸ê²ƒë„ ì„±ì¥ì˜ ê³¼ì •ì´ë‹ˆê¹Œ ğŸ“ˆ"
        ];

        // ===== ìƒíƒœ ê´€ë¦¬ =====
        let currentStep = 1;
        let currentCase = null;
        let isConsultant = true; // true: ì»¨ì„¤í„´íŠ¸ ì—­í• , false: ë‚´ë‹´ì ì—­í• 
        let visitedSteps = [1]; // ë°©ë¬¸í•œ ë‹¨ê³„ë“¤ ì¶”ì 
        let selectedEmotions = []; // ì„ íƒëœ ê°ì •ë“¤
        let consultationData = {};
        let displayedCasesIndices = []; // í˜„ì¬ í™”ë©´ì— í‘œì‹œëœ ì‚¬ë¡€ë“¤ì˜ ì¸ë±ìŠ¤
        let selectedCaseIndex = null; // ì„ íƒëœ ì‚¬ë¡€ì˜ ì¸ë±ìŠ¤
        let autoSaveTimer = null; // ìë™ì €ì¥ íƒ€ì´ë¨¸

        // ===== ìë™ ì €ì¥ ê¸°ëŠ¥ =====
        function saveToLocalStorage() {
            try {
                const saveData = {
                    currentStep,
                    currentCase,
                    isConsultant,
                    visitedSteps,
                    selectedEmotions,
                    selectedCaseIndex,
                    displayedCasesIndices,
                    formData: {
                        consultantName: document.getElementById('consultant-name')?.value || '',
                        consultantClass: document.getElementById('consultant-class')?.value || '',
                        clientName: document.getElementById('client-name')?.value || '',
                        clientClass: document.getElementById('client-class')?.value || '',
                        customTitle: document.getElementById('custom-title')?.value || '',
                        customContent: document.getElementById('custom-content')?.value || '',
                        empathyText: document.getElementById('empathy-text')?.value || '',
                        abcAnalysis: document.getElementById('abc-analysis')?.value || '',
                        newThinking: document.getElementById('new-thinking')?.value || '',
                        helpSuggestions: document.getElementById('help-suggestions')?.value || '',
                        personalEncouragement: document.getElementById('personal-encouragement')?.value || ''
                    },
                    timestamp: new Date().toISOString(),
                    version: '1.0'
                };
                
                localStorage.setItem('abc_consulting_data', JSON.stringify(saveData));
                console.log('ë°ì´í„° ìë™ ì €ì¥ë¨:', new Date().toLocaleTimeString());
                
                // ì €ì¥ ìƒíƒœ í‘œì‹œ (ì„ íƒì )
                showSaveStatus('ğŸ’¾ ìë™ ì €ì¥ë¨');
            } catch (error) {
                console.error('ì €ì¥ ì‹¤íŒ¨:', error);
            }
        }

        function loadFromLocalStorage() {
            try {
                const savedData = localStorage.getItem('abc_consulting_data');
                if (!savedData) return false;

                const data = JSON.parse(savedData);
                console.log('ì €ì¥ëœ ë°ì´í„° ë°œê²¬:', data);

                // ì €ì¥ëœ ì‹œê°„ì´ 24ì‹œê°„ ì´ë‚´ì¸ì§€ í™•ì¸
                const savedTime = new Date(data.timestamp);
                const now = new Date();
                const hoursDiff = (now - savedTime) / (1000 * 60 * 60);
                
                if (hoursDiff > 24) {
                    console.log('ì €ì¥ëœ ë°ì´í„°ê°€ 24ì‹œê°„ ì´ìƒ ê²½ê³¼í•˜ì—¬ ì‚­ì œ');
                    localStorage.removeItem('abc_consulting_data');
                    return false;
                }

                // ì‚¬ìš©ìì—ê²Œ ë³µêµ¬ ì—¬ë¶€ í™•ì¸
                const restoreConfirm = confirm(
                    `ğŸ’¾ ì´ì „ì— ì‘ì—…í•˜ë˜ ë‚´ìš©ì´ ë°œê²¬ë˜ì—ˆì–´ìš”!\n\n` +
                    `ì €ì¥ ì‹œê°„: ${savedTime.toLocaleString('ko-KR')}\n` +
                    `ë³µêµ¬í•˜ì‹œê² ì–´ìš”?\n\n` +
                    `â€¢ í™•ì¸: ì´ì „ ì‘ì—… ì´ì–´ì„œ í•˜ê¸°\n` +
                    `â€¢ ì·¨ì†Œ: ìƒˆë¡œ ì‹œì‘í•˜ê¸°`
                );

                if (!restoreConfirm) {
                    localStorage.removeItem('abc_consulting_data');
                    return false;
                }

                // ë°ì´í„° ë³µêµ¬
                currentStep = data.currentStep || 1;
                currentCase = data.currentCase;
                isConsultant = data.isConsultant !== undefined ? data.isConsultant : true;
                visitedSteps = data.visitedSteps || [1];
                selectedEmotions = data.selectedEmotions || [];
                selectedCaseIndex = data.selectedCaseIndex;
                displayedCasesIndices = data.displayedCasesIndices || [];

                // í¼ ë°ì´í„° ë³µêµ¬
                if (data.formData) {
                    setTimeout(() => {
                        const elements = {
                            'consultant-name': data.formData.consultantName,
                            'consultant-class': data.formData.consultantClass,
                            'client-name': data.formData.clientName,
                            'client-class': data.formData.clientClass,
                            'custom-title': data.formData.customTitle,
                            'custom-content': data.formData.customContent,
                            'empathy-text': data.formData.empathyText,
                            'abc-analysis': data.formData.abcAnalysis,
                            'new-thinking': data.formData.newThinking,
                            'help-suggestions': data.formData.helpSuggestions,
                            'personal-encouragement': data.formData.personalEncouragement
                        };

                        Object.entries(elements).forEach(([id, value]) => {
                            const element = document.getElementById(id);
                            if (element && value) {
                                element.value = value;
                            }
                        });
                    }, 100);
                }

                showSaveStatus('âœ… ì´ì „ ì‘ì—… ë³µêµ¬ë¨!', 3000);
                return true;
            } catch (error) {
                console.error('ë°ì´í„° ë³µêµ¬ ì‹¤íŒ¨:', error);
                localStorage.removeItem('abc_consulting_data');
                return false;
            }
        }

        function showSaveStatus(message, duration = 2000) {
            // ê¸°ì¡´ ìƒíƒœ ë©”ì‹œì§€ ì œê±°
            const existingStatus = document.getElementById('save-status');
            if (existingStatus) {
                existingStatus.remove();
            }

            // ìƒˆ ìƒíƒœ ë©”ì‹œì§€ ìƒì„±
            const statusDiv = document.createElement('div');
            statusDiv.id = 'save-status';
            statusDiv.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 text-sm font-medium';
            statusDiv.textContent = message;
            document.body.appendChild(statusDiv);

            // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
            statusDiv.style.opacity = '0';
            statusDiv.style.transform = 'translateY(-20px)';
            setTimeout(() => {
                statusDiv.style.transition = 'all 0.3s ease';
                statusDiv.style.opacity = '1';
                statusDiv.style.transform = 'translateY(0)';
            }, 10);

            // ìë™ ì œê±°
            setTimeout(() => {
                statusDiv.style.opacity = '0';
                statusDiv.style.transform = 'translateY(-20px)';
                setTimeout(() => {
                    if (statusDiv.parentNode) {
                        statusDiv.parentNode.removeChild(statusDiv);
                    }
                }, 300);
            }, duration);
        }

        function startAutoSave() {
            // ê¸°ì¡´ íƒ€ì´ë¨¸ ì •ë¦¬
            if (autoSaveTimer) {
                clearInterval(autoSaveTimer);
            }

            // 5ì´ˆë§ˆë‹¤ ìë™ ì €ì¥
            autoSaveTimer = setInterval(() => {
                saveToLocalStorage();
            }, 5000);
        }

        function stopAutoSave() {
            if (autoSaveTimer) {
                clearInterval(autoSaveTimer);
                autoSaveTimer = null;
            }
        }

        function clearSavedData() {
            localStorage.removeItem('abc_consulting_data');
            console.log('ì €ì¥ëœ ë°ì´í„° ì‚­ì œë¨');
        }

        // í˜ì´ì§€ ë– ë‚˜ê¸° ì „ ê²½ê³ 
        function setupBeforeUnloadWarning() {
            window.addEventListener('beforeunload', (e) => {
                // ì‘ì—… ì¤‘ì¸ ë‚´ìš©ì´ ìˆìœ¼ë©´ ê²½ê³ 
                const hasWork = 
                    document.getElementById('empathy-text')?.value?.trim() ||
                    document.getElementById('abc-analysis')?.value?.trim() ||
                    document.getElementById('new-thinking')?.value?.trim() ||
                    document.getElementById('help-suggestions')?.value?.trim() ||
                    document.getElementById('personal-encouragement')?.value?.trim();
                
                if (hasWork) {
                    e.preventDefault();
                    e.returnValue = 'ì‘ì—… ì¤‘ì¸ ë‚´ìš©ì´ ìˆìŠµë‹ˆë‹¤. ì •ë§ í˜ì´ì§€ë¥¼ ë– ë‚˜ì‹œê² ì–´ìš”?';
                    return e.returnValue;
                }
            });
        }

        // ===== DOM ìš”ì†Œ =====
        const screens = {
            start: document.getElementById('start-screen'),
            roleplay: document.getElementById('roleplay-screen'),
            result: document.getElementById('result-screen')
        };

        const elements = {
            // ì‹œì‘ í™”ë©´
            randomMode: document.getElementById('random-mode'),
            customMode: document.getElementById('custom-mode'),
            randomCaseArea: document.getElementById('random-case-area'),
            customCaseArea: document.getElementById('custom-case-area'),
            shuffleCasesBtn: document.getElementById('shuffle-cases-btn'),
            caseDisplay: document.getElementById('selected-case-display'),
            customTitle: document.getElementById('custom-title'),
            customContent: document.getElementById('custom-content'),
            startRoleplayBtn: document.getElementById('start-roleplay-btn'),
            
            // ì—­í• ê·¹ í™”ë©´
            currentStep: document.getElementById('current-step'),
            stepDesc: document.getElementById('step-desc'),
            roleDisplay: document.getElementById('role-display'),
            currentConsultant: document.getElementById('current-consultant'),
            stepGuide: document.getElementById('step-guide'),
            nextStepBtn: document.getElementById('next-step-btn'),
            prevStepBtn: document.getElementById('prev-step-btn'),
            switchRolesBtn: document.getElementById('switch-roles-btn'),
            
            // ì‚¬ë¡€ í‘œì‹œ
            displayedTitle: document.getElementById('displayed-title'),
            displayedContent: document.getElementById('displayed-content'),
            
            // ê° ë‹¨ê³„ ìš”ì†Œë“¤
            step1: document.getElementById('step1-empathy'),
            step2: document.getElementById('step2-abc'),
            step3: document.getElementById('step3-reframe'),
            step4: document.getElementById('step4-encourage'),
            
            // ê²°ê³¼ í™”ë©´
            consultationSummary: document.getElementById('consultation-summary'),
            downloadImageBtn: document.getElementById('download-image-btn'),
            printConsultationBtn: document.getElementById('print-consultation-btn'),
            saveConsultationBtn: document.getElementById('save-consultation-btn'),
            fullscreenBtn: document.getElementById('fullscreen-btn'),
            switchAndRestartBtn: document.getElementById('switch-and-restart-btn'),
            newCaseBtn: document.getElementById('new-case-btn'),
            restartBtn: document.getElementById('restart-btn')
        };

        // ===== ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ =====
        function showScreen(screenName) {
            console.log('í™”ë©´ ì „í™˜:', screenName);
            
            // ëª¨ë“  í™”ë©´ ìˆ¨ê¸°ê¸°
            Object.values(screens).forEach(screen => {
                if (screen) {
                    screen.classList.add('hidden');
                    screen.classList.remove('slide-in');
                }
            });
            
            // ëŒ€ìƒ í™”ë©´ ë³´ì´ê¸°
            const targetScreen = screens[screenName];
            if (targetScreen) {
                targetScreen.classList.remove('hidden');
                targetScreen.classList.add('slide-in');
                console.log('í™”ë©´ ì „í™˜ ì™„ë£Œ:', screenName);
            } else {
                console.error('í™”ë©´ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ:', screenName);
            }
        }

        // ===== ì‚¬ë¡€ ê´€ë¦¬ =====
        function generateRandomCases(count = 6) {
            // ì¤‘ë³µ ì—†ì´ ëœë¤í•œ ì‚¬ë¡€ë“¤ ì„ íƒ
            const indices = [];
            while (indices.length < count && indices.length < sampleCases.length) {
                const randomIndex = Math.floor(Math.random() * sampleCases.length);
                if (!indices.includes(randomIndex)) {
                    indices.push(randomIndex);
                }
            }
            displayedCasesIndices = indices;
            renderCaseCards();
        }

        function renderCaseCards() {
            const container = document.getElementById('case-cards-container');
            if (!container) return;

            container.innerHTML = '';

            displayedCasesIndices.forEach((caseIndex, displayIndex) => {
                const caseData = sampleCases[caseIndex];
                const isSelected = selectedCaseIndex === caseIndex;

                const card = document.createElement('div');
                card.className = `case-card bg-white p-4 rounded-lg shadow-md hover:shadow-lg ${isSelected ? 'selected' : ''}`;
                card.innerHTML = `
                    <div class="text-sm font-semibold text-gray-800 mb-2 line-clamp-2">
                        ${caseData.title}
                    </div>
                    <div class="text-xs text-gray-600 line-clamp-3 leading-relaxed">
                        ${caseData.content.length > 60 ? caseData.content.substring(0, 60) + '...' : caseData.content}
                    </div>
                    <div class="mt-2 text-xs">
                        <span class="text-gray-500">ğŸ˜” ğŸ’­ ğŸ¤”</span>
                    </div>
                `;

                card.addEventListener('click', () => selectCase(caseIndex));
                container.appendChild(card);
            });
        }

        function selectCase(caseIndex) {
            selectedCaseIndex = caseIndex;
            currentCase = sampleCases[caseIndex];
            
            // ì¹´ë“œ ì„ íƒ ìƒíƒœ ì—…ë°ì´íŠ¸
            renderCaseCards();
            
            // ì„ íƒëœ ì‚¬ë¡€ í‘œì‹œ
            updateSelectedCaseDisplay();
            
            // ìë™ ì €ì¥
            saveToLocalStorage();
        }

        function updateSelectedCaseDisplay() {
            const display = document.getElementById('selected-case-display');
            const content = document.getElementById('selected-case-content');
            
            if (!display || !content) return;
            
            if (currentCase) {
                display.classList.remove('hidden');
                content.innerHTML = `
                    <div class="font-semibold text-lg mb-2">${currentCase.title}</div>
                    <div class="text-sm leading-relaxed">${currentCase.content}</div>
                `;
            } else {
                display.classList.add('hidden');
            }
        }

        function shuffleCases() {
            selectedCaseIndex = null;
            currentCase = null;
            generateRandomCases(6);
            updateSelectedCaseDisplay();
        }

        function drawRandomCase() {
            // ë ˆê±°ì‹œ í•¨ìˆ˜ - í˜¸í™˜ì„±ì„ ìœ„í•´ ìœ ì§€
            const randomIndex = Math.floor(Math.random() * sampleCases.length);
            selectCase(randomIndex);
        }

        function useCustomCase() {
            const title = elements.customTitle.value.trim();
            const content = elements.customContent.value.trim();
            
            if (title && content) {
                // ì»¤ìŠ¤í…€ ì‚¬ë¡€ëŠ” ê¸°ë³¸ ê°ì •ë“¤ë¡œ ì„¤ì •
                currentCase = { 
                    title, 
                    content,
                    emotions: ["ğŸ˜¢ ìŠ¬í””", "ğŸ˜  í™”ë‚¨", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜” ì™¸ë¡œì›€", "ğŸ˜¨ ë‘ë ¤ì›€"]
                };
            } else {
                currentCase = null; // ë¶ˆì™„ì „í•œ ì…ë ¥ì‹œ nullë¡œ ì„¤ì •
            }
        }

        // ===== ê°ì • ê´€ë¦¬ =====
        function updateRecommendedEmotions() {
            const container = document.getElementById('recommended-emotions');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (!currentCase || !currentCase.emotions) {
                // ê¸°ë³¸ ê°ì •ë“¤ í‘œì‹œ
                const defaultEmotions = ["ğŸ˜¢ ìŠ¬í””", "ğŸ˜  í™”ë‚¨", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¤ ë‹µë‹µí•¨", "ğŸ˜” ì™¸ë¡œì›€", "ğŸ˜¨ ë‘ë ¤ì›€"];
                defaultEmotions.forEach(emotion => {
                    const button = document.createElement('button');
                    button.className = 'emotion-btn p-2 border-2 border-gray-300 rounded-lg hover:border-green-500 text-xs transition-all';
                    button.textContent = emotion;
                    button.onclick = () => toggleEmotion(emotion, button);
                    container.appendChild(button);
                });
                return;
            }
            
            currentCase.emotions.forEach(emotion => {
                const button = document.createElement('button');
                button.className = 'emotion-btn p-2 border-2 border-gray-300 rounded-lg hover:border-green-500 text-xs transition-all';
                button.textContent = emotion;
                button.onclick = () => toggleEmotion(emotion, button);
                container.appendChild(button);
            });
        }

        function toggleEmotion(emotion, button) {
            if (selectedEmotions.includes(emotion)) {
                // ê°ì • ì œê±°
                selectedEmotions = selectedEmotions.filter(e => e !== emotion);
                button.classList.remove('selected');
            } else {
                // ê°ì • ì¶”ê°€
                selectedEmotions.push(emotion);
                button.classList.add('selected');
            }
            updateSelectedEmotionsDisplay();
            saveToLocalStorage(); // ìë™ ì €ì¥
        }

        function addDirectEmotion() {
            const input = document.getElementById('direct-emotion-input');
            const emotion = input.value.trim();
            
            if (!emotion) {
                alert('ê°ì •ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            if (selectedEmotions.includes(emotion)) {
                alert('ì´ë¯¸ ì„ íƒëœ ê°ì •ì…ë‹ˆë‹¤!');
                input.value = '';
                return;
            }
            
            selectedEmotions.push(emotion);
            input.value = '';
            updateSelectedEmotionsDisplay();
            saveToLocalStorage(); // ìë™ ì €ì¥
        }

        function removeEmotion(emotion) {
            selectedEmotions = selectedEmotions.filter(e => e !== emotion);
            updateSelectedEmotionsDisplay();
            
            // ì¶”ì²œ ê°ì • ë²„íŠ¼ë„ ì—…ë°ì´íŠ¸
            const buttons = document.querySelectorAll('.emotion-btn');
            buttons.forEach(btn => {
                if (btn.textContent === emotion) {
                    btn.classList.remove('selected');
                }
            });
            
            saveToLocalStorage(); // ìë™ ì €ì¥
        }

        function updateSelectedEmotionsDisplay() {
            const container = document.getElementById('selected-emotions-list');
            
            if (selectedEmotions.length === 0) {
                container.innerHTML = '<span class="text-xs text-gray-500">ê°ì •ì„ ì„ íƒí•˜ê±°ë‚˜ ì…ë ¥í•´ì£¼ì„¸ìš”</span>';
                return;
            }
            
            container.innerHTML = selectedEmotions.map(emotion => `
                <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1">
                    ${emotion}
                    <button onclick="removeEmotion('${emotion}')" class="text-green-600 hover:text-green-800 ml-1">
                        âœ•
                    </button>
                </span>
            `).join('');
        }

        // ===== 3ë‹¨ê³„ ë„ìš°ë¯¸ =====
        function generateReframeGuide(reframeType) {
            if (!currentCase) return '';
            
            const caseTitle = currentCase.title;
            
            const guides = {
                'old': {
                    title: 'ğŸ¤” ê¸°ì¡´ ìƒê° ë‹¤ì‹œ ì‚´í´ë³´ê¸°',
                    questions: [
                        '2ë‹¨ê³„ì—ì„œ ì“´ ìƒê° ì¤‘ ì–´ë–¤ ê²ƒì´ ë¬¸ì œê°€ ë ê¹Œìš”?',
                        'ë„ˆë¬´ ê·¹ë‹¨ì ì´ê±°ë‚˜ "í•­ìƒ", "ì ˆëŒ€" ê°™ì€ ë§ì´ ë“¤ì–´ìˆë‚˜ìš”?',
                        'ì´ ìƒê°ì´ ë„ì›€ì´ ë˜ê³  ìˆë‚˜ìš”, ë°©í•´ê°€ ë˜ê³  ìˆë‚˜ìš”?',
                        'ë§Œì•½ ì¹œêµ¬ê°€ ì´ëŸ° ìƒê°ì„ í•œë‹¤ë©´ ë­ë¼ê³  ë§í•´ì¤„ê¹Œìš”?'
                    ],
                    example: generateReframeExample(caseTitle, 'old'),
                    tips: [
                        'ğŸ’¡ í‘ë°±ë…¼ë¦¬: "í•­ìƒ ì‹¤íŒ¨í•´", "ì™„ì „íˆ ë§í–ˆì–´"',
                        'ğŸ’¡ íŒŒêµ­í™”: "ëë‚¬ë‹¤", "ë” ì´ìƒ í¬ë§ì´ ì—†ì–´"',
                        'ğŸ’¡ ê°ì •ì¶”ë¡ : "ê¸°ë¶„ì´ ë‚˜ì˜ë‹ˆê¹Œ ì •ë§ ë‚˜ìœ ì¼ì´ì•¼"'
                    ]
                },
                'new': {
                    title: 'ğŸ’œ ìƒˆë¡­ê³  ë„ì›€ì´ ë˜ëŠ” ìƒê° ë§Œë“¤ê¸°',
                    questions: [
                        'ì´ ìƒí™©ì—ì„œ ë” í˜„ì‹¤ì ì¸ ìƒê°ì€ ë­˜ê¹Œìš”?',
                        'ë¶€ë¶„ì ìœ¼ë¡œë‚˜ ë•Œë¡œëŠ” ë‹¤ë¥¸ ê°€ëŠ¥ì„±ì€ ì—†ì„ê¹Œìš”?',
                        'ì´ ê²½í—˜ì—ì„œ ë°°ìš¸ ìˆ˜ ìˆëŠ” ê²ƒì€ ë¬´ì—‡ì¼ê¹Œìš”?',
                        '1ë…„ í›„ì˜ ë‚˜ë¼ë©´ ì§€ê¸ˆ ë‚˜ì—ê²Œ ë­ë¼ê³  ë§í•´ì¤„ê¹Œìš”?'
                    ],
                    example: generateReframeExample(caseTitle, 'new'),
                    tips: [
                        'ğŸ’¡ ê· í˜•ì¡ê¸°: "ì´ë²ˆì—ëŠ” ì•ˆ ëì§€ë§Œ ë‹¤ìŒì—ëŠ”..."',
                        'ğŸ’¡ ë¶€ë¶„ ì¸ì •: "ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ì•„"',
                        'ğŸ’¡ ì„±ì¥ ê´€ì : "ì´ê²ƒë„ ë°°ì›€ì˜ ê¸°íšŒì•¼"'
                    ]
                },
                'action': {
                    title: 'ğŸ¯ ì‹¤í–‰ ê°€ëŠ¥í•œ êµ¬ì²´ì  í–‰ë™',
                    questions: [
                        'ì§€ê¸ˆ ë‹¹ì¥ í•  ìˆ˜ ìˆëŠ” ì‘ì€ í–‰ë™ì€ ë­˜ê¹Œìš”?',
                        'ëˆ„êµ¬ì—ê²Œ ë„ì›€ì„ ìš”ì²­í•  ìˆ˜ ìˆì„ê¹Œìš”?',
                        'ë¹„ìŠ·í•œ ìƒí™©ì—ì„œ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì€ ì–´ë–»ê²Œ í–ˆì„ê¹Œìš”?',
                        'ë‚´ì¼ë¶€í„° ì‹œì‘í•  ìˆ˜ ìˆëŠ” ì²« ê±¸ìŒì€ ë­˜ê¹Œìš”?'
                    ],
                    example: generateReframeExample(caseTitle, 'action'),
                    tips: [
                        'ğŸ’¡ ì‘ì€ ê²ƒë¶€í„°: ê±°ëŒ€í•œ ë³€í™”ë³´ë‹¤ ì‘ì€ ì‹œì‘',
                        'ğŸ’¡ êµ¬ì²´ì ìœ¼ë¡œ: ì–¸ì œ, ì–´ë””ì„œ, ì–´ë–»ê²Œ ëª…í™•íˆ',
                        'ğŸ’¡ ë„ì›€ ìš”ì²­: í˜¼ì í•´ê²°í•˜ë ¤ í•˜ì§€ ë§ê³ '
                    ]
                }
            };
            
            return guides[reframeType];
        }

        function generateReframeExample(caseTitle, reframeType) {
            // ê³ ë¯¼ë³„ ë§ì¶¤ ì˜ˆì‹œ ìƒì„±
            const examples = {
                'ì‹œí—˜ ì„±ì ì´ ë‚˜ë¹ ì„œ ì†ìƒí•´': {
                    'old': '"ì´ë²ˆì—ë„ ëª»í–ˆêµ¬ë‚˜. ë¶€ëª¨ë‹˜ì´ ì‹¤ë§í•˜ì‹¤ ê±°ì•¼. ë‚˜ëŠ” ìˆ˜í•™ì„ ëª»í•˜ëŠ” ì•„ì´ì•¼." â†’ ë„ˆë¬´ ê·¹ë‹¨ì ì´ê³  ìê¸°ë¹„íŒì ',
                    'new': '"ì´ë²ˆ ì‹œí—˜ì€ ì˜ ì•ˆ ëì§€ë§Œ, í‰ì†Œë³´ë‹¤ ì–´ë ¤ìš´ ë¬¸ì œê°€ ë§ì•˜ì–´. ë‹¤ìŒì—ëŠ” ë” ì²´ê³„ì ìœ¼ë¡œ ì¤€ë¹„í•´ë³¼ ìˆ˜ ìˆì–´."',
                    'action': '1) í‹€ë¦° ë¬¸ì œ ë‹¤ì‹œ í’€ì–´ë³´ê¸° 2) ì„ ìƒë‹˜ê»˜ ëª¨ë¥´ëŠ” ë¶€ë¶„ ì§ˆë¬¸í•˜ê¸° 3) ì¹œêµ¬ì™€ í•¨ê»˜ ê³µë¶€í•˜ê¸° 4) ë¶€ëª¨ë‹˜ê»˜ ì†”ì§í•˜ê²Œ ì´ì•¼ê¸°í•˜ê³  ë„ì›€ ìš”ì²­í•˜ê¸°'
                },
                'ì¹œêµ¬ê°€ ë‚´ ë¹„ë°€ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë§í–ˆì–´': {
                    'old': '"Bê°€ ë‚´ ë¹„ë°€ì„ í¼ëœ¨ë ¸êµ¬ë‚˜. ë‚˜ë¥¼ ë°°ì‹ í–ˆì–´. ë” ì´ìƒ ë¯¿ì„ ìˆ˜ ì—†ì–´." â†’ ê´€ê³„ë¥¼ ì™„ì „íˆ ë‹¨ì ˆí•˜ë ¤ëŠ” ê·¹ë‹¨ì  ìƒê°',
                    'new': '"Bê°€ ì‹¤ìˆ˜í–ˆê±°ë‚˜ ë‹¤ë¥¸ ì´ìœ ê°€ ìˆì„ ìˆ˜ë„ ìˆì–´. í•œ ë²ˆ ëŒ€í™”í•´ë³´ê³  ì•ìœ¼ë¡œ ì–´ë–»ê²Œ í• ì§€ ì •í•´ë´ì•¼ê² ì–´."',
                    'action': '1) Bì™€ ì§ì ‘ ëŒ€í™”í•´ì„œ ìƒí™© í™•ì¸í•˜ê¸° 2) ë‚´ ê°ì •ì„ ì†”ì§í•˜ê²Œ í‘œí˜„í•˜ê¸° 3) ì•ìœ¼ë¡œì˜ ì•½ì† ì •í•˜ê¸° 4) ë‹¤ë¥¸ ì¹œêµ¬ë“¤ì—ê²ŒëŠ” ì‚¬ì‹¤ í™•ì¸ í›„ ëŒ€ì‘í•˜ê¸°'
                },
                'ìƒˆ í•™ê¸‰ì— ì ì‘í•˜ê¸° ì–´ë ¤ì›Œ': {
                    'old': '"ë‹¤ë¥¸ ì• ë“¤ì€ ì´ë¯¸ ì¹œí•´ì¡ŒëŠ”ë° ë‚˜ë§Œ í˜¼ìì•¼. ë­”ê°€ ì´ìƒí•œ ê±¸ê¹Œ? ê³„ì† ì´ëŸ´ ê²ƒ ê°™ì•„." â†’ ìê¸° íƒ“ë§Œ í•˜ê³  ë¯¸ë˜ë¥¼ ë¶€ì •ì ìœ¼ë¡œ ì˜ˆìƒ',
                    'new': '"ìƒˆë¡œìš´ í™˜ê²½ì— ì ì‘í•˜ëŠ” ê±´ ì‹œê°„ì´ ê±¸ë ¤. ì•„ì§ 3ì£¼ë°–ì— ì•ˆ ëìœ¼ë‹ˆê¹Œ ì¶©ë¶„íˆ ê°€ëŠ¥ì„±ì´ ìˆì–´."',
                    'action': '1) ê´€ì‹¬ì‚¬ê°€ ë¹„ìŠ·í•œ ì¹œêµ¬ ì°¾ì•„ë³´ê¸° 2) ë™ì•„ë¦¬ë‚˜ ëª¨ë‘  í™œë™ ì ê·¹ ì°¸ì—¬í•˜ê¸° 3) ë¨¼ì € ì¸ì‚¬í•˜ê³  ë§ ê±¸ì–´ë³´ê¸° 4) ë„ì›€ì´ í•„ìš”í•œ ì¹œêµ¬ ë„ì™€ì£¼ê¸°'
                }
            };
            
            // í˜„ì¬ ê³ ë¯¼ê³¼ ê°€ì¥ ìœ ì‚¬í•œ ì˜ˆì‹œ ì°¾ê¸°
            for (const [key, value] of Object.entries(examples)) {
                if (caseTitle.includes(key.split(' ')[0]) || key.includes(caseTitle.split(' ')[0])) {
                    return value[reframeType];
                }
            }
            
            // ê¸°ë³¸ ì˜ˆì‹œ
            const defaultExamples = {
                'old': 'ê¸°ì¡´ ìƒê°ì„ ê²€í† í•˜ê³  ë¬¸ì œì ì„ ì°¾ì•„ë³´ì„¸ìš”.',
                'new': 'ë” í˜„ì‹¤ì ì´ê³  ê· í˜•ì¡íŒ ìƒê°ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”.',
                'action': 'ì‹¤ì œë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì¸ ë°©ë²•ì„ ìƒê°í•´ë³´ì„¸ìš”.'
            };
            
            return defaultExamples[reframeType];
        }

        function showReframeGuide(reframeType) {
            const guideArea = document.getElementById('reframe-guide-area');
            const guideContent = document.getElementById('reframe-guide-content');
            
            if (!guideArea || !guideContent) return;
            
            const guide = generateReframeGuide(reframeType);
            if (!guide) return;
            
            // ëª¨ë“  reframe ì¹´ë“œì—ì„œ active í´ë˜ìŠ¤ ì œê±°
            document.querySelectorAll('.reframe-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // ì„ íƒëœ ì¹´ë“œì— active í´ë˜ìŠ¤ ì¶”ê°€
            const selectedCard = document.querySelector(`.reframe-card[data-reframe="${reframeType}"]`);
            if (selectedCard) {
                selectedCard.classList.add('active');
            }
            
            const colorMap = {
                'old': 'gray',
                'new': 'purple',
                'action': 'cyan'
            };
            const color = colorMap[reframeType];
            
            const colorStyles = {
                'old': { bg: '#6b7280', hover: '#4b5563' },
                'new': { bg: '#9333ea', hover: '#7c3aed' },
                'action': { bg: '#06b6d4', hover: '#0891b2' }
            };
            
            guideContent.innerHTML = `
                <div class="space-y-4">
                    <h5 class="font-bold text-gray-800">${guide.title}</h5>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <h6 class="font-semibold text-gray-700 mb-2">ğŸ¤” ì´ëŸ° ì§ˆë¬¸ì„ í•´ë³´ì„¸ìš”:</h6>
                            <ul class="space-y-1 text-sm text-gray-600">
                                ${guide.questions.map(q => `<li>â€¢ ${q}</li>`).join('')}
                            </ul>
                        </div>
                        
                        <div>
                            <h6 class="font-semibold text-gray-700 mb-2">ğŸ“ í˜„ì¬ ê³ ë¯¼ì˜ ì˜ˆì‹œ:</h6>
                            <div class="bg-white p-3 rounded-lg text-sm text-gray-700 border-l-4" style="border-left-color: ${colorStyles[reframeType].bg};">
                                ${guide.example}
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h6 class="font-semibold text-gray-700 mb-2">ğŸ’¡ ì‘ì„± íŒ:</h6>
                        <div class="flex flex-wrap gap-2">
                            ${guide.tips.map(tip => `<span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">${tip}</span>`).join('')}
                        </div>
                    </div>
                    
                    <div class="flex gap-2 pt-2">
                        <button onclick="focusReframeTextarea('${reframeType}')" class="text-white px-4 py-2 rounded-lg text-sm btn-hover" style="background-color: ${colorStyles[reframeType].bg};">
                            âœï¸ ì‘ì„±í•˜ëŸ¬ ê°€ê¸°
                        </button>
                        <button onclick="hideReframeGuide()" class="bg-gray-400 text-white px-4 py-2 rounded-lg text-sm btn-hover">
                            âœ• ê°€ì´ë“œ ë‹«ê¸°
                        </button>
                    </div>
                </div>
            `;
            
            guideArea.classList.remove('hidden');
            guideArea.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function hideReframeGuide() {
            const guideArea = document.getElementById('reframe-guide-area');
            if (guideArea) {
                guideArea.classList.add('hidden');
            }
            
            // ëª¨ë“  ì¹´ë“œì—ì„œ active í´ë˜ìŠ¤ ì œê±°
            document.querySelectorAll('.reframe-card').forEach(card => {
                card.classList.remove('active');
            });
        }

        function focusReframeTextarea(reframeType) {
            let textarea;
            
            if (reframeType === 'new') {
                textarea = document.getElementById('new-thinking');
            } else if (reframeType === 'action') {
                textarea = document.getElementById('help-suggestions');
            } else {
                // 'old'ì˜ ê²½ìš° ABC ë¶„ì„ ì˜ì—­ìœ¼ë¡œ
                textarea = document.getElementById('abc-analysis');
            }
            
            if (!textarea) return;
            
            // í…ìŠ¤íŠ¸ì˜ì—­ì— í¬ì»¤ìŠ¤
            textarea.focus();
            
            // ê°€ì´ë“œ ë‹«ê¸°
            hideReframeGuide();
            
            // ì…ë ¥ ì˜ì—­ ê°•ì¡° íš¨ê³¼
            const colorMap = {
                'old': 'rgba(107, 114, 128, 0.3)',
                'new': 'rgba(147, 51, 234, 0.3)',
                'action': 'rgba(6, 182, 212, 0.3)'
            };
            
            textarea.style.boxShadow = `0 0 0 3px ${colorMap[reframeType]}`;
            setTimeout(() => {
                textarea.style.boxShadow = '';
            }, 2000);
        }

        function showNewThinkingExample() {
            if (!currentCase) {
                alert('ë¨¼ì € ê³ ë¯¼ ì‚¬ë¡€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const example = generateReframeExample(currentCase.title, 'new');
            
            const useExample = confirm(
                `ğŸ’œ "${currentCase.title}" ìƒí™©ì˜ ìƒˆë¡œìš´ ìƒê° ì˜ˆì‹œì…ë‹ˆë‹¤:\n\n${example}\n\nì´ ì˜ˆì‹œë¥¼ ì°¸ê³ í•´ì„œ ìì‹ ë§Œì˜ ìƒˆë¡œìš´ ìƒê°ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!\n\n"í™•ì¸"ì„ ëˆ„ë¥´ë©´ ì˜ˆì‹œê°€ ì…ë ¥ì°½ì— ë“¤ì–´ê°‘ë‹ˆë‹¤. (ìˆ˜ì • ê°€ëŠ¥)`
            );
            
            if (useExample) {
                const textarea = document.getElementById('new-thinking');
                if (textarea) {
                    textarea.value = example;
                    textarea.focus();
                    saveToLocalStorage();
                }
            }
        }

        function showHelpSuggestionsExample() {
            if (!currentCase) {
                alert('ë¨¼ì € ê³ ë¯¼ ì‚¬ë¡€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const example = generateReframeExample(currentCase.title, 'action');
            
            const useExample = confirm(
                `ğŸ¯ "${currentCase.title}" ìƒí™©ì˜ êµ¬ì²´ì  ë„ì›€ ë°©ë²• ì˜ˆì‹œì…ë‹ˆë‹¤:\n\n${example}\n\nì´ ì˜ˆì‹œë¥¼ ì°¸ê³ í•´ì„œ ì‹¤ì œë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œì•ˆí•´ë³´ì„¸ìš”!\n\n"í™•ì¸"ì„ ëˆ„ë¥´ë©´ ì˜ˆì‹œê°€ ì…ë ¥ì°½ì— ë“¤ì–´ê°‘ë‹ˆë‹¤. (ìˆ˜ì • ê°€ëŠ¥)`
            );
            
            if (useExample) {
                const textarea = document.getElementById('help-suggestions');
                if (textarea) {
                    textarea.value = example;
                    textarea.focus();
                    saveToLocalStorage();
                }
            }
        }
        function generateABCGuide(abcType) {
            if (!currentCase) return '';
            
            const caseTitle = currentCase.title;
            
            const guides = {
                'A': {
                    title: 'ğŸ” A: ì‚¬ì‹¤ê³¼ ì‚¬ê±´ ë¶„ì„í•˜ê¸°',
                    questions: [
                        'ì •í™•íˆ ì–¸ì œ, ì–´ë””ì„œ ì¼ì–´ë‚¬ë‚˜ìš”?',
                        'ëˆ„ê°€ ê´€ë ¨ë˜ì–´ ìˆì—ˆë‚˜ìš”?',
                        'ì‹¤ì œë¡œ ë¬´ìŠ¨ ì¼ì´ ë²Œì–´ì¡Œë‚˜ìš”?',
                        'ë‹¤ë¥¸ ì‚¬ëŒì´ ë´ë„ ê°™ì€ ìƒí™©ì´ë¼ê³  í•  ë§Œí•œ ê°ê´€ì  ì‚¬ì‹¤ì€?'
                    ],
                    example: generateSpecificExample(caseTitle, 'A'),
                    tips: [
                        'ğŸ’¡ ë‚´ ìƒê°ì´ë‚˜ ê°ì •ì€ ë¹¼ê³  ì˜¤ì§ ì‚¬ì‹¤ë§Œ',
                        'ğŸ’¡ "~ë¼ê³  ìƒê°í•œë‹¤"ëŠ” Bì— í•´ë‹¹',
                        'ğŸ’¡ ì¹´ë©”ë¼ë¡œ ì°ì€ ê²ƒì²˜ëŸ¼ ê°ê´€ì ìœ¼ë¡œ'
                    ]
                },
                'B': {
                    title: 'ğŸ§  B: ìƒê°ê³¼ ì‹ ë… ì°¾ì•„ë³´ê¸°',
                    questions: [
                        'ê·¸ ìˆœê°„ ë¨¸ë¦¿ì†ì— ì–´ë–¤ ìƒê°ì´ ë– ì˜¬ëë‚˜ìš”?',
                        'ìƒí™©ì„ ì–´ë–»ê²Œ í•´ì„í–ˆë‚˜ìš”?',
                        'ì–´ë–¤ ê±±ì •ì´ë‚˜ ì˜ˆìƒì„ í–ˆë‚˜ìš”?',
                        '"~ì¼ ê²ƒì´ë‹¤", "~í•´ì•¼ í•œë‹¤" ê°™ì€ ìƒê°ì´ ìˆì—ˆë‚˜ìš”?'
                    ],
                    example: generateSpecificExample(caseTitle, 'B'),
                    tips: [
                        'ğŸ’¡ ìë™ìœ¼ë¡œ ë– ì˜¤ë¥¸ ìƒê°ë“¤ì„ ì°¾ì•„ë³´ì„¸ìš”',
                        'ğŸ’¡ "ë§Œì•½ì—...", "~í•˜ë©´ ì–´ë–¡í•˜ì§€?" ê°™ì€ ìƒê°',
                        'ğŸ’¡ ì˜³ê³  ê·¸ë¦„ì„ íŒë‹¨í•œ ìƒê°ë„ í¬í•¨'
                    ]
                },
                'C': {
                    title: 'ğŸ’« C: ê²°ê³¼ì™€ ë°˜ì‘ íŒŒì•…í•˜ê¸°',
                    questions: [
                        'ì–´ë–¤ ê¸°ë¶„ì´ ë“¤ì—ˆë‚˜ìš”?',
                        'ëª¸ì€ ì–´ë–¤ ë°˜ì‘ì„ ë³´ì˜€ë‚˜ìš”?',
                        'ì‹¤ì œë¡œ ì–´ë–¤ í–‰ë™ì„ í–ˆë‚˜ìš”?',
                        'ê·¸ í›„ ìƒí™©ì´ ì–´ë–»ê²Œ ë˜ì—ˆë‚˜ìš”?'
                    ],
                    example: generateSpecificExample(caseTitle, 'C'),
                    tips: [
                        'ğŸ’¡ ê°ì •ê³¼ í–‰ë™ ë‘˜ ë‹¤ í¬í•¨í•´ë³´ì„¸ìš”',
                        'ğŸ’¡ ëª¸ì˜ ë°˜ì‘ë„ ì¤‘ìš”í•œ ê²°ê³¼ì˜ˆìš”',
                        'ğŸ’¡ ì¦‰ì‹œ ë‚˜íƒ€ë‚œ ê²ƒê³¼ ë‚˜ì¤‘ì— ë‚˜íƒ€ë‚œ ê²ƒ êµ¬ë¶„'
                    ]
                }
            };
            
            return guides[abcType];
        }

        function generateSpecificExample(caseTitle, abcType) {
            // ê³ ë¯¼ë³„ ë§ì¶¤ ì˜ˆì‹œ ìƒì„±
            const examples = {
                'ì‹œí—˜ ì„±ì ì´ ë‚˜ë¹ ì„œ ì†ìƒí•´': {
                    'A': 'ìˆ˜í•™ ì‹œí—˜ì—ì„œ 65ì ì„ ë°›ì•˜ë‹¤. í‰ê· ë³´ë‹¤ 10ì  ë‚®ì€ ì ìˆ˜ì˜€ë‹¤.',
                    'B': '"ì´ë²ˆì—ë„ ëª»í–ˆêµ¬ë‚˜. ë¶€ëª¨ë‹˜ì´ ì‹¤ë§í•˜ì‹¤ ê±°ì•¼. ë‚˜ëŠ” ìˆ˜í•™ì„ ëª»í•˜ëŠ” ì•„ì´ì•¼."',
                    'C': 'ì†ìƒí•˜ê³  ë¶€ë„ëŸ¬ì› ë‹¤. ì§‘ì— ê°€ëŠ” ê¸¸ì´ ë¬´ê±°ì› ê³ , ë¶€ëª¨ë‹˜ê»˜ ë§ì”€ë“œë¦¬ê¸° ë¬´ì„œì› ë‹¤.'
                },
                'ì¹œêµ¬ê°€ ë‚´ ë¹„ë°€ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë§í–ˆì–´': {
                    'A': 'ë‚´ê°€ Aë¥¼ ì¢‹ì•„í•œë‹¤ê³  ì¹œêµ¬ Bì—ê²Œë§Œ ë§í–ˆëŠ”ë°, ë©°ì¹  í›„ ë‹¤ë¥¸ ë°˜ ì¹œêµ¬ë“¤ì´ ê·¸ ì´ì•¼ê¸°ë¥¼ ì•Œê³  ìˆì—ˆë‹¤.',
                    'B': '"Bê°€ ë‚´ ë¹„ë°€ì„ í¼ëœ¨ë ¸êµ¬ë‚˜. ë‚˜ë¥¼ ë°°ì‹ í–ˆì–´. ë” ì´ìƒ ë¯¿ì„ ìˆ˜ ì—†ì–´."',
                    'C': 'ë°°ì‹ ê°ê³¼ í™”ê°€ ë‚¬ë‹¤. Bë¥¼ í”¼í•˜ê²Œ ë˜ì—ˆê³ , ë‹¤ë¥¸ ì¹œêµ¬ë“¤ì—ê²Œë„ ë¹„ë°€ ì´ì•¼ê¸°ë¥¼ í•˜ì§€ ì•Šê²Œ ë˜ì—ˆë‹¤.'
                },
                'ìƒˆ í•™ê¸‰ì— ì ì‘í•˜ê¸° ì–´ë ¤ì›Œ': {
                    'A': 'ìƒˆ í•™ê¸°ê°€ ì‹œì‘ë˜ê³  3ì£¼ê°€ ì§€ë‚¬ëŠ”ë°, ì•„ì§ í•¨ê»˜ ì ì‹¬ì„ ë¨¹ê±°ë‚˜ ì´ì•¼ê¸°í•  ì¹œêµ¬ê°€ ìƒê¸°ì§€ ì•Šì•˜ë‹¤.',
                    'B': '"ë‹¤ë¥¸ ì• ë“¤ì€ ì´ë¯¸ ì¹œí•´ì¡ŒëŠ”ë° ë‚˜ë§Œ í˜¼ìì•¼. ë­”ê°€ ì´ìƒí•œ ê±¸ê¹Œ? ê³„ì† ì´ëŸ´ ê²ƒ ê°™ì•„."',
                    'C': 'ì™¸ë¡­ê³  ë¶ˆì•ˆí–ˆë‹¤. ì‰¬ëŠ” ì‹œê°„ì— í˜¼ì ìˆê²Œ ë˜ê³ , í•™êµ ê°€ê¸°ê°€ ì‹«ì–´ì¡Œë‹¤.'
                }
            };
            
            // í˜„ì¬ ê³ ë¯¼ê³¼ ê°€ì¥ ìœ ì‚¬í•œ ì˜ˆì‹œ ì°¾ê¸°
            for (const [key, value] of Object.entries(examples)) {
                if (caseTitle.includes(key.split(' ')[0]) || key.includes(caseTitle.split(' ')[0])) {
                    return value[abcType];
                }
            }
            
            // ê¸°ë³¸ ì˜ˆì‹œ
            const defaultExamples = {
                'A': 'êµ¬ì²´ì ì¸ ìƒí™©ê³¼ ì‚¬ì‹¤ì„ ê°ê´€ì ìœ¼ë¡œ ì¨ë³´ì„¸ìš”.',
                'B': 'ê·¸ë•Œ ë“  ìƒê°ê³¼ ë§ˆìŒì† ì´ì•¼ê¸°ë¥¼ ì¨ë³´ì„¸ìš”.',
                'C': 'ëŠë‚€ ê°ì •ê³¼ í•œ í–‰ë™ì„ ì¨ë³´ì„¸ìš”.'
            };
            
            return defaultExamples[abcType];
        }

        function showABCGuide(abcType) {
            const guideArea = document.getElementById('abc-guide-area');
            const guideContent = document.getElementById('abc-guide-content');
            
            if (!guideArea || !guideContent) return;
            
            const guide = generateABCGuide(abcType);
            if (!guide) return;
            
            // ëª¨ë“  ABC ì¹´ë“œì—ì„œ active í´ë˜ìŠ¤ ì œê±°
            document.querySelectorAll('.abc-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // ì„ íƒëœ ì¹´ë“œì— active í´ë˜ìŠ¤ ì¶”ê°€
            const selectedCard = document.querySelector(`.abc-card[data-abc="${abcType}"]`);
            if (selectedCard) {
                selectedCard.classList.add('active');
            }
            
            guideContent.innerHTML = `
                <div class="space-y-4">
                    <h5 class="font-bold text-gray-800">${guide.title}</h5>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <h6 class="font-semibold text-gray-700 mb-2">ğŸ¤” ì´ëŸ° ì§ˆë¬¸ì„ í•´ë³´ì„¸ìš”:</h6>
                            <ul class="space-y-1 text-sm text-gray-600">
                                ${guide.questions.map(q => `<li>â€¢ ${q}</li>`).join('')}
                            </ul>
                        </div>
                        
                        <div>
                            <h6 class="font-semibold text-gray-700 mb-2">ğŸ“ í˜„ì¬ ê³ ë¯¼ì˜ ì˜ˆì‹œ:</h6>
                            <div class="bg-white p-3 rounded-lg text-sm text-gray-700 italic border-l-4 border-${abcType === 'A' ? 'red' : abcType === 'B' ? 'orange' : 'blue'}-400">
                                "${guide.example}"
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h6 class="font-semibold text-gray-700 mb-2">ğŸ’¡ ì‘ì„± íŒ:</h6>
                        <div class="flex flex-wrap gap-2">
                            ${guide.tips.map(tip => `<span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">${tip}</span>`).join('')}
                        </div>
                    </div>
                    
                    <div class="flex gap-2 pt-2">
                        <button onclick="focusABCTextarea('${abcType}')" class="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm btn-hover">
                            âœï¸ ${abcType} ì‘ì„±í•˜ëŸ¬ ê°€ê¸°
                        </button>
                        <button onclick="hideABCGuide()" class="bg-gray-400 text-white px-4 py-2 rounded-lg text-sm btn-hover">
                            âœ• ê°€ì´ë“œ ë‹«ê¸°
                        </button>
                    </div>
                </div>
            `;
            
            guideArea.classList.remove('hidden');
            guideArea.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function hideABCGuide() {
            const guideArea = document.getElementById('abc-guide-area');
            if (guideArea) {
                guideArea.classList.add('hidden');
            }
            
            // ëª¨ë“  ì¹´ë“œì—ì„œ active í´ë˜ìŠ¤ ì œê±°
            document.querySelectorAll('.abc-card').forEach(card => {
                card.classList.remove('active');
            });
        }

        function focusABCTextarea(abcType) {
            const textarea = document.getElementById('abc-analysis');
            if (!textarea) return;
            
            // í…ìŠ¤íŠ¸ì˜ì—­ì— í¬ì»¤ìŠ¤
            textarea.focus();
            
            // í•´ë‹¹ ABC ì„¹ì…˜ìœ¼ë¡œ ì»¤ì„œ ì´ë™ (ê¸°ë³¸ í…œí”Œë¦¿ì´ ìˆì„ ê²½ìš°)
            const content = textarea.value;
            let cursorPosition = 0;
            
            if (abcType === 'A') {
                cursorPosition = content.indexOf('A:') !== -1 ? content.indexOf('A:') + 2 : 0;
            } else if (abcType === 'B') {
                cursorPosition = content.indexOf('B:') !== -1 ? content.indexOf('B:') + 2 : content.length;
            } else if (abcType === 'C') {
                cursorPosition = content.indexOf('C:') !== -1 ? content.indexOf('C:') + 2 : content.length;
            }
            
            textarea.setSelectionRange(cursorPosition, cursorPosition);
            
            // ê°€ì´ë“œ ë‹«ê¸°
            hideABCGuide();
            
            // ì…ë ¥ ì˜ì—­ ê°•ì¡° íš¨ê³¼
            textarea.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.3)';
            setTimeout(() => {
                textarea.style.boxShadow = '';
            }, 2000);
        }

        function showABCExample() {
            if (!currentCase) {
                alert('ë¨¼ì € ê³ ë¯¼ ì‚¬ë¡€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const exampleA = generateSpecificExample(currentCase.title, 'A');
            const exampleB = generateSpecificExample(currentCase.title, 'B');
            const exampleC = generateSpecificExample(currentCase.title, 'C');
            
            const exampleText = `A: ${exampleA}\n\nB: ${exampleB}\n\nC: ${exampleC}`;
            
            const useExample = confirm(
                `ğŸ“ "${currentCase.title}" ìƒí™©ì˜ ABC ë¶„ì„ ì˜ˆì‹œì…ë‹ˆë‹¤:\n\n${exampleText}\n\nì´ ì˜ˆì‹œë¥¼ ì°¸ê³ í•´ì„œ ìì‹ ë§Œì˜ ABC ë¶„ì„ì„ ì‘ì„±í•´ë³´ì„¸ìš”!\n\n"í™•ì¸"ì„ ëˆ„ë¥´ë©´ ì˜ˆì‹œê°€ ì…ë ¥ì°½ì— ë“¤ì–´ê°‘ë‹ˆë‹¤. (ìˆ˜ì • ê°€ëŠ¥)`
            );
            
            if (useExample) {
                const textarea = document.getElementById('abc-analysis');
                if (textarea) {
                    textarea.value = exampleText;
                    textarea.focus();
                    saveToLocalStorage();
                }
            }
        }
        function updateStep(step) {
            currentStep = step;
            
            // ë°©ë¬¸í•œ ë‹¨ê³„ ì¶”ê°€
            if (!visitedSteps.includes(step)) {
                visitedSteps.push(step);
            }
            
            // ëª¨ë“  ë‹¨ê³„ ìˆ¨ê¸°ê¸°
            [elements.step1, elements.step2, elements.step3, elements.step4]
                .forEach(el => el.classList.add('hidden'));
            
            // í˜„ì¬ ë‹¨ê³„ í‘œì‹œ
            const stepContents = {
                1: { element: elements.step1, desc: 'ë§ˆìŒì„ ë”°ëœ»í•˜ê²Œ ê³µê°í•´ì£¼ì„¸ìš”' },
                2: { element: elements.step2, desc: 'ìƒí™©ì„ í•¨ê»˜ ì •ë¦¬í•´ë³´ì„¸ìš”' },
                3: { element: elements.step3, desc: 'ê±´ì„¤ì ì¸ í•´ê²°ì±…ì„ ì°¾ì•„ë³´ì„¸ìš”' },
                4: { element: elements.step4, desc: 'ë”°ëœ»í•œ ê²©ë ¤ë¡œ ë§ˆë¬´ë¦¬í•´ì£¼ì„¸ìš”' }
            };
            
            const current = stepContents[step];
            current.element.classList.remove('hidden');
            elements.stepDesc.textContent = current.desc;
            
            // ë‹¨ê³„ ë„¤ë¹„ê²Œì´ì…˜ ì—…ë°ì´íŠ¸
            updateStepNavigation();
            
            // ì´ì „/ë‹¤ìŒ ë²„íŠ¼ ì—…ë°ì´íŠ¸
            updateNavigationButtons();
            
            // ê°€ì´ë“œ ì—…ë°ì´íŠ¸
            updateStepGuide(step);
        }

        function updateStepNavigation() {
            document.querySelectorAll('.step-nav-btn').forEach((btn, index) => {
                const stepNum = index + 1;
                btn.classList.remove('step-nav-active', 'step-nav-visited', 'step-nav-completed');
                btn.style.background = '';
                btn.style.color = '';
                btn.style.cursor = '';
                
                if (stepNum === currentStep) {
                    // í˜„ì¬ ë‹¨ê³„ - ì¬ìƒ ì•„ì´ì½˜ê³¼ ê°•ì¡°
                    btn.classList.add('step-nav-active');
                    btn.style.background = '#10b981';
                    btn.style.color = 'white';
                    btn.style.cursor = 'pointer';
                    btn.innerHTML = `â–¶ï¸ ${stepNum}ë‹¨ê³„<br><span class="text-xs">ì§„í–‰ì¤‘</span>`;
                } else if (visitedSteps.includes(stepNum)) {
                    // ì™„ë£Œëœ ë‹¨ê³„ - ì²´í¬ ì•„ì´ì½˜
                    btn.classList.add('step-nav-completed');
                    btn.style.background = '#d1fae5';
                    btn.style.color = '#065f46';
                    btn.style.cursor = 'pointer';
                    btn.innerHTML = `âœ… ${stepNum}ë‹¨ê³„<br><span class="text-xs">ì™„ë£Œ</span>`;
                } else if (stepNum === currentStep + 1) {
                    // ë‹¤ìŒ ë‹¨ê³„ - ì ‘ê·¼ ê°€ëŠ¥
                    btn.style.background = '#bfdbfe';
                    btn.style.color = '#1e40af';
                    btn.style.cursor = 'pointer';
                    const stepNames = ['ê³µê°í•˜ê¸°', 'ABC ë¶„ì„', 'ìƒˆë¡œìš´ ìƒê°', 'ê²©ë ¤í•˜ê¸°'];
                    btn.innerHTML = `â­ï¸ ${stepNum}ë‹¨ê³„<br><span class="text-xs">${stepNames[stepNum-1]}</span>`;
                } else {
                    // ì ‘ê·¼ ë¶ˆê°€ ë‹¨ê³„
                    btn.style.background = '#e5e7eb';
                    btn.style.color = '#9ca3af';
                    btn.style.cursor = 'not-allowed';
                    const stepIcons = ['ğŸ’š', 'ğŸ”', 'âœ¨', 'ğŸ'];
                    const stepNames = ['ê³µê°í•˜ê¸°', 'ABC ë¶„ì„', 'ìƒˆë¡œìš´ ìƒê°', 'ê²©ë ¤í•˜ê¸°'];
                    btn.innerHTML = `${stepIcons[stepNum-1]} ${stepNum}ë‹¨ê³„<br><span class="text-xs">${stepNames[stepNum-1]}</span>`;
                }
            });
        }

        function updateNavigationButtons() {
            // ì´ì „ ë‹¨ê³„ ë²„íŠ¼
            if (currentStep === 1) {
                elements.prevStepBtn.disabled = true;
                elements.prevStepBtn.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                elements.prevStepBtn.disabled = false;
                elements.prevStepBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
            
            // 4ë‹¨ê³„ì—ì„œëŠ” ì‚¬ì´ë“œë°”ì˜ ë‹¤ìŒ ë‹¨ê³„ ë²„íŠ¼ ìˆ¨ê¸°ê¸° (4ë‹¨ê³„ ë‚´ë¶€ì— ì €ì¥ ë²„íŠ¼ì´ ìˆìŒ)
            if (currentStep === 4) {
                elements.nextStepBtn.style.display = 'none';
            } else {
                elements.nextStepBtn.style.display = 'block';
                elements.nextStepBtn.textContent = 'â¡ï¸ ë‹¤ìŒ ë‹¨ê³„ë¡œ';
                elements.nextStepBtn.className = 'w-full bg-blue-500 text-white font-bold py-2 rounded-lg btn-hover';
            }
        }

        function updateStepGuide(step) {
            const guides = {
                1: `
                    <div class="bg-green-50 p-3 rounded-lg">
                        <div class="font-bold text-green-700">ğŸ’š ê³µê° í¬ì¸íŠ¸</div>
                        <ul class="list-disc ml-4 text-green-600 text-sm">
                            <li>ê°ì •ì„ ì¸ì •í•´ì£¼ê¸°</li>
                            <li>"í˜ë“¤ì—ˆê² êµ¬ë‚˜" í‘œí˜„</li>
                            <li>ë¹„ìŠ·í•œ ê²½í—˜ ê³µìœ </li>
                        </ul>
                    </div>`,
                2: `
                    <div class="bg-blue-50 p-3 rounded-lg">
                        <div class="font-bold text-blue-700">ğŸ” ABC ë¶„ì„ ë°©ë²•</div>
                        <ul class="list-disc ml-4 text-blue-600 text-sm">
                            <li>A: ì •í™•í•œ ì‚¬ì‹¤ë§Œ</li>
                            <li>B: ê·¸ë•Œ ë“  ìƒê°</li>
                            <li>C: ê°ì •ê³¼ í–‰ë™</li>
                        </ul>
                    </div>`,
                3: `
                    <div class="bg-purple-50 p-3 rounded-lg">
                        <div class="font-bold text-purple-700">âœ¨ ìƒê° ë°”ê¾¸ê¸°</div>
                        <ul class="list-disc ml-4 text-purple-600 text-sm">
                            <li>í˜„ì‹¤ì ì¸ ê´€ì  ì œì‹œ</li>
                            <li>êµ¬ì²´ì ì¸ í•´ê²°ì±…</li>
                            <li>ì‘ì€ í–‰ë™ë¶€í„°</li>
                        </ul>
                    </div>`,
                4: `
                    <div class="bg-pink-50 p-3 rounded-lg">
                        <div class="font-bold text-pink-700">ğŸ ê²©ë ¤í•˜ê¸°</div>
                        <ul class="list-disc ml-4 text-pink-600 text-sm">
                            <li>ì§„ì‹¬ ì–´ë¦° ì‘ì›</li>
                            <li>ì¹œêµ¬ì˜ ê°•ì  ì–¸ê¸‰</li>
                            <li>í•¨ê»˜ ìˆë‹¤ëŠ” ë©”ì‹œì§€</li>
                        </ul>
                    </div>`
            };
            
            elements.stepGuide.innerHTML = guides[step];
        }

        // ===== ì—­í•  ê´€ë¦¬ =====
        function updateRoleDisplay() {
            const consultantName = document.getElementById('consultant-name')?.value || 'ì»¨ì„¤í„´íŠ¸';
            const clientName = document.getElementById('client-name')?.value || 'ë‚´ë‹´ì';
            
            const roleDisplay = elements.roleDisplay || document.getElementById('role-display');
            if (!roleDisplay) {
                console.error('role-display ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                return;
            }
            
            if (isConsultant) {
                roleDisplay.className = 'role-consultant p-3 rounded-lg text-center';
                roleDisplay.innerHTML = `
                    <div class="font-bold">ğŸ‘¨â€ğŸ« í˜„ì¬ ì»¨ì„¤í„´íŠ¸</div>
                    <div class="text-sm">${consultantName}</div>
                `;
            } else {
                roleDisplay.className = 'role-client p-3 rounded-lg text-center';
                roleDisplay.innerHTML = `
                    <div class="font-bold">ğŸ™‹â€â™€ï¸ í˜„ì¬ ë‚´ë‹´ì</div>
                    <div class="text-sm">${clientName}</div>
                `;
            }
        }

        function switchRoles() {
            // ì´ë¦„ê³¼ í•™ê¸‰ ì •ë³´ ìë™ êµì²´
            const consultantNameInput = document.getElementById('consultant-name');
            const clientNameInput = document.getElementById('client-name');
            const consultantClassInput = document.getElementById('consultant-class');
            const clientClassInput = document.getElementById('client-class');
            
            // ê°’ êµì²´ (ES6 êµ¬ì¡°ë¶„í•´í• ë‹¹ ì‚¬ìš©)
            [consultantNameInput.value, clientNameInput.value] = [clientNameInput.value, consultantNameInput.value];
            [consultantClassInput.value, clientClassInput.value] = [clientClassInput.value, consultantClassInput.value];
            
            // ì—­í•  ìƒíƒœ ë³€ê²½
            isConsultant = !isConsultant;
            updateRoleDisplay();
            
            // ì‚¬ìš©ìì—ê²Œ ì•ˆë‚´
            alert('âœ… ì—­í• ì´ êµì²´ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nğŸ‘¨â€ğŸ« ìƒˆë¡œìš´ ì»¨ì„¤í„´íŠ¸: ' + consultantNameInput.value + 
                  '\nğŸ™‹â€â™€ï¸ ìƒˆë¡œìš´ ë‚´ë‹´ì: ' + clientNameInput.value + 
                  '\n\nìƒˆë¡œìš´ ì‚¬ë¡€ë¡œ ì—­í• ê·¹ì„ ì‹œì‘í•´ë³´ì„¸ìš”.');
            
            // ìƒˆë¡œìš´ ì‚¬ë¡€ë¡œ ë¦¬ì…‹í•˜ê±°ë‚˜ ê³„ì† ì§„í–‰í• ì§€ ì„ íƒ
            if (confirm('ìƒˆë¡œìš´ ì‚¬ë¡€ë¡œ ë‹¤ì‹œ ì‹œì‘í•˜ì‹œê² ì–´ìš”?\n\nâ€¢ í™•ì¸: ìƒˆ ì‚¬ë¡€ë¡œ ì²˜ìŒë¶€í„°\nâ€¢ ì·¨ì†Œ: í˜„ì¬ ë‹¨ê³„ì—ì„œ ê³„ì†')) {
                resetRoleplay();
                showScreen('start');
            }
        }

        // ===== ì»¨ì„¤íŒ… ë°ì´í„° ìˆ˜ì§‘ =====
        function collectConsultationData() {
            // ë½‘íŒ ê²©ë ¤ ë©”ì‹œì§€ ìˆ˜ì§‘
            const drawnMessage = document.getElementById('encouragement-message').textContent;
            const isDefaultMessage = drawnMessage === 'ê²©ë ¤ ë©”ì‹œì§€ë¥¼ ë½‘ì•„ë³´ì„¸ìš”!';
            
            consultationData = {
                case: currentCase,
                consultant: {
                    name: document.getElementById('consultant-name').value || 'ì»¨ì„¤í„´íŠ¸',
                    class: document.getElementById('consultant-class').value || '-'
                },
                client: {
                    name: document.getElementById('client-name').value || 'ë‚´ë‹´ì',
                    class: document.getElementById('client-class').value || '-'
                },
                selectedEmotions: selectedEmotions.slice(), // ë°°ì—´ ë³µì‚¬
                empathy: document.getElementById('empathy-text').value || '(ì‘ì„±ë˜ì§€ ì•ŠìŒ)',
                abcAnalysis: document.getElementById('abc-analysis').value || '(ì‘ì„±ë˜ì§€ ì•ŠìŒ)',
                newThinking: document.getElementById('new-thinking').value || '(ì‘ì„±ë˜ì§€ ì•ŠìŒ)',
                helpSuggestions: document.getElementById('help-suggestions').value || '(ì‘ì„±ë˜ì§€ ì•ŠìŒ)',
                drawnEncouragement: isDefaultMessage ? '' : drawnMessage,
                personalEncouragement: document.getElementById('personal-encouragement').value || '(ì‘ì„±ë˜ì§€ ì•ŠìŒ)',
                timestamp: new Date().toLocaleString('ko-KR')
            };
        }

        function generateSummary() {
            // ì°¸ê°€ì ì •ë³´ í‘œì‹œ
            document.getElementById('consultation-info').innerHTML = `
                <div class="flex flex-col sm:flex-row justify-center items-center gap-4 text-sm">
                    <div class="role-consultant px-4 py-2 rounded-full">
                        <span class="font-semibold">ğŸ‘¨â€ğŸ« ì»¨ì„¤í„´íŠ¸:</span> ${consultationData.consultant.name} (${consultationData.consultant.class})
                    </div>
                    <div class="role-client px-4 py-2 rounded-full">
                        <span class="font-semibold">ğŸ™‹â€â™€ï¸ ë‚´ë‹´ì:</span> ${consultationData.client.name} (${consultationData.client.class})
                    </div>
                </div>
            `;
            
            // ì™„ë£Œ ì‹œê°„ í‘œì‹œ
            document.getElementById('completion-time').textContent = consultationData.timestamp;
            
            // ì£¼ìš” ë‚´ìš© ìš”ì•½
            const summary = `
                <div class="space-y-8">
                    <!-- ë‹¤ë£¬ ê³ ë¯¼ -->
                    <div class="bg-gradient-to-r from-gray-50 to-blue-50 p-6 rounded-xl border-l-4 border-blue-500">
                        <h3 class="text-xl font-bold text-gray-800 mb-3 flex items-center">
                            ğŸ’­ ë‹¤ë£¬ ê³ ë¯¼
                        </h3>
                        <div class="space-y-2">
                            <div class="font-semibold text-lg text-blue-700">${consultationData.case.title}</div>
                            <div class="text-gray-700 leading-relaxed bg-white p-4 rounded-lg">
                                "${consultationData.case.content}"
                            </div>
                        </div>
                    </div>
                    
                    <!-- 4ë‹¨ê³„ ì»¨ì„¤íŒ… ê²°ê³¼ -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- 1ë‹¨ê³„: ê³µê°í•˜ê¸° -->
                        <div class="bg-green-50 p-5 rounded-xl border-l-4 border-green-500">
                            <h3 class="text-lg font-bold text-green-700 mb-3 flex items-center">
                                ğŸ’š 1ë‹¨ê³„: ë§ˆìŒ ê³µê°í•˜ê¸°
                            </h3>
                            <div class="space-y-3">
                                ${consultationData.selectedEmotions.length > 0 ? `
                                    <div>
                                        <div class="text-sm font-semibold text-green-600 mb-1">íŒŒì•…í•œ ê°ì •:</div>
                                        <div class="flex flex-wrap gap-1">
                                            ${consultationData.selectedEmotions.map(emotion => 
                                                `<span class="bg-green-100 px-2 py-1 rounded-full text-xs">${emotion}</span>`
                                            ).join('')}
                                        </div>
                                    </div>
                                ` : ''}
                                <div>
                                    <div class="text-sm font-semibold text-green-600 mb-1">ê³µê° í‘œí˜„:</div>
                                    <div class="bg-white p-3 rounded-lg text-sm leading-relaxed">
                                        "${consultationData.empathy}"
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 2ë‹¨ê³„: ABC ë¶„ì„ -->
                        <div class="bg-blue-50 p-5 rounded-xl border-l-4 border-blue-500">
                            <h3 class="text-lg font-bold text-blue-700 mb-3 flex items-center">
                                ğŸ” 2ë‹¨ê³„: ABC ë¶„ì„í•˜ê¸°
                            </h3>
                            <div class="bg-white p-3 rounded-lg text-sm leading-relaxed">
                                "${consultationData.abcAnalysis}"
                            </div>
                        </div>
                        
                        <!-- 3ë‹¨ê³„: ìƒˆë¡œìš´ ìƒê° -->
                        <div class="bg-purple-50 p-5 rounded-xl border-l-4 border-purple-500">
                            <h3 class="text-lg font-bold text-purple-700 mb-3 flex items-center">
                                âœ¨ 3ë‹¨ê³„: ìƒˆë¡œìš´ ìƒê° ë§Œë“¤ê¸°
                            </h3>
                            <div class="space-y-3">
                                <div>
                                    <div class="text-sm font-semibold text-purple-600 mb-1">ê±´ê°•í•œ ìƒê°:</div>
                                    <div class="bg-white p-3 rounded-lg text-sm leading-relaxed">
                                        "${consultationData.newThinking}"
                                    </div>
                                </div>
                                <div>
                                    <div class="text-sm font-semibold text-purple-600 mb-1">êµ¬ì²´ì  ë„ì›€:</div>
                                    <div class="bg-white p-3 rounded-lg text-sm leading-relaxed">
                                        "${consultationData.helpSuggestions}"
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 4ë‹¨ê³„: ê²©ë ¤í•˜ê¸° -->
                        <div class="bg-pink-50 p-5 rounded-xl border-l-4 border-pink-500">
                            <h3 class="text-lg font-bold text-pink-700 mb-3 flex items-center">
                                ğŸ 4ë‹¨ê³„: ë”°ëœ»í•œ ê²©ë ¤í•˜ê¸°
                            </h3>
                            <div class="space-y-3">
                                ${consultationData.drawnEncouragement ? `
                                    <div>
                                        <div class="text-sm font-semibold text-pink-600 mb-1">ë½‘íŒ ê²©ë ¤ ë©”ì‹œì§€:</div>
                                        <div class="bg-gradient-to-r from-pink-100 to-purple-100 p-3 rounded-lg text-sm leading-relaxed font-medium">
                                            "${consultationData.drawnEncouragement}"
                                        </div>
                                    </div>
                                ` : ''}
                                <div>
                                    <div class="text-sm font-semibold text-pink-600 mb-1">ë‚˜ë§Œì˜ ê²©ë ¤ ë©”ì‹œì§€:</div>
                                    <div class="bg-white p-3 rounded-lg text-sm leading-relaxed">
                                        "${consultationData.personalEncouragement}"
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ì»¨ì„¤íŒ… í•˜ì´ë¼ì´íŠ¸ -->
                    <div class="bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-xl border border-yellow-200">
                        <h3 class="text-lg font-bold text-yellow-800 mb-3 text-center">
                            â­ ì´ë²ˆ ì»¨ì„¤íŒ…ì˜ í•˜ì´ë¼ì´íŠ¸
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                            <div class="bg-white p-3 rounded-lg">
                                <div class="text-2xl mb-1">ğŸ’</div>
                                <div class="text-sm font-semibold text-gray-700">ê³µê°ê³¼ ì´í•´</div>
                                <div class="text-xs text-gray-500">ë”°ëœ»í•œ ë§ˆìŒìœ¼ë¡œ ë“¤ì–´ì£¼ê¸°</div>
                            </div>
                            <div class="bg-white p-3 rounded-lg">
                                <div class="text-2xl mb-1">ğŸ”</div>
                                <div class="text-sm font-semibold text-gray-700">ì²´ê³„ì  ë¶„ì„</div>
                                <div class="text-xs text-gray-500">ABC ëª¨ë¸ë¡œ ë¬¸ì œ íŒŒì•…</div>
                            </div>
                            <div class="bg-white p-3 rounded-lg">
                                <div class="text-2xl mb-1">ğŸŒ±</div>
                                <div class="text-sm font-semibold text-gray-700">ê¸ì •ì  ë³€í™”</div>
                                <div class="text-xs text-gray-500">ìƒˆë¡œìš´ ê´€ì ê³¼ ê²©ë ¤</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            elements.consultationSummary.innerHTML = summary;
        }

        // ===== ë©”ì¸ í”Œë¡œìš° =====
        function startRoleplay() {
            console.log('startRoleplay í˜¸ì¶œë¨');
            console.log('currentCase:', currentCase);
            
            const consultantName = document.getElementById('consultant-name').value.trim();
            const clientName = document.getElementById('client-name').value.trim();
            
            console.log('ì°¸ê°€ì ì •ë³´:', consultantName, clientName);
            
            if (!consultantName || !clientName) {
                alert('ì»¨ì„¤í„´íŠ¸ì™€ ë‚´ë‹´ì ì´ë¦„ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            if (!currentCase) {
                alert('ë¨¼ì € ê³ ë¯¼ ì‚¬ë¡€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!\n\nâ€¢ ì¤€ë¹„ëœ ì‚¬ë¡€: ì¹´ë“œë¥¼ í´ë¦­í•´ì„œ ì„ íƒ\nâ€¢ ì§ì ‘ ì…ë ¥: ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì‘ì„±');
                return;
            }
            
            console.log('ì—­í• ê·¹ ì‹œì‘ ì¡°ê±´ ë§Œì¡±, í™”ë©´ ì „í™˜ ì‹œì‘');
            
            // ìƒíƒœ ì´ˆê¸°í™”
            currentStep = 1;
            visitedSteps = [1];
            selectedEmotions = [];
            
            // ì‚¬ë¡€ í‘œì‹œ
            elements.displayedTitle.textContent = currentCase.title;
            elements.displayedContent.textContent = currentCase.content;
            
            // ì—­í•  í‘œì‹œ ì—…ë°ì´íŠ¸
            updateRoleDisplay();
            
            // ì¶”ì²œ ê°ì •ë“¤ í‘œì‹œ
            updateRecommendedEmotions();
            updateSelectedEmotionsDisplay();
            
            // ì²« ë²ˆì§¸ ë‹¨ê³„ë¡œ ì‹œì‘
            updateStep(1);
            
            console.log('í™”ë©´ ì „í™˜ ì‹¤í–‰');
            showScreen('roleplay');
        }

        function resetRoleplay() {
            currentStep = 1;
            visitedSteps = [1]; // ë°©ë¬¸í•œ ë‹¨ê³„ ì´ˆê¸°í™”
            selectedEmotions = []; // ì„ íƒëœ ê°ì • ì´ˆê¸°í™”
            updateStep(1);
            
            // ëª¨ë“  ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            document.querySelectorAll('textarea').forEach(textarea => {
                if (textarea.id !== 'custom-title' && textarea.id !== 'custom-content') {
                    textarea.value = '';
                }
            });
            
            // ì§ì ‘ ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            const directEmotionInput = document.getElementById('direct-emotion-input');
            if (directEmotionInput) {
                directEmotionInput.value = '';
            }
            
            // ê°ì • ë²„íŠ¼ ì´ˆê¸°í™”
            document.querySelectorAll('.emotion-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // ì„ íƒëœ ê°ì • í‘œì‹œ ì´ˆê¸°í™”
            updateSelectedEmotionsDisplay();
            
            // ê²©ë ¤ ë©”ì‹œì§€ ì´ˆê¸°í™”
            document.getElementById('encouragement-message').textContent = 'ê²©ë ¤ ë©”ì‹œì§€ë¥¼ ë½‘ì•„ë³´ì„¸ìš”!';
        }

        function finishRoleplay() {
            collectConsultationData();
            generateSummary();
            showScreen('result');
        }

        // ===== ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ & ì¸ì‡„ ê¸°ëŠ¥ =====
        async function loadHtml2Canvas() {
            // html2canvasê°€ ì´ë¯¸ ë¡œë“œë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
            if (typeof html2canvas !== 'undefined') {
                return true;
            }
            
            try {
                // ë™ì ìœ¼ë¡œ html2canvas ë¡œë“œ
                return new Promise((resolve, reject) => {
                    const script = document.createElement('script');
                    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
                    script.onload = () => {
                        if (typeof html2canvas !== 'undefined') {
                            resolve(true);
                        } else {
                            reject(new Error('html2canvas ë¡œë“œ ì‹¤íŒ¨'));
                        }
                    };
                    script.onerror = () => reject(new Error('ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨'));
                    document.head.appendChild(script);
                });
            } catch (error) {
                console.error('html2canvas ë¡œë“œ ì˜¤ë¥˜:', error);
                return false;
            }
        }

        async function downloadAsImage() {
            const button = elements.downloadImageBtn;
            const originalText = button.textContent;
            
            try {
                button.textContent = 'ğŸ“· ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë”© ì¤‘...';
                button.disabled = true;
                
                // html2canvas ë¡œë“œ í™•ì¸ ë° ë¡œë”©
                const isLoaded = await loadHtml2Canvas();
                if (!isLoaded) {
                    throw new Error('ì´ë¯¸ì§€ ìƒì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
                button.textContent = 'ğŸ“· ì´ë¯¸ì§€ ìƒì„± ì¤‘...';
                
                const element = document.getElementById('printable-consultation');
                if (!element) {
                    throw new Error('ìº¡ì²˜í•  ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
                // ìŠ¤í¬ë¡¤ì„ ë§¨ ìœ„ë¡œ ì´ë™
                element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                // ì ì‹œ ê¸°ë‹¤ë ¤ì„œ ë Œë”ë§ ì™„ë£Œ ë³´ì¥
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                console.log('html2canvas ì‹œì‘...');
                
                const canvas = await html2canvas(element, {
                    scale: 1.5, // ì ì ˆí•œ í•´ìƒë„
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: '#ffffff',
                    scrollX: 0,
                    scrollY: 0,
                    windowWidth: 1200, // ê³ ì • ë„ˆë¹„
                    windowHeight: 800,  // ê³ ì • ë†’ì´
                    onclone: (clonedDoc) => {
                        // í´ë¡ ëœ ë¬¸ì„œì—ì„œ no-print í´ë˜ìŠ¤ ì œê±°
                        const noPrintElements = clonedDoc.querySelectorAll('.no-print');
                        noPrintElements.forEach(el => el.style.display = 'none');
                    }
                });
                
                console.log('ìº”ë²„ìŠ¤ ìƒì„± ì™„ë£Œ:', canvas.width, 'x', canvas.height);
                
                // ìº”ë²„ìŠ¤ê°€ ì œëŒ€ë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸
                if (canvas.width === 0 || canvas.height === 0) {
                    throw new Error('ì´ë¯¸ì§€ê°€ ì œëŒ€ë¡œ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                }
                
                // ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
                const link = document.createElement('a');
                const timestamp = new Date();
                const dateStr = `${timestamp.getFullYear()}${(timestamp.getMonth()+1).toString().padStart(2,'0')}${timestamp.getDate().toString().padStart(2,'0')}_${timestamp.getHours().toString().padStart(2,'0')}${timestamp.getMinutes().toString().padStart(2,'0')}`;
                
                link.download = `ABCì»¨ì„¤íŒ…_${consultationData.consultant.name}_${consultationData.client.name}_${dateStr}.png`;
                
                // ì´ë¯¸ì§€ í’ˆì§ˆ ìµœì í™”
                const dataURL = canvas.toDataURL('image/png', 1.0);
                link.href = dataURL;
                
                // ë‹¤ìš´ë¡œë“œ ì‹¤í–‰
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // ì„±ê³µ ë©”ì‹œì§€
                button.textContent = 'âœ… ì €ì¥ ì™„ë£Œ!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
                
            } catch (error) {
                console.error('ì´ë¯¸ì§€ ìƒì„± ì˜¤ë¥˜:', error);
                
                // êµ¬ì²´ì ì¸ ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ
                let errorMessage = 'ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\n\n';
                
                if (error.message.includes('ë¼ì´ë¸ŒëŸ¬ë¦¬')) {
                    errorMessage += 'â€¢ ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”\nâ€¢ ë¸Œë¼ìš°ì €ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”';
                } else if (error.message.includes('ìº”ë²„ìŠ¤') || error.message.includes('ì´ë¯¸ì§€')) {
                    errorMessage += 'â€¢ ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”\nâ€¢ íŒì—… ì°¨ë‹¨ì„ í•´ì œí•´ì£¼ì„¸ìš”';
                } else {
                    errorMessage += 'â€¢ ì¸ì‡„ ê¸°ëŠ¥(PDF ì €ì¥)ì„ ì´ìš©í•´ì£¼ì„¸ìš”\nâ€¢ ìŠ¤í¬ë¦°ìƒ·ì„ í™œìš©í•´ì£¼ì„¸ìš”';
                }
                
                alert(errorMessage);
                
                // ëŒ€ì•ˆ ì œì‹œ
                if (confirm('ì¸ì‡„ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n(ë¸Œë¼ìš°ì €ì—ì„œ "PDFë¡œ ì €ì¥" ì„ íƒ ê°€ëŠ¥)')) {
                    printConsultation();
                } else if (confirm('ì „ì²´í™”ë©´ìœ¼ë¡œ ë³´ê³  ìŠ¤í¬ë¦°ìƒ·ì„ ì°ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    showFullscreen();
                }
                
            } finally {
                button.disabled = false;
                if (button.textContent.includes('ìƒì„± ì¤‘') || button.textContent.includes('ë¡œë”© ì¤‘')) {
                    button.textContent = originalText;
                }
            }
        }

        function printConsultation() {
            try {
                // ì¸ì‡„ ì „ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì¡°ì •
                document.getElementById('printable-consultation').scrollIntoView();
                setTimeout(() => {
                    window.print();
                }, 500);
            } catch (error) {
                console.error('ì¸ì‡„ ì˜¤ë¥˜:', error);
                alert('ì¸ì‡„ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\në¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ íŒì—…ì„ í—ˆìš©í•´ì£¼ì„¸ìš”.');
            }
        }

        function showFullscreen() {
            const element = document.getElementById('printable-consultation');
            
            // ëª¨ë‹¬ ìƒì„±
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-lg max-w-5xl max-h-[90vh] overflow-auto relative">
                    <button id="close-fullscreen" class="absolute top-4 right-4 bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-600 z-10">
                        âœ•
                    </button>
                    <div id="fullscreen-content" class="p-6">
                        ${element.innerHTML}
                    </div>
                    <div class="p-4 bg-gray-50 text-center text-sm text-gray-600">
                        <p>ğŸ’¡ <strong>ìŠ¤í¬ë¦°ìƒ· ë°©ë²•:</strong></p>
                        <p><strong>Windows:</strong> Win + Shift + S ë˜ëŠ” Print Screen</p>
                        <p><strong>Mac:</strong> Cmd + Shift + 4</p>
                        <p><strong>ëª¨ë°”ì¼:</strong> ì „ì› + ë³¼ë¥¨ë‹¤ìš´ (ê¸°ì¢…ë³„ ìƒì´)</p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // ë‹«ê¸° ë²„íŠ¼ ì´ë²¤íŠ¸
            document.getElementById('close-fullscreen').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            // ë°°ê²½ í´ë¦­ìœ¼ë¡œ ë‹«ê¸°
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
            
            // ESC í‚¤ë¡œ ë‹«ê¸°
            const handleEsc = (e) => {
                if (e.key === 'Escape') {
                    document.body.removeChild(modal);
                    document.removeEventListener('keydown', handleEsc);
                }
            };
            document.addEventListener('keydown', handleEsc);
        }

        // ===== ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ =====
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM ë¡œë“œ ì™„ë£Œ');
            
            // removeEmotionê³¼ ABC, Reframe ê´€ë ¨ í•¨ìˆ˜ë“¤ì„ ì „ì—­ìœ¼ë¡œ ë“±ë¡
            window.removeEmotion = removeEmotion;
            window.focusABCTextarea = focusABCTextarea;
            window.hideABCGuide = hideABCGuide;
            window.focusReframeTextarea = focusReframeTextarea;
            window.hideReframeGuide = hideReframeGuide;
            
            // ì €ì¥ëœ ë°ì´í„° ë³µêµ¬ ì‹œë„
            const dataRestored = loadFromLocalStorage();
            
            if (dataRestored) {
                // ë°ì´í„°ê°€ ë³µêµ¬ëœ ê²½ìš°
                if (currentCase && currentStep > 1) {
                    // ì—­í• ê·¹ í™”ë©´ìœ¼ë¡œ ì´ë™
                    elements.displayedTitle.textContent = currentCase.title;
                    elements.displayedContent.textContent = currentCase.content;
                    updateRoleDisplay();
                    updateRecommendedEmotions();
                    updateSelectedEmotionsDisplay();
                    updateStep(currentStep);
                    showScreen('roleplay');
                } else if (currentCase) {
                    // ì‹œì‘ í™”ë©´ì—ì„œ ì‚¬ë¡€ê°€ ì„ íƒëœ ìƒíƒœë¡œ ë³µêµ¬
                    if (displayedCasesIndices.length > 0) {
                        renderCaseCards();
                        updateSelectedCaseDisplay();
                    } else {
                        generateRandomCases(6);
                    }
                } else {
                    // ì¼ë°˜ì ì¸ ì´ˆê¸°í™”
                    generateRandomCases(6);
                }
            } else {
                // ìƒˆë¡œ ì‹œì‘í•˜ëŠ” ê²½ìš°
                generateRandomCases(6);
            }
            
            // ì´ ì‚¬ë¡€ ìˆ˜ í‘œì‹œ
            const totalCasesElement = document.getElementById('total-cases-count');
            if (totalCasesElement) {
                totalCasesElement.textContent = sampleCases.length;
            }

            // ìˆ˜ë™ ì €ì¥ ë²„íŠ¼
            const manualSaveBtn = document.getElementById('manual-save-btn');
            if (manualSaveBtn) {
                manualSaveBtn.addEventListener('click', () => {
                    saveToLocalStorage();
                    showSaveStatus('ğŸ’¾ ìˆ˜ë™ ì €ì¥ ì™„ë£Œ!');
                });
            }

            // ë°ì´í„° ì´ˆê¸°í™” ë²„íŠ¼
            const clearDataBtn = document.getElementById('clear-data-btn');
            if (clearDataBtn) {
                clearDataBtn.addEventListener('click', () => {
                    if (confirm('âš ï¸ ì •ë§ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ì–´ìš”?\n\nì‚­ì œí•˜ë©´ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                        clearSavedData();
                        location.reload();
                    }
                });
            }

            // í˜ì´ì§€ ë– ë‚˜ê¸° ì „ ê²½ê³  ì„¤ì •
            setupBeforeUnloadWarning();
            
            // ìë™ ì €ì¥ ì‹œì‘ (ì…ë ¥ í•„ë“œì— ëŒ€í•œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì™€ í•¨ê»˜)
            document.querySelectorAll('input, textarea').forEach(element => {
                element.addEventListener('input', () => {
                    // ì…ë ¥ì´ ìˆì„ ë•Œë§ˆë‹¤ 1ì´ˆ í›„ ì €ì¥ (ë””ë°”ìš´ì‹±)
                    clearTimeout(element._saveTimeout);
                    element._saveTimeout = setTimeout(saveToLocalStorage, 1000);
                });
            });
            
            // ëª¨ë“œ ì„ íƒ
            elements.randomMode.addEventListener('click', () => {
                console.log('ëœë¤ ëª¨ë“œ ì„ íƒ');
                elements.randomMode.classList.add('active', 'text-white');
                elements.randomMode.classList.remove('bg-gray-300', 'text-gray-700');
                elements.customMode.classList.remove('active', 'text-white');
                elements.customMode.classList.add('bg-gray-300', 'text-gray-700');
                
                elements.randomCaseArea.classList.remove('hidden');
                elements.customCaseArea.classList.add('hidden');
                
                // ëœë¤ ëª¨ë“œë¡œ ì „í™˜ì‹œ ìƒˆë¡œìš´ ì¹´ë“œë“¤ ìƒì„±
                generateRandomCases(6);
                saveToLocalStorage();
            });
            
            elements.customMode.addEventListener('click', () => {
                console.log('ì»¤ìŠ¤í…€ ëª¨ë“œ ì„ íƒ');
                elements.customMode.classList.add('active', 'text-white');
                elements.customMode.classList.remove('bg-gray-300', 'text-gray-700');
                elements.randomMode.classList.remove('active', 'text-white');
                elements.randomMode.classList.add('bg-gray-300', 'text-gray-700');
                
                elements.customCaseArea.classList.remove('hidden');
                elements.randomCaseArea.classList.add('hidden');
                
                // ì»¤ìŠ¤í…€ ëª¨ë“œë¡œ ì „í™˜ì‹œ ì„ íƒ ìƒíƒœ ì´ˆê¸°í™”
                selectedCaseIndex = null;
                currentCase = null;
                useCustomCase();
                saveToLocalStorage();
            });
            
            // ì‚¬ë¡€ ì„ê¸°
            elements.shuffleCasesBtn.addEventListener('click', () => {
                console.log('ë‹¤ë¥¸ ì˜ˆì‹œ ë³´ê¸° í´ë¦­');
                shuffleCases();
                saveToLocalStorage();
            });
            
            // ì»¤ìŠ¤í…€ ì‚¬ë¡€ ì‚¬ìš©
            elements.customTitle.addEventListener('input', () => {
                useCustomCase();
                saveToLocalStorage();
            });
            elements.customContent.addEventListener('input', () => {
                useCustomCase();
                saveToLocalStorage();
            });
            
            // ì§ì ‘ ê°ì • ì…ë ¥
            const addDirectEmotionBtn = document.getElementById('add-direct-emotion-btn');
            if (addDirectEmotionBtn) {
                addDirectEmotionBtn.addEventListener('click', addDirectEmotion);
            }
            
            const directEmotionInput = document.getElementById('direct-emotion-input');
            if (directEmotionInput) {
                directEmotionInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        addDirectEmotion();
                    }
                });
            }
            
            // ì—­í• ê·¹ ì‹œì‘
            elements.startRoleplayBtn.addEventListener('click', () => {
                startRoleplay();
                startAutoSave(); // ì—­í• ê·¹ ì‹œì‘ ì‹œ ìë™ì €ì¥ í™œì„±í™”
            });
            
            // ë‹¨ê³„ ì§„í–‰
            elements.nextStepBtn.addEventListener('click', () => {
                if (currentStep < 4) {
                    updateStep(currentStep + 1);
                } else {
                    finishRoleplay();
                }
                saveToLocalStorage();
            });
            
            // ì´ì „ ë‹¨ê³„ë¡œ
            elements.prevStepBtn.addEventListener('click', () => {
                if (currentStep > 1) {
                    updateStep(currentStep - 1);
                }
                saveToLocalStorage();
            });
            
            // ë‹¨ê³„ ë„¤ë¹„ê²Œì´ì…˜ í´ë¦­
            document.querySelectorAll('.step-nav-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const targetStep = parseInt(btn.dataset.step);
                    // ë°©ë¬¸í•œ ë‹¨ê³„ ë˜ëŠ” ë‹¤ìŒ ë‹¨ê³„ë§Œ í´ë¦­ ê°€ëŠ¥
                    if (visitedSteps.includes(targetStep) || targetStep === currentStep + 1) {
                        updateStep(targetStep);
                        saveToLocalStorage();
                    }
                });
            });
            
            // ì—­í•  ë°”ê¾¸ê¸°
            elements.switchRolesBtn.addEventListener('click', () => {
                switchRoles();
                saveToLocalStorage();
            });
            
            // ABC ì¹´ë“œ í´ë¦­
            document.querySelectorAll('.abc-card').forEach(card => {
                card.addEventListener('click', () => {
                    const abcType = card.dataset.abc;
                    showABCGuide(abcType);
                    card.classList.toggle('filled');
                });
            });
            
            // ABC ì˜ˆì‹œ ë³´ê¸° ë²„íŠ¼
            const abcExampleBtn = document.getElementById('abc-example-btn');
            if (abcExampleBtn) {
                abcExampleBtn.addEventListener('click', showABCExample);
            }
            
            // 3ë‹¨ê³„ Reframe ì¹´ë“œ í´ë¦­
            document.querySelectorAll('.reframe-card').forEach(card => {
                card.addEventListener('click', () => {
                    const reframeType = card.dataset.reframe;
                    showReframeGuide(reframeType);
                });
            });
            
            // 3ë‹¨ê³„ ì˜ˆì‹œ ë³´ê¸° ë²„íŠ¼ë“¤
            const newThinkingExampleBtn = document.getElementById('new-thinking-example-btn');
            if (newThinkingExampleBtn) {
                newThinkingExampleBtn.addEventListener('click', showNewThinkingExample);
            }
            
            const helpSuggestionsExampleBtn = document.getElementById('help-suggestions-example-btn');
            if (helpSuggestionsExampleBtn) {
                helpSuggestionsExampleBtn.addEventListener('click', showHelpSuggestionsExample);
            }
            
            // ê²©ë ¤ ë©”ì‹œì§€ ë½‘ê¸°
            const drawEncouragementBtn = document.getElementById('draw-encouragement-btn');
            if (drawEncouragementBtn) {
                drawEncouragementBtn.addEventListener('click', () => {
                    const randomMessage = encouragementMessages[Math.floor(Math.random() * encouragementMessages.length)];
                    document.getElementById('encouragement-message').textContent = randomMessage;
                });
            }
            
            // ì»¨ì„¤íŒ… ì €ì¥ (4ë‹¨ê³„ì—ì„œ)
            elements.saveConsultationBtn.addEventListener('click', () => {
                finishRoleplay();
                stopAutoSave(); // ì™„ë£Œ ì‹œ ìë™ì €ì¥ ì¤‘ë‹¨
                clearSavedData(); // ì €ì¥ëœ ì„ì‹œ ë°ì´í„° ì‚­ì œ
            });
            
            // ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
            elements.downloadImageBtn.addEventListener('click', downloadAsImage);
            
            // ì¸ì‡„í•˜ê¸°
            elements.printConsultationBtn.addEventListener('click', printConsultation);
            
            // ì „ì²´í™”ë©´ ë³´ê¸°
            elements.fullscreenBtn.addEventListener('click', showFullscreen);
            
            // ê²°ê³¼ í™”ë©´ ë²„íŠ¼ë“¤
            elements.switchAndRestartBtn.addEventListener('click', () => {
                switchRoles();
                resetRoleplay();
                clearSavedData(); // ìƒˆë¡œ ì‹œì‘í•  ë•Œ ì„ì‹œ ë°ì´í„° ì‚­ì œ
                showScreen('start');
            });
            
            elements.newCaseBtn.addEventListener('click', () => {
                resetRoleplay();
                clearSavedData(); // ìƒˆë¡œ ì‹œì‘í•  ë•Œ ì„ì‹œ ë°ì´í„° ì‚­ì œ
                showScreen('start');
            });
            
            elements.restartBtn.addEventListener('click', () => {
                clearSavedData(); // ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°ˆ ë•Œ ì„ì‹œ ë°ì´í„° ì‚­ì œ
                location.reload();
            });
        });
    </script>
</body>
</html>
