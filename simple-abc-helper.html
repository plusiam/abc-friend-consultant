<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¹œêµ¬ ABC ì»¨ì„¤íŒ… - ì¹œêµ¬ë•ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .card-hover:hover { transform: translateY(-2px); transition: all 0.2s; }
        .step-card { transition: all 0.3s ease; }
        .step-card.active { transform: scale(1.02); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
        .emotion-btn.selected { 
            background: linear-gradient(135deg, #10b981, #059669); 
            color: white; 
            font-weight: 600; 
        }
        .slide-in { animation: slideIn 0.4s ease-out; }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .progress-bar {
            transition: width 0.5s ease;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-50 to-blue-50 min-h-screen p-4">
    <div class="max-w-4xl mx-auto">
        
        <!-- í—¤ë” -->
        <header class="text-center bg-white rounded-2xl shadow-lg p-6 mb-6 border-t-4 border-green-500">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">ğŸ¤ ì¹œêµ¬ ABC ì»¨ì„¤íŒ…</h1>
            <p class="text-gray-600 mb-4">ê°„ë‹¨í•œ 3ë‹¨ê³„ë¡œ ì¹œêµ¬ì˜ ë§ˆìŒì„ ë”°ëœ»í•˜ê²Œ ë„ì™€ì£¼ì„¸ìš”</p>
            <div class="flex justify-center items-center gap-4">
                <div class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm">ğŸ‘¥ í•™ìƒ ì£¼ë„í˜•</div>
                <div class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm">ğŸ’š 3ë‹¨ê³„ ê°„í¸</div>
            </div>
        </header>

        <!-- ì§„í–‰ ë°” -->
        <div class="bg-white rounded-xl shadow-lg p-4 mb-6">
            <div class="flex justify-between items-center mb-2">
                <span class="text-sm font-medium text-gray-600">ì§„í–‰ ìƒí™©</span>
                <span class="text-sm text-gray-500" id="progress-text">1 / 3 ë‹¨ê³„</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div class="progress-bar bg-green-500 h-2 rounded-full" id="progress-bar" style="width: 33%"></div>
            </div>
        </div>

        <!-- ì‹œì‘ í™”ë©´ -->
        <div id="start-screen" class="slide-in">
            <div class="bg-white rounded-2xl shadow-lg p-8">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ¯ ì–´ë–¤ ê³ ë¯¼ì„ ë„ì™€ë³¼ê¹Œìš”?</h2>
                    <p class="text-gray-600">ì¹œêµ¬ì˜ ê³ ë¯¼ ìƒí™©ì„ ì„ íƒí•˜ê³ , 3ë‹¨ê³„ë¡œ ë”°ëœ»í•˜ê²Œ ë„ì™€ì£¼ì„¸ìš”</p>
                </div>

                <!-- ì°¸ê°€ì ì •ë³´ -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                        <h3 class="font-bold text-green-700 mb-3">ğŸ‘¨â€ğŸ« ë„ì›€ ì£¼ëŠ” ì¹œêµ¬</h3>
                        <input type="text" id="helper-name" placeholder="ì´ë¦„" class="w-full p-2 border rounded-lg mb-2">
                        <input type="text" id="helper-class" placeholder="í•™ë…„/ë°˜" class="w-full p-2 border rounded-lg">
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                        <h3 class="font-bold text-blue-700 mb-3">ğŸ™‹â€â™€ï¸ ë„ì›€ ë°›ëŠ” ì¹œêµ¬</h3>
                        <input type="text" id="friend-name" placeholder="ì´ë¦„" class="w-full p-2 border rounded-lg mb-2">
                        <input type="text" id="friend-class" placeholder="í•™ë…„/ë°˜" class="w-full p-2 border rounded-lg">
                    </div>
                </div>

                <!-- ê³ ë¯¼ ìƒí™© ì„ íƒ -->
                <div class="mb-8">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-gray-800">ğŸ’­ ê³ ë¯¼ ìƒí™© ì„ íƒí•˜ê¸°</h3>
                        <button id="shuffle-btn" class="bg-orange-500 text-white px-4 py-2 rounded-lg text-sm card-hover">
                            ğŸ”„ ë‹¤ë¥¸ ìƒí™© ë³´ê¸°
                        </button>
                    </div>
                    
                    <div id="case-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ê³ ë¯¼ ì¹´ë“œë“¤ -->
                    </div>
                </div>

                <button id="start-consulting-btn" class="w-full bg-gradient-to-r from-green-500 to-blue-500 text-white font-bold py-4 text-lg rounded-lg card-hover disabled:opacity-50" disabled>
                    ğŸš€ ì¹œêµ¬ ë„ì›€ ì‹œì‘í•˜ê¸°
                </button>
            </div>
        </div>

        <!-- ì»¨ì„¤íŒ… í™”ë©´ -->
        <div id="consulting-screen" class="hidden slide-in">
            <!-- í˜„ì¬ ê³ ë¯¼ í‘œì‹œ -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                <h3 class="text-lg font-bold text-gray-800 mb-3">ğŸ­ í˜„ì¬ ë„ì›€ì„ ì£¼ê³  ìˆëŠ” ìƒí™©</h3>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <div class="font-semibold text-blue-800 mb-2" id="current-title">ê³ ë¯¼ ì œëª©</div>
                    <div class="text-gray-700 mb-3" id="current-situation">A. ìƒí™©</div>
                    <div class="text-orange-700" id="current-thought">B. ë¶€ì •ì  ìƒê°</div>
                </div>
            </div>

            <!-- 1ë‹¨ê³„: ê°ì • ì½ì–´ì£¼ê¸° -->
            <div id="step1-emotions" class="step-card bg-white rounded-2xl shadow-lg p-6 mb-6">
                <h3 class="text-2xl font-bold text-purple-700 mb-4">ğŸ’œ 1ë‹¨ê³„: ì¹œêµ¬ì˜ ê°ì • ì½ì–´ì£¼ê¸°</h3>
                <div class="bg-purple-50 p-4 rounded-lg mb-4">
                    <p class="text-purple-800 font-medium">ì¹œêµ¬ê°€ ì–´ë–¤ ê¸°ë¶„ì¼ì§€ í•¨ê»˜ ìƒê°í•´ë³´ê³ , ê·¸ ë§ˆìŒì„ ë”°ëœ»í•˜ê²Œ ì½ì–´ì£¼ì„¸ìš”</p>
                </div>
                
                <div class="mb-4">
                    <h4 class="font-semibold text-gray-700 mb-3">ğŸ¯ ì–´ë–¤ ê°ì •ì¼ê¹Œìš”? (ì—¬ëŸ¬ ê°œ ì„ íƒ ê°€ëŠ¥)</h4>
                    <div id="emotion-buttons" class="grid grid-cols-3 md:grid-cols-4 gap-2 mb-4">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ê°ì • ë²„íŠ¼ë“¤ -->
                    </div>
                </div>

                <div class="mb-6">
                    <h4 class="font-semibold text-gray-700 mb-3">ğŸ’¬ ì¹œêµ¬ì—ê²Œ ì „í•  ê³µê°ì˜ ë§</h4>
                    <textarea id="empathy-message" rows="3" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-500" 
                              placeholder="ì¹œêµ¬ì˜ ê°ì •ì„ ì¸ì •í•˜ê³  ê³µê°í•˜ëŠ” ë”°ëœ»í•œ ë§ì„ í•´ì£¼ì„¸ìš”...&#10;ì˜ˆ: 'ì •ë§ ì†ìƒí–ˆê² êµ¬ë‚˜. ê·¸ëŸ° ì¼ì´ ìˆì—ˆë‹¤ë©´ ë‚˜ë„ ê·¸ëŸ° ê¸°ë¶„ì´ì—ˆì„ ê²ƒ ê°™ì•„.'"></textarea>
                </div>

                <button id="step1-next" class="w-full bg-purple-500 text-white font-bold py-3 rounded-lg card-hover">
                    â¡ï¸ 2ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ê¸°
                </button>
            </div>

            <!-- 2ë‹¨ê³„: ìƒˆë¡œìš´ ìƒê°ê³¼ ë„ì›€ ì œì•ˆ -->
            <div id="step2-help" class="step-card hidden bg-white rounded-2xl shadow-lg p-6 mb-6">
                <h3 class="text-2xl font-bold text-cyan-700 mb-4">ğŸ’¡ 2ë‹¨ê³„: ìƒˆë¡œìš´ ìƒê°ê³¼ ë„ì›€ ì œì•ˆí•˜ê¸°</h3>
                <div class="bg-cyan-50 p-4 rounded-lg mb-4">
                    <p class="text-cyan-800 font-medium">ë¶€ì •ì ì¸ ìƒê°ì„ ë” ê· í˜•ì¡íˆê³  ë„ì›€ì´ ë˜ëŠ” ìƒê°ìœ¼ë¡œ ë°”ê¿”ë³´ê³ , êµ¬ì²´ì ì¸ ë„ì›€ì„ ì œì•ˆí•´ì£¼ì„¸ìš”</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <h4 class="font-semibold text-gray-700 mb-3">ğŸŒˆ ìƒˆë¡œìš´ ê´€ì  ì œì•ˆí•˜ê¸°</h4>
                        <textarea id="new-perspective" rows="4" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-cyan-500" 
                                  placeholder="ë” í˜„ì‹¤ì ì´ê³  í¬ë§ì ì¸ ìƒê°ì„ ì œì•ˆí•´ì£¼ì„¸ìš”...&#10;ì˜ˆ: 'ì´ë²ˆì—ëŠ” ì•ˆ ëì§€ë§Œ, ë‹¤ìŒì—ëŠ” ë” ì˜í•  ìˆ˜ ìˆì„ ê±°ì•¼. ì‹¤ìˆ˜ëŠ” ëˆ„êµ¬ë‚˜ í•˜ëŠ” ê±°ë‹ˆê¹Œ.'"></textarea>
                    </div>
                    <div>
                        <h4 class="font-semibold text-gray-700 mb-3">ğŸ¯ êµ¬ì²´ì ì¸ ë„ì›€ ë°©ë²•</h4>
                        <textarea id="help-suggestions" rows="4" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-cyan-500" 
                                  placeholder="ì¹œêµ¬ê°€ ì‹¤ì œë¡œ í•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì¸ ë°©ë²•ì„ ì œì•ˆí•´ì£¼ì„¸ìš”...&#10;ì˜ˆ: 'ì„ ìƒë‹˜ê»˜ ì§ˆë¬¸í•´ë³´ê±°ë‚˜, ìš°ë¦¬ê°€ í•¨ê»˜ ê³µë¶€í•˜ëŠ” ì‹œê°„ì„ ë§Œë“¤ì–´ë³´ì.'"></textarea>
                    </div>
                </div>

                <button id="step2-next" class="w-full bg-cyan-500 text-white font-bold py-3 rounded-lg card-hover">
                    â¡ï¸ 3ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ê¸°
                </button>
            </div>

            <!-- 3ë‹¨ê³„: ê²©ë ¤ ë©”ì‹œì§€ -->
            <div id="step3-encourage" class="step-card hidden bg-white rounded-2xl shadow-lg p-6 mb-6">
                <h3 class="text-2xl font-bold text-pink-700 mb-4">ğŸŒŸ 3ë‹¨ê³„: ë”°ëœ»í•œ ê²©ë ¤ ë©”ì‹œì§€</h3>
                <div class="bg-pink-50 p-4 rounded-lg mb-4">
                    <p class="text-pink-800 font-medium">ì¹œêµ¬ì—ê²Œ í˜ì´ ë˜ëŠ” ë”°ëœ»í•œ ê²©ë ¤ì˜ ë§ì„ ì „í•´ì£¼ì„¸ìš”</p>
                </div>

                <div class="mb-6">
                    <div class="flex items-center gap-3 mb-4">
                        <h4 class="font-semibold text-gray-700">ğŸ² ëœë¤ ê²©ë ¤ ë©”ì‹œì§€</h4>
                        <button id="random-encourage-btn" class="bg-pink-500 text-white px-4 py-2 rounded-lg text-sm card-hover">
                            ìƒˆë¡œ ë½‘ê¸°
                        </button>
                    </div>
                    <div id="random-message" class="bg-gradient-to-r from-pink-100 to-purple-100 p-4 rounded-lg text-pink-800 font-medium text-center">
                        ğŸŒŸ ê²©ë ¤ ë©”ì‹œì§€ë¥¼ ë½‘ì•„ë³´ì„¸ìš”!
                    </div>
                </div>

                <div class="mb-6">
                    <h4 class="font-semibold text-gray-700 mb-3">ğŸ’Œ ë‚˜ë§Œì˜ ê²©ë ¤ ë©”ì‹œì§€</h4>
                    <textarea id="personal-message" rows="3" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-pink-500" 
                              placeholder="ì¹œêµ¬ì—ê²Œ ì „í•˜ê³  ì‹¶ì€ íŠ¹ë³„í•œ ê²©ë ¤ì˜ ë§ì„ ì¨ë³´ì„¸ìš”...&#10;ì˜ˆ: 'í˜ë“¤ ë•Œë§ˆë‹¤ ë„¤ê°€ ì–¼ë§ˆë‚˜ ì†Œì¤‘í•œ ì¹œêµ¬ì¸ì§€ ê¸°ì–µí•´. ì–¸ì œë“ ì§€ ë‚´ê°€ ë„¤ ê³ì— ìˆì„ê²Œ.'"></textarea>
                </div>

                <button id="complete-btn" class="w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold py-4 text-lg rounded-lg card-hover">
                    âœ¨ ì¹œêµ¬ ë„ì›€ ì™„ë£Œí•˜ê¸°
                </button>
            </div>
        </div>

        <!-- ì™„ë£Œ í™”ë©´ -->
        <div id="result-screen" class="hidden slide-in">
            <div class="bg-white rounded-2xl shadow-lg p-8">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">ğŸ‰ ì¹œêµ¬ ë„ì›€ ì™„ë£Œ!</h2>
                    <p class="text-gray-600">ë”°ëœ»í•œ ë§ˆìŒìœ¼ë¡œ ì¹œêµ¬ë¥¼ ë„ì™€ì£¼ì…¨ë„¤ìš”. ì •ë§ ë©‹ì ¸ìš”!</p>
                </div>

                <!-- ìš”ì•½ ì •ë³´ -->
                <div id="result-summary" class="space-y-6 mb-8">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ìš”ì•½ ë‚´ìš© -->
                </div>

                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button id="new-case-btn" class="bg-green-500 text-white font-bold px-6 py-3 rounded-lg card-hover">
                        ğŸ†• ìƒˆë¡œìš´ ì¹œêµ¬ ë•ê¸°
                    </button>
                    <button id="restart-btn" class="bg-gray-500 text-white font-bold px-6 py-3 rounded-lg card-hover">
                        ğŸ  ì²˜ìŒìœ¼ë¡œ
                    </button>
                    <button id="print-btn" class="bg-blue-500 text-white font-bold px-6 py-3 rounded-lg card-hover">
                        ğŸ–¨ï¸ ê²°ê³¼ ì¶œë ¥í•˜ê¸°
                    </button>
                </div>
            </div>
        </div>

        <!-- ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ (ì»¨ì„¤íŒ… ì¤‘ì—ë§Œ í‘œì‹œ) -->
        <div id="nav-buttons" class="hidden fixed bottom-6 right-6 space-y-2">
            <button id="prev-btn" class="bg-gray-500 text-white p-3 rounded-full shadow-lg card-hover">
                â¬…ï¸
            </button>
            <button id="next-btn" class="bg-blue-500 text-white p-3 rounded-full shadow-lg card-hover">
                â¡ï¸
            </button>
        </div>
    </div>

    <script>
        // ê³ ë¯¼ ìƒí™© ë°ì´í„° (A: ìƒí™©, B: ë¶€ì •ì  ìƒê°)
        const consultingCases = [
            {
                title: "ì‹œí—˜ ì„±ì ì´ ë‚˜ë¹ ì„œ ì†ìƒí•´",
                situation: "ìˆ˜í•™ ì‹œí—˜ì—ì„œ 65ì ì„ ë°›ì•˜ë‹¤. í‰ê· ë³´ë‹¤ 10ì  ë‚®ì€ ì ìˆ˜ì˜€ë‹¤.",
                negativeThought: "ì´ë²ˆì—ë„ ëª»í–ˆêµ¬ë‚˜. ë¶€ëª¨ë‹˜ì´ ì‹¤ë§í•˜ì‹¤ ê±°ì•¼. ë‚˜ëŠ” ìˆ˜í•™ì„ ëª»í•˜ëŠ” ì•„ì´ì•¼.",
                emotions: ["ğŸ˜ ì‹¤ë§", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜¤ ì¢Œì ˆê°", "ğŸ˜” ìì±…ê°", "ğŸ˜¨ ë‘ë ¤ì›€"]
            },
            {
                title: "ì¹œêµ¬ê°€ ë‚´ ë¹„ë°€ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë§í–ˆì–´",
                situation: "ë‚´ê°€ Aë¥¼ ì¢‹ì•„í•œë‹¤ê³  ì¹œêµ¬ Bì—ê²Œë§Œ ë§í–ˆëŠ”ë°, ë©°ì¹  í›„ ë‹¤ë¥¸ ë°˜ ì¹œêµ¬ë“¤ì´ ê·¸ ì´ì•¼ê¸°ë¥¼ ì•Œê³  ìˆì—ˆë‹¤.",
                negativeThought: "Bê°€ ë‚´ ë¹„ë°€ì„ í¼ëœ¨ë ¸êµ¬ë‚˜. ë‚˜ë¥¼ ë°°ì‹ í–ˆì–´. ë” ì´ìƒ ë¯¿ì„ ìˆ˜ ì—†ì–´.",
                emotions: ["ğŸ˜  í™”ë‚¨", "ğŸ˜” ë°°ì‹ ê°", "ğŸ˜¢ ìŠ¬í””", "ğŸ˜Ÿ ê±±ì •", "ğŸ˜¤ ì–µìš¸í•¨", "ğŸ˜ ì‹¤ë§"]
            },
            {
                title: "ìƒˆ í•™ê¸‰ì— ì ì‘í•˜ê¸° ì–´ë ¤ì›Œ",
                situation: "ìƒˆ í•™ê¸°ê°€ ì‹œì‘ë˜ê³  3ì£¼ê°€ ì§€ë‚¬ëŠ”ë°, ì•„ì§ í•¨ê»˜ ì ì‹¬ì„ ë¨¹ê±°ë‚˜ ì´ì•¼ê¸°í•  ì¹œêµ¬ê°€ ìƒê¸°ì§€ ì•Šì•˜ë‹¤.",
                negativeThought: "ë‹¤ë¥¸ ì• ë“¤ì€ ì´ë¯¸ ì¹œí•´ì¡ŒëŠ”ë° ë‚˜ë§Œ í˜¼ìì•¼. ë­”ê°€ ì´ìƒí•œ ê±¸ê¹Œ? ê³„ì† ì´ëŸ´ ê²ƒ ê°™ì•„.",
                emotions: ["ğŸ˜” ì™¸ë¡œì›€", "ğŸ˜Ÿ ë¶ˆì•ˆí•¨", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜ ì†Œì™¸ê°", "ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜¤ ë‹µë‹µí•¨"]
            },
            {
                title: "ë¶€ëª¨ë‹˜ì´ ìê¾¸ ë‹¤ë¥¸ ì• ì™€ ë¹„êµí•´",
                situation: "ì—„ë§ˆê°€ ë§¨ë‚  ì‚¬ì´Œ í˜•ì´ë‚˜ ì¹œêµ¬ë“¤ê³¼ ë‚˜ë¥¼ ë¹„êµí•˜ë©° 'ëˆ„êµ¬ëŠ” ì´ë ‡ê²Œ ì˜í•˜ëŠ”ë° ë„ˆëŠ” ì™œ ëª»í•˜ë‹ˆ?'ë¼ê³  ë§ì”€í•˜ì‹ ë‹¤.",
                negativeThought: "ë‚˜ëŠ” í•­ìƒ ë¶€ì¡±í•œ ì•„ì´êµ¬ë‚˜. ë¶€ëª¨ë‹˜ì´ ë‚˜ë¥¼ ì‹¤ë§ìŠ¤ëŸ¬ì›Œí•˜ì…”. ë‹¤ë¥¸ ì• ë“¤ë³´ë‹¤ ëª»ë‚œ ê²ƒ ê°™ì•„.",
                emotions: ["ğŸ˜  í™”ë‚¨", "ğŸ˜” ì„œëŸ¬ì›€", "ğŸ˜¤ ì–µìš¸í•¨", "ğŸ˜ ìê´´ê°", "ğŸ˜Ÿ ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜¢ ìŠ¬í””"]
            },
            {
                title: "ì¹œêµ¬ë“¤ì´ ë‚˜ë§Œ ê²Œì„ì— ì´ˆëŒ€í•˜ì§€ ì•Šì•„",
                situation: "ì‰¬ëŠ” ì‹œê°„ë§ˆë‹¤ ì¹œêµ¬ë“¤ì´ ê°™ì´ ëª¨ì—¬ì„œ ê²Œì„ì„ í•˜ëŠ”ë° ë‚˜ë§Œ ì´ˆëŒ€í•˜ì§€ ì•ŠëŠ”ë‹¤.",
                negativeThought: "ì¹œêµ¬ë“¤ì´ ë‚˜ë¥¼ ì‹«ì–´í•˜ë‚˜ë´. ë‚˜ëŠ” ì¬ë¯¸ì—†ëŠ” ì•„ì´ì¸ê°€? ì ì  í˜¼ìê°€ ë˜ê³  ìˆì–´.",
                emotions: ["ğŸ˜” ì™¸ë¡œì›€", "ğŸ˜ ì†Œì™¸ê°", "ğŸ˜¢ ì„œìš´í•¨", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜Ÿ ë¶ˆì•ˆí•¨", "ğŸ˜¤ ì–µìš¸í•¨"]
            },
            {
                title: "ê¸‰ì‹ì‹¤ì—ì„œ ë°¥ì„ ìŸì•˜ì–´",
                situation: "ì˜¤ëŠ˜ ê¸‰ì‹ì‹¤ì—ì„œ ì‹¤ìˆ˜ë¡œ ë°¥ê·¸ë¦‡ì„ ë–¨ì–´ëœ¨ë ¤ì„œ ì£¼ë³€ ì¹œêµ¬ë“¤ì´ ë‹¤ ì³ë‹¤ë³´ê³  ì›ƒì—ˆë‹¤.",
                negativeThought: "ë„ˆë¬´ ì°½í”¼í•´. ëª¨ë“  ì‚¬ëŒë“¤ì´ ë‚˜ë¥¼ ì›ƒìŒê±°ë¦¬ë¡œ ìƒê°í•  ê±°ì•¼. ë‚´ê°€ ë„ˆë¬´ ì–´ìˆ˜ë£©í•œê°€ë´.",
                emotions: ["ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜ ì°½í”¼í•¨", "ğŸ˜Ÿ ë‹¹í™©ìŠ¤ëŸ¬ì›€", "ğŸ˜” ìœ„ì¶•ê°", "ğŸ˜¨ ë¶ˆì•ˆí•¨", "ğŸ˜¤ ì§œì¦ë‚¨"]
            },
            {
                title: "ë°œí‘œí•  ë•Œë§ˆë‹¤ ë„ˆë¬´ ë–¨ë ¤",
                situation: "ìˆ˜ì—… ì‹œê°„ì— ë°œí‘œë¥¼ í•´ì•¼ í•  ë•Œë§ˆë‹¤ ì‹¬ì¥ì´ ë¹¨ë¦¬ ë›°ê³  ëª©ì†Œë¦¬ê°€ ë–¨ë¦°ë‹¤.",
                negativeThought: "ë‹¤ë¥¸ ì• ë“¤ì´ ë‚˜ë¥¼ ë°”ë³´ë¼ê³  ìƒê°í•  ê±°ì•¼. ì‹¤ìˆ˜í•˜ë©´ ì›ƒìŒê±°ë¦¬ê°€ ë  ê±°ì•¼. ë‚˜ëŠ” ë°œí‘œë¥¼ ëª»í•˜ëŠ” ì•„ì´ì•¼.",
                emotions: ["ğŸ˜¨ ë‘ë ¤ì›€", "ğŸ˜Ÿ ë¶ˆì•ˆí•¨", "ğŸ˜³ ë¶€ë„ëŸ¬ì›€", "ğŸ˜ ê¸´ì¥ê°", "ğŸ˜” ê±±ì •", "ğŸ˜¤ ìŠ¤íŠ¸ë ˆìŠ¤"]
            },
            {
                title: "ì¹œêµ¬ê°€ ë‚´ ë³„ëª…ì„ ë¶€ë¥´ë©° ë†€ë ¤",
                situation: "í•œ ì¹œêµ¬ê°€ ë‚´ ì™¸ëª¨ë¥¼ ê°€ì§€ê³  ë³„ëª…ì„ ë§Œë“¤ì–´ì„œ ìê¾¸ ë¶€ë¥´ë©° ë†€ë¦°ë‹¤.",
                negativeThought: "ë‚´ê°€ ì •ë§ ì´ìƒí•˜ê²Œ ìƒê²¼ë‚˜ë´. ì¹œêµ¬ë“¤ì´ ë‹¤ ë‚˜ë¥¼ ì›ƒìŒê±°ë¦¬ë¡œ ë³¸ë‹¤. í”¼í•˜ê³  ì‹¶ì–´.",
                emotions: ["ğŸ˜  í™”ë‚¨", "ğŸ˜ ì†ìƒí•¨", "ğŸ˜¤ ì–µìš¸í•¨", "ğŸ˜Ÿ ì§œì¦ë‚¨", "ğŸ˜” ìŠ¤íŠ¸ë ˆìŠ¤", "ğŸ˜¢ ì„œìš´í•¨"]
            }
        ];

        const encouragementMessages = [
            "í˜ë“  ì‹œê°„ì´ ì§€ë‚˜ê°€ë©´ ë” ê°•í•´ì§„ ë„ˆë¥¼ ë§Œë‚  ìˆ˜ ìˆì„ ê±°ì•¼ ğŸ’ª",
            "ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ì•„, ê·¸ê²ƒì´ ë°”ë¡œ íŠ¹ë³„í•œ ë„ˆë‹ˆê¹Œ ğŸŒŸ",
            "ì–´ë ¤ìš´ ì¼ì´ ìˆì–´ë„ ë„ˆë¼ë©´ ì˜ í—¤ì³ë‚˜ê°ˆ ìˆ˜ ìˆì–´ ğŸš€",
            "ì‹¤ìˆ˜í•´ë„ ê´œì°®ì•„, ê·¸ê²ƒë„ ì„±ì¥ì˜ ê³¼ì •ì´ë‹ˆê¹Œ ğŸ“ˆ",
            "ë„¤ê°€ ì†Œì¤‘í•œ ì´ìœ ëŠ” ë„ˆë§Œì˜ ê³ ìœ í•¨ì´ ìˆê¸° ë•Œë¬¸ì´ì•¼ ğŸˆ",
            "ì˜¤ëŠ˜ í•˜ë£¨ë„ ìµœì„ ì„ ë‹¤í•œ ë„ˆì—ê²Œ ë°•ìˆ˜ë¥¼ ë³´ë‚´ ğŸ‘",
            "ë„ˆì˜ ë§ˆìŒì„ ì´í•´í•´ì£¼ëŠ” ì‚¬ëŒì´ ì—¬ê¸° ìˆì–´ âœ¨",
            "ë„ˆëŠ” ìƒê°ë³´ë‹¤ í›¨ì”¬ ê°•í•˜ê³  ë©‹ì§„ ì‚¬ëŒì´ì•¼ ğŸŒˆ"
        ];

        // ìƒíƒœ ê´€ë¦¬
        let currentStep = 'start';
        let selectedCase = null;
        let selectedEmotions = [];
        let consultingData = {};

        // DOM ìš”ì†Œë“¤
        const screens = {
            start: document.getElementById('start-screen'),
            consulting: document.getElementById('consulting-screen'),
            result: document.getElementById('result-screen')
        };

        const steps = {
            emotions: document.getElementById('step1-emotions'),
            help: document.getElementById('step2-help'),
            encourage: document.getElementById('step3-encourage')
        };

        // ì´ˆê¸°í™”
        function init() {
            renderCaseCards();
            setupEventListeners();
            updateProgress();
        }

        // ê³ ë¯¼ ì¹´ë“œ ë Œë”ë§
        function renderCaseCards() {
            const container = document.getElementById('case-grid');
            const shuffledCases = [...consultingCases].sort(() => Math.random() - 0.5).slice(0, 4);
            
            container.innerHTML = shuffledCases.map((caseData, index) => `
                <div class="case-card bg-gradient-to-br from-white to-gray-50 p-5 rounded-xl shadow-md border border-gray-200 cursor-pointer card-hover transition-all"
                     onclick="selectCase(${consultingCases.indexOf(caseData)})">
                    <div class="text-lg font-bold text-gray-800 mb-3">${caseData.title}</div>
                    <div class="space-y-2">
                        <div class="text-sm">
                            <span class="font-semibold text-red-600">A. ìƒí™©:</span>
                            <span class="text-gray-700">${caseData.situation.substring(0, 40)}...</span>
                        </div>
                        <div class="text-sm">
                            <span class="font-semibold text-orange-600">B. ìƒê°:</span>
                            <span class="text-gray-700">${caseData.negativeThought.substring(0, 40)}...</span>
                        </div>
                    </div>
                    <div class="mt-3 flex flex-wrap gap-1">
                        ${caseData.emotions.slice(0, 3).map(emotion => 
                            `<span class="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full">${emotion}</span>`
                        ).join('')}
                        ${caseData.emotions.length > 3 ? '<span class="text-xs text-gray-500">...</span>' : ''}
                    </div>
                </div>
            `).join('');
        }

        // ì‚¬ë¡€ ì„ íƒ
        function selectCase(index) {
            selectedCase = consultingCases[index];
            
            // ì„ íƒëœ ì¹´ë“œ í‘œì‹œ
            document.querySelectorAll('.case-card').forEach((card, i) => {
                if (i === Array.from(document.querySelectorAll('.case-card')).indexOf(event.currentTarget)) {
                    card.classList.add('ring-4', 'ring-green-500', 'ring-opacity-50');
                } else {
                    card.classList.remove('ring-4', 'ring-green-500', 'ring-opacity-50');
                }
            });
            
            document.getElementById('start-consulting-btn').disabled = false;
        }

        // ì»¨ì„¤íŒ… ì‹œì‘
        function startConsulting() {
            if (!selectedCase) return;
            
            // ì°¸ê°€ì ì •ë³´ ì €ì¥
            consultingData.helper = {
                name: document.getElementById('helper-name').value || 'ë„ì›€ì´',
                class: document.getElementById('helper-class').value || ''
            };
            consultingData.friend = {
                name: document.getElementById('friend-name').value || 'ì¹œêµ¬',
                class: document.getElementById('friend-class').value || ''
            };
            consultingData.case = selectedCase;
            
            // í™”ë©´ ì „í™˜
            showScreen('consulting');
            showStep('emotions');
            
            // í˜„ì¬ ìƒí™© í‘œì‹œ
            updateCurrentSituation();
            
            // ê°ì • ë²„íŠ¼ ë Œë”ë§
            renderEmotionButtons();
        }

        // í˜„ì¬ ìƒí™© ì—…ë°ì´íŠ¸
        function updateCurrentSituation() {
            document.getElementById('current-title').textContent = selectedCase.title;
            document.getElementById('current-situation').textContent = `A. ìƒí™©: ${selectedCase.situation}`;
            document.getElementById('current-thought').textContent = `B. ë¶€ì •ì  ìƒê°: ${selectedCase.negativeThought}`;
        }

        // ê°ì • ë²„íŠ¼ ë Œë”ë§
        function renderEmotionButtons() {
            const container = document.getElementById('emotion-buttons');
            container.innerHTML = selectedCase.emotions.map(emotion => `
                <button class="emotion-btn p-3 border-2 border-gray-300 rounded-lg text-sm font-medium transition-all card-hover"
                        onclick="toggleEmotion('${emotion}', this)">
                    ${emotion}
                </button>
            `).join('');
        }

        // ê°ì • í† ê¸€
        function toggleEmotion(emotion, button) {
            if (selectedEmotions.includes(emotion)) {
                selectedEmotions = selectedEmotions.filter(e => e !== emotion);
                button.classList.remove('selected');
            } else {
                selectedEmotions.push(emotion);
                button.classList.add('selected');
            }
        }

        // ë‹¨ê³„ ì´ë™
        function nextStep() {
            const currentStepData = getCurrentStepData();
            if (!validateCurrentStep()) return;
            
            saveCurrentStepData(currentStepData);
            
            if (currentStep === 'emotions') {
                showStep('help');
            } else if (currentStep === 'help') {
                showStep('encourage');
                drawRandomEncouragement();
            } else if (currentStep === 'encourage') {
                showResult();
            }
        }

        function prevStep() {
            if (currentStep === 'help') {
                showStep('emotions');
            } else if (currentStep === 'encourage') {
                showStep('help');
            }
        }

        // í˜„ì¬ ë‹¨ê³„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        function getCurrentStepData() {
            switch(currentStep) {
                case 'emotions':
                    return {
                        emotions: selectedEmotions,
                        empathyMessage: document.getElementById('empathy-message').value
                    };
                case 'help':
                    return {
                        newPerspective: document.getElementById('new-perspective').value,
                        helpSuggestions: document.getElementById('help-suggestions').value
                    };
                case 'encourage':
                    return {
                        randomMessage: document.getElementById('random-message').textContent,
                        personalMessage: document.getElementById('personal-message').value
                    };
                default:
                    return {};
            }
        }

        // í˜„ì¬ ë‹¨ê³„ ìœ íš¨ì„± ê²€ì‚¬
        function validateCurrentStep() {
            switch(currentStep) {
                case 'emotions':
                    if (selectedEmotions.length === 0) {
                        alert('ê°ì •ì„ í•˜ë‚˜ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”!');
                        return false;
                    }
                    if (!document.getElementById('empathy-message').value.trim()) {
                        alert('ê³µê°ì˜ ë§ì„ ì ì–´ì£¼ì„¸ìš”!');
                        return false;
                    }
                    return true;
                case 'help':
                    if (!document.getElementById('new-perspective').value.trim()) {
                        alert('ìƒˆë¡œìš´ ê´€ì ì„ ì œì•ˆí•´ì£¼ì„¸ìš”!');
                        return false;
                    }
                    if (!document.getElementById('help-suggestions').value.trim()) {
                        alert('êµ¬ì²´ì ì¸ ë„ì›€ ë°©ë²•ì„ ì ì–´ì£¼ì„¸ìš”!');
                        return false;
                    }
                    return true;
                case 'encourage':
                    return true;
                default:
                    return false;
            }
        }

        // í˜„ì¬ ë‹¨ê³„ ë°ì´í„° ì €ì¥
        function saveCurrentStepData(data) {
            Object.assign(consultingData, data);
        }

        // ë‹¨ê³„ í‘œì‹œ
        function showStep(stepName) {
            // ëª¨ë“  ë‹¨ê³„ ìˆ¨ê¸°ê¸°
            Object.values(steps).forEach(step => {
                step.classList.add('hidden');
                step.classList.remove('active');
            });
            
            // ì„ íƒëœ ë‹¨ê³„ ë³´ì´ê¸°
            steps[stepName].classList.remove('hidden');
            steps[stepName].classList.add('active');
            
            currentStep = stepName;
            updateProgress();
            
            // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¸°ê¸°
            document.getElementById('nav-buttons').classList.remove('hidden');
            updateNavButtons();
        }

        // í™”ë©´ ì „í™˜
        function showScreen(screenName) {
            Object.values(screens).forEach(screen => {
                screen.classList.add('hidden');
            });
            screens[screenName].classList.remove('hidden');
            
            if (screenName === 'consulting') {
                document.getElementById('nav-buttons').classList.remove('hidden');
            } else {
                document.getElementById('nav-buttons').classList.add('hidden');
            }
        }

        // ì§„í–‰ ìƒí™© ì—…ë°ì´íŠ¸
        function updateProgress() {
            const progressMap = {
                'emotions': { percent: 33, text: '1 / 3 ë‹¨ê³„' },
                'help': { percent: 66, text: '2 / 3 ë‹¨ê³„' },
                'encourage': { percent: 100, text: '3 / 3 ë‹¨ê³„' }
            };
            
            const progress = progressMap[currentStep] || { percent: 0, text: 'ì‹œì‘' };
            document.getElementById('progress-bar').style.width = `${progress.percent}%`;
            document.getElementById('progress-text').textContent = progress.text;
        }

        // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ì—…ë°ì´íŠ¸
        function updateNavButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            prevBtn.style.display = currentStep === 'emotions' ? 'none' : 'block';
            nextBtn.textContent = currentStep === 'encourage' ? 'ì™„ë£Œ' : 'â¡ï¸';
        }

        // ëœë¤ ê²©ë ¤ ë©”ì‹œì§€
        function drawRandomEncouragement() {
            const randomMessage = encouragementMessages[Math.floor(Math.random() * encouragementMessages.length)];
            document.getElementById('random-message').textContent = randomMessage;
        }

        // ê²°ê³¼ í™”ë©´ í‘œì‹œ
        function showResult() {
            const currentStepData = getCurrentStepData();
            saveCurrentStepData(currentStepData);
            
            showScreen('result');
            renderResultSummary();
        }

        // ê²°ê³¼ ìš”ì•½ ë Œë”ë§
        function renderResultSummary() {
            const container = document.getElementById('result-summary');
            container.innerHTML = `
                <div class="bg-gradient-to-r from-purple-100 to-pink-100 p-6 rounded-xl">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ“‹ ì»¨ì„¤íŒ… ìš”ì•½</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div><strong>ë„ì›€ ì¤€ ì¹œêµ¬:</strong> ${consultingData.helper.name} ${consultingData.helper.class}</div>
                        <div><strong>ë„ì›€ ë°›ì€ ì¹œêµ¬:</strong> ${consultingData.friend.name} ${consultingData.friend.class}</div>
                    </div>
                </div>

                <div class="bg-gray-50 p-6 rounded-xl">
                    <h4 class="font-bold text-gray-800 mb-3">ğŸ­ ìƒí™©</h4>
                    <p class="text-gray-700 mb-2"><strong>ì œëª©:</strong> ${consultingData.case.title}</p>
                    <p class="text-gray-700 mb-2"><strong>A. ìƒí™©:</strong> ${consultingData.case.situation}</p>
                    <p class="text-gray-700"><strong>B. ë¶€ì •ì  ìƒê°:</strong> ${consultingData.case.negativeThought}</p>
                </div>

                <div class="bg-purple-50 p-6 rounded-xl">
                    <h4 class="font-bold text-purple-800 mb-3">ğŸ’œ 1ë‹¨ê³„: ê°ì • ì½ì–´ì£¼ê¸°</h4>
                    <p class="text-purple-700 mb-2"><strong>ì„ íƒëœ ê°ì •:</strong> ${consultingData.emotions.join(', ')}</p>
                    <p class="text-purple-700"><strong>ê³µê°ì˜ ë§:</strong> ${consultingData.empathyMessage}</p>
                </div>

                <div class="bg-cyan-50 p-6 rounded-xl">
                    <h4 class="font-bold text-cyan-800 mb-3">ğŸ’¡ 2ë‹¨ê³„: ìƒˆë¡œìš´ ìƒê°ê³¼ ë„ì›€</h4>
                    <p class="text-cyan-700 mb-2"><strong>ìƒˆë¡œìš´ ê´€ì :</strong> ${consultingData.newPerspective}</p>
                    <p class="text-cyan-700"><strong>êµ¬ì²´ì  ë„ì›€:</strong> ${consultingData.helpSuggestions}</p>
                </div>

                <div class="bg-pink-50 p-6 rounded-xl">
                    <h4 class="font-bold text-pink-800 mb-3">ğŸŒŸ 3ë‹¨ê³„: ê²©ë ¤ ë©”ì‹œì§€</h4>
                    <p class="text-pink-700 mb-2"><strong>ëœë¤ ë©”ì‹œì§€:</strong> ${consultingData.randomMessage}</p>
                    ${consultingData.personalMessage ? `<p class="text-pink-700"><strong>ê°œì¸ ë©”ì‹œì§€:</strong> ${consultingData.personalMessage}</p>` : ''}
                </div>

                <div class="text-center text-gray-500 text-sm">
                    <p>ì™„ë£Œ ì‹œê°„: ${new Date().toLocaleString('ko-KR')}</p>
                </div>
            `;
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupEventListeners() {
            // ì‹œì‘ í™”ë©´
            document.getElementById('shuffle-btn').addEventListener('click', renderCaseCards);
            document.getElementById('start-consulting-btn').addEventListener('click', startConsulting);
            
            // ë‹¨ê³„ë³„ ë‹¤ìŒ ë²„íŠ¼
            document.getElementById('step1-next').addEventListener('click', nextStep);
            document.getElementById('step2-next').addEventListener('click', nextStep);
            document.getElementById('complete-btn').addEventListener('click', nextStep);
            
            // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼
            document.getElementById('prev-btn').addEventListener('click', prevStep);
            document.getElementById('next-btn').addEventListener('click', nextStep);
            
            // ê²©ë ¤ ë©”ì‹œì§€
            document.getElementById('random-encourage-btn').addEventListener('click', drawRandomEncouragement);
            
            // ê²°ê³¼ í™”ë©´ ë²„íŠ¼
            document.getElementById('new-case-btn').addEventListener('click', () => {
                selectedCase = null;
                selectedEmotions = [];
                consultingData = {};
                showScreen('start');
                renderCaseCards();
                document.getElementById('start-consulting-btn').disabled = true;
            });
            
            document.getElementById('restart-btn').addEventListener('click', () => {
                location.reload();
            });
            
            document.getElementById('print-btn').addEventListener('click', () => {
                window.print();
            });
        }

        // ì „ì—­ í•¨ìˆ˜ë“¤ (HTMLì—ì„œ í˜¸ì¶œ)
        window.selectCase = selectCase;
        window.toggleEmotion = toggleEmotion;

        // ì´ˆê¸°í™” ì‹¤í–‰
        init();
    </script>
</body>
</html>